/* src/AI/components/AiWidget.css */

/* --- KONTEJNER --- */
.ai-widget-container {
  position: fixed;
  bottom: 40px; /* Odsazení od spodního okraje */
  left: 50%;
  transform: translateX(-50%); /* Přesný střed */
  z-index: 9999;
  
  display: flex;
  flex-direction: column; /* Prvky pod sebou (bublina nahoře, koule dole) */
  align-items: center;    /* Horizontální centrování */
  justify-content: flex-end; /* Zarovnání k dolnímu okraji kontejneru */
  
  /* Zvětšená mezera, aby text "dýchal" */
  gap: 30px; 
  
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  pointer-events: none; /* Aby kontejner neblokoval klikání okolo */
  /* Omezíme výšku, aby kontejner neblokoval celou obrazovku */
  max-height: 60vh; 
}

/* Povolíme klikání jen na interaktivní prvky */
.ai-orb, .ai-chat-bubble { pointer-events: auto; }


/* --- BUBLINA (Oprava pozice a vzhledu) --- */
.ai-chat-bubble {
  /* Zajistíme, že se odlepí od koule */
  margin-bottom: 10px; 
  
  background: rgba(15, 23, 35, 0.9); /* Tmavší, víc "profi" */
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  padding: 18px 26px;
  border-radius: 24px;
  /* Jemný světlý okraj nahoře pro 3D efekt */
  border-top: 1px solid rgba(255,255,255,0.15);
  border-bottom: 1px solid rgba(255,255,255,0.05);
  
  color: white;
  /* Automatická šířka podle textu, ale s limity */
  width: auto; 
  min-width: 180px;
  max-width: 380px;
  
  text-align: center;
  box-shadow: 
    0 20px 40px rgba(0,0,0,0.4), /* Hluboký stín */
    0 0 0 1px rgba(0,0,0,0.2); /* Jemná linka okolo */
    
  /* Bublina se objeví a vyjede nahoru */
  animation: pop-up-bubble 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  transform-origin: bottom center;
}

.hint { color: #f87171; font-weight: 800; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 2px; }
.user-msg { color: #94a3b8; font-style: italic; margin-bottom: 8px; font-size: 0.95rem; }
.ai-msg { font-weight: 500; font-size: 1.1rem; color: #f1f5f9; line-height: 1.6; }


/* --- ORB (Živá 3D sféra) --- */
.ai-orb {
  width: 75px;
  height: 75px;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  position: relative;
  transition: all 0.4s ease-in-out;

  /* --- ZÁSADNÍ ZMĚNA: ŽIVÝ VNITŘEK --- */
  /* Používáme 'currentColor' uvnitř gradientu. To způsobí, 
     že se vnitřek přebarví podle toho, jakou barvu má zrovna záře. */
  background: radial-gradient(
    circle at 30% 30%,              /* Světlo zleva shora */
    rgba(255, 255, 255, 0.5) 0%,    /* Jasný odlesk */
    rgba(255, 255, 255, 0.1) 25%,   /* Skleněný přechod */
    currentColor 60%,               /* => TOTO JE BARVA JÁDRA <= */
    #0a0a0a 100%                    /* Tmavé okraje */
  );
  
  /* Vrstvené stíny pro záři okolo */
  box-shadow: 
    inset 0 0 25px rgba(0,0,0,0.6), /* Vnitřní stín pro hloubku */
    0 0 15px currentColor,          /* Záře 1 */
    0 0 40px currentColor;          /* Záře 2 */
  
  /* Výchozí barva (Idle) */
  color: rgba(59, 130, 246, 0.5); 
}

.ai-orb:hover {
  transform: scale(1.08);
  box-shadow: inset 0 0 25px rgba(0,0,0,0.6), 0 0 25px currentColor, 0 0 60px currentColor;
}

/* --- STAVY A PULZOVÁNÍ (Nyní ovlivňují i vnitřek) --- */

/* 1. IDLE - Klidná modrá */
.ai-widget-container.idle .ai-orb {
  color: rgba(59, 130, 246, 0.6);
  animation: inner-pulse-slow 4s ease-in-out infinite alternate;
}

/* 2. LISTENING - Intenzivní červená */
.ai-widget-container.listening .ai-orb {
  color: rgba(220, 38, 38, 0.8); /* Sytější červená */
  animation: inner-pulse-fast 1s ease-in-out infinite alternate;
  transform: scale(1.1);
}

/* 3. PROCESSING - Měnění barev */
.ai-widget-container.processing .ai-orb {
  animation: 
    color-shift 3s linear infinite,
    inner-pulse-medium 1.5s ease-in-out infinite alternate;
}

/* 4. SPEAKING - Zelená/Tyrkysová aktivita */
.ai-widget-container.speaking .ai-orb {
  color: rgba(5, 150, 105, 0.7);
  animation: inner-pulse-medium 2s ease-in-out infinite alternate;
}


/* --- NOVÉ ANIMACE (Pro vnitřní pulzování) --- */

@keyframes inner-pulse-slow {
  0% { opacity: 0.8; transform: scale(1); filter: brightness(1); }
  100% { opacity: 1; transform: scale(1.02); filter: brightness(1.2); }
}

@keyframes inner-pulse-medium {
  0% { opacity: 0.8; transform: scale(1); filter: brightness(1); box-shadow: inset 0 0 25px rgba(0,0,0,0.6), 0 0 15px currentColor, 0 0 40px currentColor; }
  100% { opacity: 1; transform: scale(1.05); filter: brightness(1.3); box-shadow: inset 0 0 25px rgba(0,0,0,0.6), 0 0 25px currentColor, 0 0 60px currentColor;}
}

@keyframes inner-pulse-fast {
  0% { transform: scale(1.1); filter: brightness(1); }
  100% { transform: scale(1.15); filter: brightness(1.4); box-shadow: inset 0 0 25px rgba(0,0,0,0.6), 0 0 30px currentColor, 0 0 80px currentColor; }
}

@keyframes color-shift {
  0% { color: #ff0080; } 33% { color: #7928ca; } 66% { color: #00dfd8; } 100% { color: #ff0080; }
}

@keyframes pop-up-bubble {
  from { opacity: 0; transform: translateY(40px) scale(0.8); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}