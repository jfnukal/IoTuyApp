var JA=Object.defineProperty;var eN=(t,e,n)=>e in t?JA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var gt=(t,e,n)=>eN(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function tN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var j0={exports:{}},Uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nN=Symbol.for("react.transitional.element"),iN=Symbol.for("react.fragment");function M0(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:nN,type:t,key:i,ref:e!==void 0?e:null,props:n}}Uu.Fragment=iN;Uu.jsx=M0;Uu.jsxs=M0;j0.exports=Uu;var u=j0.exports,O0={exports:{}},te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em=Symbol.for("react.transitional.element"),sN=Symbol.for("react.portal"),rN=Symbol.for("react.fragment"),aN=Symbol.for("react.strict_mode"),oN=Symbol.for("react.profiler"),lN=Symbol.for("react.consumer"),cN=Symbol.for("react.context"),uN=Symbol.for("react.forward_ref"),hN=Symbol.for("react.suspense"),dN=Symbol.for("react.memo"),P0=Symbol.for("react.lazy"),Iy=Symbol.iterator;function fN(t){return t===null||typeof t!="object"?null:(t=Iy&&t[Iy]||t["@@iterator"],typeof t=="function"?t:null)}var V0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U0=Object.assign,L0={};function sa(t,e,n){this.props=t,this.context=e,this.refs=L0,this.updater=n||V0}sa.prototype.isReactComponent={};sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function z0(){}z0.prototype=sa.prototype;function Tm(t,e,n){this.props=t,this.context=e,this.refs=L0,this.updater=n||V0}var bm=Tm.prototype=new z0;bm.constructor=Tm;U0(bm,sa.prototype);bm.isPureReactComponent=!0;var Cy=Array.isArray,Ie={H:null,A:null,T:null,S:null,V:null},B0=Object.prototype.hasOwnProperty;function wm(t,e,n,i,s,r){return n=r.ref,{$$typeof:Em,type:t,key:e,ref:n!==void 0?n:null,props:r}}function mN(t,e){return wm(t.type,e,void 0,void 0,void 0,t.props)}function Sm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Em}function pN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dy=/\/+/g;function Jh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pN(""+t.key):e.toString(36)}function xy(){}function gN(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(xy,xy):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function or(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Em:case sN:a=!0;break;case P0:return a=t._init,or(a(t._payload),e,n,i,s)}}if(a)return s=s(t),a=i===""?"."+Jh(t,0):i,Cy(s)?(n="",a!=null&&(n=a.replace(Dy,"$&/")+"/"),or(s,e,n,"",function(h){return h})):s!=null&&(Sm(s)&&(s=mN(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(Dy,"$&/")+"/")+a)),e.push(s)),1;a=0;var l=i===""?".":i+":";if(Cy(t))for(var c=0;c<t.length;c++)i=t[c],r=l+Jh(i,c),a+=or(i,e,n,r,s);else if(c=fN(t),typeof c=="function")for(t=c.call(t),c=0;!(i=t.next()).done;)i=i.value,r=l+Jh(i,c++),a+=or(i,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return or(gN(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Kl(t,e,n){if(t==null)return t;var i=[],s=0;return or(t,i,"","",function(r){return e.call(n,r,s++)}),i}function yN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ky=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function vN(){}te.Children={map:Kl,forEach:function(t,e,n){Kl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kl(t,function(){e++}),e},toArray:function(t){return Kl(t,function(e){return e})||[]},only:function(t){if(!Sm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=sa;te.Fragment=rN;te.Profiler=oN;te.PureComponent=Tm;te.StrictMode=aN;te.Suspense=hN;te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ie;te.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ie.H.useMemoCache(t)}};te.cache=function(t){return function(){return t.apply(null,arguments)}};te.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=U0({},t.props),s=t.key,r=void 0;if(e!=null)for(a in e.ref!==void 0&&(r=void 0),e.key!==void 0&&(s=""+e.key),e)!B0.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}return wm(t.type,s,void 0,void 0,r,i)};te.createContext=function(t){return t={$$typeof:cN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:lN,_context:t},t};te.createElement=function(t,e,n){var i,s={},r=null;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)B0.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return wm(t,r,void 0,void 0,null,s)};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:uN,render:t}};te.isValidElement=Sm;te.lazy=function(t){return{$$typeof:P0,_payload:{_status:-1,_result:t},_init:yN}};te.memo=function(t,e){return{$$typeof:dN,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Ie.T,n={};Ie.T=n;try{var i=t(),s=Ie.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(vN,ky)}catch(r){ky(r)}finally{Ie.T=e}};te.unstable_useCacheRefresh=function(){return Ie.H.useCacheRefresh()};te.use=function(t){return Ie.H.use(t)};te.useActionState=function(t,e,n){return Ie.H.useActionState(t,e,n)};te.useCallback=function(t,e){return Ie.H.useCallback(t,e)};te.useContext=function(t){return Ie.H.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t,e){return Ie.H.useDeferredValue(t,e)};te.useEffect=function(t,e,n){var i=Ie.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)};te.useId=function(){return Ie.H.useId()};te.useImperativeHandle=function(t,e,n){return Ie.H.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return Ie.H.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Ie.H.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Ie.H.useMemo(t,e)};te.useOptimistic=function(t,e){return Ie.H.useOptimistic(t,e)};te.useReducer=function(t,e,n){return Ie.H.useReducer(t,e,n)};te.useRef=function(t){return Ie.H.useRef(t)};te.useState=function(t){return Ie.H.useState(t)};te.useSyncExternalStore=function(t,e,n){return Ie.H.useSyncExternalStore(t,e,n)};te.useTransition=function(){return Ie.H.useTransition()};te.version="19.1.1";O0.exports=te;var M=O0.exports;const Lu=tN(M);var q0={exports:{}},zu={},H0={exports:{}},F0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,q){var K=B.length;B.push(q);e:for(;0<K;){var ie=K-1>>>1,Ee=B[ie];if(0<s(Ee,q))B[ie]=q,B[K]=Ee,K=ie;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var q=B[0],K=B.pop();if(K!==q){B[0]=K;e:for(var ie=0,Ee=B.length,wn=Ee>>>1;ie<wn;){var ze=2*(ie+1)-1,Be=B[ze],Bn=ze+1,Sn=B[Bn];if(0>s(Be,K))Bn<Ee&&0>s(Sn,Be)?(B[ie]=Sn,B[Bn]=K,ie=Bn):(B[ie]=Be,B[ze]=K,ie=ze);else if(Bn<Ee&&0>s(Sn,K))B[ie]=Sn,B[Bn]=K,ie=Bn;else break e}}return q}function s(B,q){var K=B.sortIndex-q.sortIndex;return K!==0?K:B.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],f=1,p=null,m=3,v=!1,w=!1,I=!1,N=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function x(B){for(var q=n(h);q!==null;){if(q.callback===null)i(h);else if(q.startTime<=B)i(h),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(h)}}function P(B){if(I=!1,x(B),!w)if(n(c)!==null)w=!0,V||(V=!0,k());else{var q=n(h);q!==null&&F(P,q.startTime-B)}}var V=!1,S=-1,T=5,R=-1;function C(){return N?!0:!(t.unstable_now()-R<T)}function D(){if(N=!1,V){var B=t.unstable_now();R=B;var q=!0;try{e:{w=!1,I&&(I=!1,_(S),S=-1),v=!0;var K=m;try{t:{for(x(B),p=n(c);p!==null&&!(p.expirationTime>B&&C());){var ie=p.callback;if(typeof ie=="function"){p.callback=null,m=p.priorityLevel;var Ee=ie(p.expirationTime<=B);if(B=t.unstable_now(),typeof Ee=="function"){p.callback=Ee,x(B),q=!0;break t}p===n(c)&&i(c),x(B)}else i(c);p=n(c)}if(p!==null)q=!0;else{var wn=n(h);wn!==null&&F(P,wn.startTime-B),q=!1}}break e}finally{p=null,m=K,v=!1}q=void 0}}finally{q?k():V=!1}}}var k;if(typeof b=="function")k=function(){b(D)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Q=A.port2;A.port1.onmessage=D,k=function(){Q.postMessage(null)}}else k=function(){y(D,0)};function F(B,q){S=y(function(){B(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var K=m;m=q;try{return B()}finally{m=K}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(B,q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=m;m=B;try{return q()}finally{m=K}},t.unstable_scheduleCallback=function(B,q,K){var ie=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ie+K:ie):K=ie,B){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=K+Ee,B={id:f++,callback:q,priorityLevel:B,startTime:K,expirationTime:Ee,sortIndex:-1},K>ie?(B.sortIndex=K,e(h,B),n(c)===null&&B===n(h)&&(I?(_(S),S=-1):I=!0,F(P,K-ie))):(B.sortIndex=Ee,e(c,B),w||v||(w=!0,V||(V=!0,k()))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var q=m;return function(){var K=m;m=q;try{return B.apply(this,arguments)}finally{m=K}}}})(F0);H0.exports=F0;var _N=H0.exports,G0={exports:{}},xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EN=M;function K0(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ti(){}var It={d:{f:Ti,r:function(){throw Error(K0(522))},D:Ti,C:Ti,L:Ti,m:Ti,X:Ti,S:Ti,M:Ti},p:0,findDOMNode:null},TN=Symbol.for("react.portal");function bN(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:TN,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Xa=EN.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Bu(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=It;xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(K0(299));return bN(t,e,null,n)};xt.flushSync=function(t){var e=Xa.T,n=It.p;try{if(Xa.T=null,It.p=2,t)return t()}finally{Xa.T=e,It.p=n,It.d.f()}};xt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,It.d.C(t,e))};xt.prefetchDNS=function(t){typeof t=="string"&&It.d.D(t)};xt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Bu(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?It.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&It.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};xt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Bu(e.as,e.crossOrigin);It.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&It.d.M(t)};xt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Bu(n,e.crossOrigin);It.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};xt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Bu(e.as,e.crossOrigin);It.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else It.d.m(t)};xt.requestFormReset=function(t){It.d.r(t)};xt.unstable_batchedUpdates=function(t,e){return t(e)};xt.useFormState=function(t,e,n){return Xa.H.useFormState(t,e,n)};xt.useFormStatus=function(){return Xa.H.useHostTransitionStatus()};xt.version="19.1.1";function $0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($0)}catch(t){console.error(t)}}$0(),G0.exports=xt;var qu=G0.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We=_N,Y0=M,wN=qu;function L(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Q0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function W0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jy(t){if(Yo(t)!==t)throw Error(L(188))}function SN(t){var e=t.alternate;if(!e){if(e=Yo(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return jy(s),t;if(r===i)return jy(s),e;r=r.sibling}throw Error(L(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==i)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function X0(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=X0(t),e!==null)return e;t=t.sibling}return null}var Ne=Object.assign,AN=Symbol.for("react.element"),$l=Symbol.for("react.transitional.element"),Ba=Symbol.for("react.portal"),mr=Symbol.for("react.fragment"),Z0=Symbol.for("react.strict_mode"),Xd=Symbol.for("react.profiler"),NN=Symbol.for("react.provider"),J0=Symbol.for("react.consumer"),Qn=Symbol.for("react.context"),Am=Symbol.for("react.forward_ref"),Zd=Symbol.for("react.suspense"),Jd=Symbol.for("react.suspense_list"),Nm=Symbol.for("react.memo"),Ni=Symbol.for("react.lazy"),ef=Symbol.for("react.activity"),RN=Symbol.for("react.memo_cache_sentinel"),My=Symbol.iterator;function Da(t){return t===null||typeof t!="object"?null:(t=My&&t[My]||t["@@iterator"],typeof t=="function"?t:null)}var IN=Symbol.for("react.client.reference");function tf(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===IN?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mr:return"Fragment";case Xd:return"Profiler";case Z0:return"StrictMode";case Zd:return"Suspense";case Jd:return"SuspenseList";case ef:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Ba:return"Portal";case Qn:return(t.displayName||"Context")+".Provider";case J0:return(t._context.displayName||"Context")+".Consumer";case Am:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nm:return e=t.displayName||null,e!==null?e:tf(t.type)||"Memo";case Ni:e=t._payload,t=t._init;try{return tf(t(e))}catch{}}return null}var qa=Array.isArray,X=Y0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=wN.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rs={pending:!1,data:null,method:null,action:null},nf=[],pr=-1;function Un(t){return{current:t}}function tt(t){0>pr||(t.current=nf[pr],nf[pr]=null,pr--)}function Ce(t,e){pr++,nf[pr]=t.current,t.current=e}var Cn=Un(null),To=Un(null),Bi=Un(null),Lc=Un(null);function zc(t,e){switch(Ce(Bi,e),Ce(To,t),Ce(Cn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Lv(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Lv(e),t=gb(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}tt(Cn),Ce(Cn,t)}function Lr(){tt(Cn),tt(To),tt(Bi)}function sf(t){t.memoizedState!==null&&Ce(Lc,t);var e=Cn.current,n=gb(e,t.type);e!==n&&(Ce(To,t),Ce(Cn,n))}function Bc(t){To.current===t&&(tt(Cn),tt(To)),Lc.current===t&&(tt(Lc),xo._currentValue=Rs)}var rf=Object.prototype.hasOwnProperty,Rm=We.unstable_scheduleCallback,ed=We.unstable_cancelCallback,CN=We.unstable_shouldYield,DN=We.unstable_requestPaint,Dn=We.unstable_now,xN=We.unstable_getCurrentPriorityLevel,eE=We.unstable_ImmediatePriority,tE=We.unstable_UserBlockingPriority,qc=We.unstable_NormalPriority,kN=We.unstable_LowPriority,nE=We.unstable_IdlePriority,jN=We.log,MN=We.unstable_setDisableYieldValue,Qo=null,$t=null;function Oi(t){if(typeof jN=="function"&&MN(t),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Qo,t)}catch{}}var Yt=Math.clz32?Math.clz32:VN,ON=Math.log,PN=Math.LN2;function VN(t){return t>>>=0,t===0?32:31-(ON(t)/PN|0)|0}var Yl=256,Ql=4194304;function ys(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Hu(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var s=0,r=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=ys(i):(a&=l,a!==0?s=ys(a):n||(n=l&~t,n!==0&&(s=ys(n))))):(l=i&~r,l!==0?s=ys(l):a!==0?s=ys(a):n||(n=i&~t,n!==0&&(s=ys(n)))),s===0?0:e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:s}function Wo(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function UN(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iE(){var t=Yl;return Yl<<=1,!(Yl&4194048)&&(Yl=256),t}function sE(){var t=Ql;return Ql<<=1,!(Ql&62914560)&&(Ql=4194304),t}function td(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xo(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function LN(t,e,n,i,s,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,h=t.hiddenUpdates;for(n=a&~n;0<n;){var f=31-Yt(n),p=1<<f;l[f]=0,c[f]=-1;var m=h[f];if(m!==null)for(h[f]=null,f=0;f<m.length;f++){var v=m[f];v!==null&&(v.lane&=-536870913)}n&=~p}i!==0&&rE(t,i,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function rE(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Yt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function aE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Yt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function Im(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Cm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function oE(){var t=me.p;return t!==0?t:(t=window.event,t===void 0?32:Nb(t.type))}function zN(t,e){var n=me.p;try{return me.p=t,e()}finally{me.p=n}}var ss=Math.random().toString(36).slice(2),Et="__reactFiber$"+ss,Vt="__reactProps$"+ss,ra="__reactContainer$"+ss,af="__reactEvents$"+ss,BN="__reactListeners$"+ss,qN="__reactHandles$"+ss,Oy="__reactResources$"+ss,Zo="__reactMarker$"+ss;function Dm(t){delete t[Et],delete t[Vt],delete t[af],delete t[BN],delete t[qN]}function gr(t){var e=t[Et];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ra]||n[Et]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qv(t);t!==null;){if(n=t[Et])return n;t=qv(t)}return e}t=n,n=t.parentNode}return null}function aa(t){if(t=t[Et]||t[ra]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Ha(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(L(33))}function Rr(t){var e=t[Oy];return e||(e=t[Oy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Je(t){t[Zo]=!0}var lE=new Set,cE={};function $s(t,e){zr(t,e),zr(t+"Capture",e)}function zr(t,e){for(cE[t]=e,t=0;t<e.length;t++)lE.add(e[t])}var HN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Py={},Vy={};function FN(t){return rf.call(Vy,t)?!0:rf.call(Py,t)?!1:HN.test(t)?Vy[t]=!0:(Py[t]=!0,!1)}function gc(t,e,n){if(FN(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Wl(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Fn(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var nd,Uy;function lr(t){if(nd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nd=e&&e[1]||"",Uy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nd+t+Uy}var id=!1;function sd(t,e){if(!t||id)return"";id=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(v){var m=v}Reflect.construct(t,[],p)}else{try{p.call()}catch(v){m=v}t.call(p.prototype)}}else{try{throw Error()}catch(v){m=v}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(v){if(v&&m&&typeof v.stack=="string")return[v.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var c=a.split(`
`),h=l.split(`
`);for(s=i=0;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(i===c.length||s===h.length)for(i=c.length-1,s=h.length-1;1<=i&&0<=s&&c[i]!==h[s];)s--;for(;1<=i&&0<=s;i--,s--)if(c[i]!==h[s]){if(i!==1||s!==1)do if(i--,s--,0>s||c[i]!==h[s]){var f=`
`+c[i].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=i&&0<=s);break}}}finally{id=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?lr(n):""}function GN(t){switch(t.tag){case 26:case 27:case 5:return lr(t.type);case 16:return lr("Lazy");case 13:return lr("Suspense");case 19:return lr("SuspenseList");case 0:case 15:return sd(t.type,!1);case 11:return sd(t.type.render,!1);case 1:return sd(t.type,!0);case 31:return lr("Activity");default:return""}}function Ly(t){try{var e="";do e+=GN(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KN(t){var e=uE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hc(t){t._valueTracker||(t._valueTracker=KN(t))}function hE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=uE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Fc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var $N=/[\n"\\]/g;function sn(t){return t.replace($N,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function of(t,e,n,i,s,r,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+en(e)):t.value!==""+en(e)&&(t.value=""+en(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?lf(t,a,en(e)):n!=null?lf(t,a,en(n)):i!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+en(l):t.removeAttribute("name")}function dE(t,e,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null))return;n=n!=null?""+en(n):"",e=e!=null?""+en(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function lf(t,e,n){e==="number"&&Fc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Ir(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+en(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function fE(t,e,n){if(e!=null&&(e=""+en(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+en(n):""}function mE(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(L(92));if(qa(i)){if(1<i.length)throw Error(L(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=en(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function Br(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var YN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zy(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||YN.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function pE(t,e,n){if(e!=null&&typeof e!="object")throw Error(L(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&zy(t,s,i)}else for(var r in e)e.hasOwnProperty(r)&&zy(t,r,e[r])}function xm(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yc(t){return WN.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var cf=null;function km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yr=null,Cr=null;function By(t){var e=aa(t);if(e&&(t=e.stateNode)){var n=t[Vt]||null;e:switch(t=e.stateNode,e.type){case"input":if(of(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+sn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[Vt]||null;if(!s)throw Error(L(90));of(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&hE(i)}break e;case"textarea":fE(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Ir(t,!!n.multiple,e,!1)}}}var rd=!1;function gE(t,e,n){if(rd)return t(e,n);rd=!0;try{var i=t(e);return i}finally{if(rd=!1,(yr!==null||Cr!==null)&&(Ju(),yr&&(e=yr,t=Cr,Cr=yr=null,By(e),t)))for(e=0;e<t.length;e++)By(t[e])}}function bo(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Vt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uf=!1;if(oi)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){uf=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{uf=!1}var Pi=null,jm=null,vc=null;function yE(){if(vc)return vc;var t,e=jm,n=e.length,i,s="value"in Pi?Pi.value:Pi.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===s[r-i];i++);return vc=s.slice(t,1<i?1-i:void 0)}function _c(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xl(){return!0}function qy(){return!1}function Ut(t){function e(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Xl:qy,this.isPropagationStopped=qy,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),e}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fu=Ut(Ys),Jo=Ne({},Ys,{view:0,detail:0}),XN=Ut(Jo),ad,od,ka,Gu=Ne({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ka&&(ka&&t.type==="mousemove"?(ad=t.screenX-ka.screenX,od=t.screenY-ka.screenY):od=ad=0,ka=t),ad)},movementY:function(t){return"movementY"in t?t.movementY:od}}),Hy=Ut(Gu),ZN=Ne({},Gu,{dataTransfer:0}),JN=Ut(ZN),eR=Ne({},Jo,{relatedTarget:0}),ld=Ut(eR),tR=Ne({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),nR=Ut(tR),iR=Ne({},Ys,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sR=Ut(iR),rR=Ne({},Ys,{data:0}),Fy=Ut(rR),aR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lR[t])?!!e[t]:!1}function Mm(){return cR}var uR=Ne({},Jo,{key:function(t){if(t.key){var e=aR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_c(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mm,charCode:function(t){return t.type==="keypress"?_c(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_c(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hR=Ut(uR),dR=Ne({},Gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gy=Ut(dR),fR=Ne({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mm}),mR=Ut(fR),pR=Ne({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),gR=Ut(pR),yR=Ne({},Gu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vR=Ut(yR),_R=Ne({},Ys,{newState:0,oldState:0}),ER=Ut(_R),TR=[9,13,27,32],Om=oi&&"CompositionEvent"in window,Za=null;oi&&"documentMode"in document&&(Za=document.documentMode);var bR=oi&&"TextEvent"in window&&!Za,vE=oi&&(!Om||Za&&8<Za&&11>=Za),Ky=" ",$y=!1;function _E(t,e){switch(t){case"keyup":return TR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vr=!1;function wR(t,e){switch(t){case"compositionend":return EE(e);case"keypress":return e.which!==32?null:($y=!0,Ky);case"textInput":return t=e.data,t===Ky&&$y?null:t;default:return null}}function SR(t,e){if(vr)return t==="compositionend"||!Om&&_E(t,e)?(t=yE(),vc=jm=Pi=null,vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vE&&e.locale!=="ko"?null:e.data;default:return null}}var AR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AR[t.type]:e==="textarea"}function TE(t,e,n,i){yr?Cr?Cr.push(i):Cr=[i]:yr=i,e=lu(e,"onChange"),0<e.length&&(n=new Fu("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ja=null,wo=null;function NR(t){fb(t,0)}function Ku(t){var e=Ha(t);if(hE(e))return t}function Qy(t,e){if(t==="change")return e}var bE=!1;if(oi){var cd;if(oi){var ud="oninput"in document;if(!ud){var Wy=document.createElement("div");Wy.setAttribute("oninput","return;"),ud=typeof Wy.oninput=="function"}cd=ud}else cd=!1;bE=cd&&(!document.documentMode||9<document.documentMode)}function Xy(){Ja&&(Ja.detachEvent("onpropertychange",wE),wo=Ja=null)}function wE(t){if(t.propertyName==="value"&&Ku(wo)){var e=[];TE(e,wo,t,km(t)),gE(NR,e)}}function RR(t,e,n){t==="focusin"?(Xy(),Ja=e,wo=n,Ja.attachEvent("onpropertychange",wE)):t==="focusout"&&Xy()}function IR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ku(wo)}function CR(t,e){if(t==="click")return Ku(e)}function DR(t,e){if(t==="input"||t==="change")return Ku(e)}function xR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zt=typeof Object.is=="function"?Object.is:xR;function So(t,e){if(Zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!rf.call(e,s)||!Zt(t[s],e[s]))return!1}return!0}function Zy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jy(t,e){var n=Zy(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zy(n)}}function SE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function AE(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Fc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fc(t.document)}return e}function Pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var kR=oi&&"documentMode"in document&&11>=document.documentMode,_r=null,hf=null,eo=null,df=!1;function ev(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;df||_r==null||_r!==Fc(i)||(i=_r,"selectionStart"in i&&Pm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),eo&&So(eo,i)||(eo=i,i=lu(hf,"onSelect"),0<i.length&&(e=new Fu("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=_r)))}function gs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Er={animationend:gs("Animation","AnimationEnd"),animationiteration:gs("Animation","AnimationIteration"),animationstart:gs("Animation","AnimationStart"),transitionrun:gs("Transition","TransitionRun"),transitionstart:gs("Transition","TransitionStart"),transitioncancel:gs("Transition","TransitionCancel"),transitionend:gs("Transition","TransitionEnd")},hd={},NE={};oi&&(NE=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function Qs(t){if(hd[t])return hd[t];if(!Er[t])return t;var e=Er[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in NE)return hd[t]=e[n];return t}var RE=Qs("animationend"),IE=Qs("animationiteration"),CE=Qs("animationstart"),jR=Qs("transitionrun"),MR=Qs("transitionstart"),OR=Qs("transitioncancel"),DE=Qs("transitionend"),xE=new Map,ff="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ff.push("scrollEnd");function _n(t,e){xE.set(t,e),$s(e,[t])}var tv=new WeakMap;function rn(t,e){if(typeof t=="object"&&t!==null){var n=tv.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Ly(e)},tv.set(t,e),e)}return{value:t,source:e,stack:Ly(e)}}var Jt=[],Tr=0,Vm=0;function $u(){for(var t=Tr,e=Vm=Tr=0;e<t;){var n=Jt[e];Jt[e++]=null;var i=Jt[e];Jt[e++]=null;var s=Jt[e];Jt[e++]=null;var r=Jt[e];if(Jt[e++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&kE(n,s,r)}}function Yu(t,e,n,i){Jt[Tr++]=t,Jt[Tr++]=e,Jt[Tr++]=n,Jt[Tr++]=i,Vm|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Um(t,e,n,i){return Yu(t,e,n,i),Gc(t)}function oa(t,e){return Yu(t,null,null,e),Gc(t)}function kE(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,s&&e!==null&&(s=31-Yt(n),t=r.hiddenUpdates,i=t[s],i===null?t[s]=[e]:i.push(e),e.lane=n|536870912),r):null}function Gc(t){if(50<uo)throw uo=0,Mf=null,Error(L(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var br={};function PR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,i){return new PR(t,e,n,i)}function Lm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ii(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function jE(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Ec(t,e,n,i,s,r){var a=0;if(i=t,typeof t=="function")Lm(t)&&(a=1);else if(typeof t=="string")a=UI(t,n,Cn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ef:return t=Gt(31,n,e,s),t.elementType=ef,t.lanes=r,t;case mr:return Is(n.children,s,r,e);case Z0:a=8,s|=24;break;case Xd:return t=Gt(12,n,e,s|2),t.elementType=Xd,t.lanes=r,t;case Zd:return t=Gt(13,n,e,s),t.elementType=Zd,t.lanes=r,t;case Jd:return t=Gt(19,n,e,s),t.elementType=Jd,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case NN:case Qn:a=10;break e;case J0:a=9;break e;case Am:a=11;break e;case Nm:a=14;break e;case Ni:a=16,i=null;break e}a=29,n=Error(L(130,t===null?"null":typeof t,"")),i=null}return e=Gt(a,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Is(t,e,n,i){return t=Gt(7,t,i,e),t.lanes=n,t}function dd(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function fd(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var wr=[],Sr=0,Kc=null,$c=0,tn=[],nn=0,Cs=null,Wn=1,Xn="";function vs(t,e){wr[Sr++]=$c,wr[Sr++]=Kc,Kc=t,$c=e}function ME(t,e,n){tn[nn++]=Wn,tn[nn++]=Xn,tn[nn++]=Cs,Cs=t;var i=Wn;t=Xn;var s=32-Yt(i)-1;i&=~(1<<s),n+=1;var r=32-Yt(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Wn=1<<32-Yt(e)+s|n<<s|i,Xn=r+t}else Wn=1<<r|n<<s|i,Xn=t}function zm(t){t.return!==null&&(vs(t,1),ME(t,1,0))}function Bm(t){for(;t===Kc;)Kc=wr[--Sr],wr[Sr]=null,$c=wr[--Sr],wr[Sr]=null;for(;t===Cs;)Cs=tn[--nn],tn[nn]=null,Xn=tn[--nn],tn[nn]=null,Wn=tn[--nn],tn[nn]=null}var Rt=null,Oe=null,fe=!1,Ds=null,Rn=!1,mf=Error(L(519));function Ps(t){var e=Error(L(418,""));throw Ao(rn(e,t)),mf}function nv(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Et]=t,e[Vt]=i,n){case"dialog":re("cancel",e),re("close",e);break;case"iframe":case"object":case"embed":re("load",e);break;case"video":case"audio":for(n=0;n<Io.length;n++)re(Io[n],e);break;case"source":re("error",e);break;case"img":case"image":case"link":re("error",e),re("load",e);break;case"details":re("toggle",e);break;case"input":re("invalid",e),dE(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Hc(e);break;case"select":re("invalid",e);break;case"textarea":re("invalid",e),mE(e,i.value,i.defaultValue,i.children),Hc(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||pb(e.textContent,n)?(i.popover!=null&&(re("beforetoggle",e),re("toggle",e)),i.onScroll!=null&&re("scroll",e),i.onScrollEnd!=null&&re("scrollend",e),i.onClick!=null&&(e.onclick=nh),e=!0):e=!1,e||Ps(t)}function iv(t){for(Rt=t.return;Rt;)switch(Rt.tag){case 5:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:Rt=Rt.return}}function ja(t){if(t!==Rt)return!1;if(!fe)return iv(t),fe=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||zf(t.type,t.memoizedProps)),n=!n),n&&Oe&&Ps(t),iv(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Oe=pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Oe=null}}else e===27?(e=Oe,rs(t.type)?(t=Hf,Hf=null,Oe=t):Oe=e):Oe=Rt?pn(t.stateNode.nextSibling):null;return!0}function el(){Oe=Rt=null,fe=!1}function sv(){var t=Ds;return t!==null&&(Mt===null?Mt=t:Mt.push.apply(Mt,t),Ds=null),t}function Ao(t){Ds===null?Ds=[t]:Ds.push(t)}var pf=Un(null),Ws=null,Zn=null;function Ii(t,e,n){Ce(pf,e._currentValue),e._currentValue=n}function si(t){t._currentValue=pf.current,tt(pf)}function gf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function yf(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=s;for(var c=0;c<e.length;c++)if(l.context===e[c]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),gf(r.return,n,t),i||(a=null);break e}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(L(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),gf(a,n,t),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function tl(t,e,n,i){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(L(387));if(a=a.memoizedProps,a!==null){var l=s.type;Zt(s.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(s===Lc.current){if(a=s.alternate,a===null)throw Error(L(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(xo):t=[xo])}s=s.return}t!==null&&yf(e,t,n,i),e.flags|=262144}function Yc(t){for(t=t.firstContext;t!==null;){if(!Zt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Vs(t){Ws=t,Zn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Tt(t){return OE(Ws,t)}function Zl(t,e){return Ws===null&&Vs(t),OE(t,e)}function OE(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Zn===null){if(t===null)throw Error(L(308));Zn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Zn=Zn.next=e;return n}var VR=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},UR=We.unstable_scheduleCallback,LR=We.unstable_NormalPriority,$e={$$typeof:Qn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qm(){return{controller:new VR,data:new Map,refCount:0}}function nl(t){t.refCount--,t.refCount===0&&UR(LR,function(){t.controller.abort()})}var to=null,vf=0,qr=0,Dr=null;function zR(t,e){if(to===null){var n=to=[];vf=0,qr=hp(),Dr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return vf++,e.then(rv,rv),e}function rv(){if(--vf===0&&to!==null){Dr!==null&&(Dr.status="fulfilled");var t=to;to=null,qr=0,Dr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function BR(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var av=X.S;X.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&zR(t,e),av!==null&&av(t,e)};var xs=Un(null);function Hm(){var t=xs.current;return t!==null?t:we.pooledCache}function Tc(t,e){e===null?Ce(xs,xs.current):Ce(xs,e.pool)}function PE(){var t=Hm();return t===null?null:{parent:$e._currentValue,pool:t}}var il=Error(L(460)),VE=Error(L(474)),Qu=Error(L(542)),_f={then:function(){}};function ov(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Jl(){}function UE(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Jl,Jl),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,cv(t),t;default:if(typeof e.status=="string")e.then(Jl,Jl);else{if(t=we,t!==null&&100<t.shellSuspendCounter)throw Error(L(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,cv(t),t}throw no=e,il}}var no=null;function lv(){if(no===null)throw Error(L(459));var t=no;return no=null,t}function cv(t){if(t===il||t===Qu)throw Error(L(483))}var Ri=!1;function Fm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ef(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Hi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=Gc(t),kE(t,null,n),e}return Yu(t,i,e,n),Gc(t)}function io(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,aE(t,n)}}function md(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Tf=!1;function so(){if(Tf){var t=Dr;if(t!==null)throw t}}function ro(t,e,n,i){Tf=!1;var s=t.updateQueue;Ri=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,a===null?r=h:a.next=h,a=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=c))}if(r!==null){var p=s.baseState;a=0,f=h=c=null,l=r;do{var m=l.lane&-536870913,v=m!==l.lane;if(v?(ue&m)===m:(i&m)===m){m!==0&&m===qr&&(Tf=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var w=t,I=l;m=e;var N=n;switch(I.tag){case 1:if(w=I.payload,typeof w=="function"){p=w.call(N,p,m);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=I.payload,m=typeof w=="function"?w.call(N,p,m):w,m==null)break e;p=Ne({},p,m);break e;case 2:Ri=!0}}m=l.callback,m!==null&&(t.flags|=64,v&&(t.flags|=8192),v=s.callbacks,v===null?s.callbacks=[m]:v.push(m))}else v={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=v,c=p):f=f.next=v,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=f,r===null&&(s.shared.lanes=0),es|=a,t.lanes=a,t.memoizedState=p}}function LE(t,e){if(typeof t!="function")throw Error(L(191,t));t.call(e)}function zE(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)LE(n[t],e)}var Hr=Un(null),Qc=Un(0);function uv(t,e){t=ui,Ce(Qc,t),Ce(Hr,e),ui=t|e.baseLanes}function bf(){Ce(Qc,ui),Ce(Hr,Hr.current)}function Gm(){ui=Qc.current,tt(Hr),tt(Qc)}var Zi=0,ne=null,_e=null,Fe=null,Wc=!1,xr=!1,Us=!1,Xc=0,No=0,kr=null,qR=0;function Ve(){throw Error(L(321))}function Km(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zt(t[n],e[n]))return!1;return!0}function $m(t,e,n,i,s,r){return Zi=r,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,X.H=t===null||t.memoizedState===null?yT:vT,Us=!1,r=n(i,s),Us=!1,xr&&(r=qE(e,n,i,s)),BE(t),r}function BE(t){X.H=Zc;var e=_e!==null&&_e.next!==null;if(Zi=0,Fe=_e=ne=null,Wc=!1,No=0,kr=null,e)throw Error(L(300));t===null||et||(t=t.dependencies,t!==null&&Yc(t)&&(et=!0))}function qE(t,e,n,i){ne=t;var s=0;do{if(xr&&(kr=null),No=0,xr=!1,25<=s)throw Error(L(301));if(s+=1,Fe=_e=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}X.H=QR,r=e(n,i)}while(xr);return r}function HR(){var t=X.H,e=t.useState()[0];return e=typeof e.then=="function"?sl(e):e,t=t.useState()[0],(_e!==null?_e.memoizedState:null)!==t&&(ne.flags|=1024),e}function Ym(){var t=Xc!==0;return Xc=0,t}function Qm(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Wm(t){if(Wc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Wc=!1}Zi=0,Fe=_e=ne=null,xr=!1,No=Xc=0,kr=null}function kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?ne.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Ke(){if(_e===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=_e.next;var e=Fe===null?ne.memoizedState:Fe.next;if(e!==null)Fe=e,_e=t;else{if(t===null)throw ne.alternate===null?Error(L(467)):Error(L(310));_e=t,t={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Fe===null?ne.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function Xm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sl(t){var e=No;return No+=1,kr===null&&(kr=[]),t=UE(kr,t,e),e=ne,(Fe===null?e.memoizedState:Fe.next)===null&&(e=e.alternate,X.H=e===null||e.memoizedState===null?yT:vT),t}function Wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return sl(t);if(t.$$typeof===Qn)return Tt(t)}throw Error(L(438,String(t)))}function Zm(t){var e=null,n=ne.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ne.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Xm(),ne.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=RN;return e.index++,n}function li(t,e){return typeof e=="function"?e(t):e}function bc(t){var e=Ke();return Jm(e,_e,t)}function Jm(t,e,n){var i=t.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=n;var s=t.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}e.baseQueue=s=r,i.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var l=a=null,c=null,h=e,f=!1;do{var p=h.lane&-536870913;if(p!==h.lane?(ue&p)===p:(Zi&p)===p){var m=h.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),p===qr&&(f=!0);else if((Zi&m)===m){h=h.next,m===qr&&(f=!0);continue}else p={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},c===null?(l=c=p,a=r):c=c.next=p,ne.lanes|=m,es|=m;p=h.action,Us&&n(r,p),r=h.hasEagerState?h.eagerState:n(r,p)}else m={lane:p,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},c===null?(l=c=m,a=r):c=c.next=m,ne.lanes|=p,es|=p;h=h.next}while(h!==null&&h!==e);if(c===null?a=r:c.next=l,!Zt(r,t.memoizedState)&&(et=!0,f&&(n=Dr,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=c,i.lastRenderedState=r}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function pd(t){var e=Ke(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=t(r,a.action),a=a.next;while(a!==s);Zt(r,e.memoizedState)||(et=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function HE(t,e,n){var i=ne,s=Ke(),r=fe;if(r){if(n===void 0)throw Error(L(407));n=n()}else n=e();var a=!Zt((_e||s).memoizedState,n);a&&(s.memoizedState=n,et=!0),s=s.queue;var l=KE.bind(null,i,s,t);if(rl(2048,8,l,[t]),s.getSnapshot!==e||a||Fe!==null&&Fe.memoizedState.tag&1){if(i.flags|=2048,Fr(9,Xu(),GE.bind(null,i,s,n,e),null),we===null)throw Error(L(349));r||Zi&124||FE(i,e,n)}return n}function FE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e=Xm(),ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function GE(t,e,n,i){e.value=n,e.getSnapshot=i,$E(e)&&YE(t)}function KE(t,e,n){return n(function(){$E(e)&&YE(t)})}function $E(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zt(t,n)}catch{return!0}}function YE(t){var e=oa(t,2);e!==null&&Wt(e,t,2)}function wf(t){var e=kt();if(typeof t=="function"){var n=t;if(t=n(),Us){Oi(!0);try{n()}finally{Oi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:t},e}function QE(t,e,n,i){return t.baseState=n,Jm(t,_e,typeof i=="function"?i:li)}function FR(t,e,n,i,s){if(Zu(t))throw Error(L(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};X.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,WE(e,r)):(r.next=n.next,e.pending=n.next=r)}}function WE(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var r=X.T,a={};X.T=a;try{var l=n(s,i),c=X.S;c!==null&&c(a,l),hv(t,e,l)}catch(h){Sf(t,e,h)}finally{X.T=r}}else try{r=n(s,i),hv(t,e,r)}catch(h){Sf(t,e,h)}}function hv(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){dv(t,e,i)},function(i){return Sf(t,e,i)}):dv(t,e,n)}function dv(t,e,n){e.status="fulfilled",e.value=n,XE(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,WE(t,n)))}function Sf(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,XE(e),e=e.next;while(e!==i)}t.action=null}function XE(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function ZE(t,e){return e}function fv(t,e){if(fe){var n=we.formState;if(n!==null){e:{var i=ne;if(fe){if(Oe){t:{for(var s=Oe,r=Rn;s.nodeType!==8;){if(!r){s=null;break t}if(s=pn(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Oe=pn(s.nextSibling),i=s.data==="F!";break e}}Ps(i)}i=!1}i&&(e=n[0])}}return n=kt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ZE,lastRenderedState:e},n.queue=i,n=mT.bind(null,ne,i),i.dispatch=n,i=wf(!1),r=ip.bind(null,ne,!1,i.queue),i=kt(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=FR.bind(null,ne,s,r,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function mv(t){var e=Ke();return JE(e,_e,t)}function JE(t,e,n){if(e=Jm(t,e,ZE)[0],t=bc(li)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=sl(e)}catch(a){throw a===il?Qu:a}else i=e;e=Ke();var s=e.queue,r=s.dispatch;return n!==e.memoizedState&&(ne.flags|=2048,Fr(9,Xu(),GR.bind(null,s,n),null)),[i,r,t]}function GR(t,e){t.action=e}function pv(t){var e=Ke(),n=_e;if(n!==null)return JE(e,n,t);Ke(),e=e.memoizedState,n=Ke();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Fr(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=ne.updateQueue,e===null&&(e=Xm(),ne.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Xu(){return{destroy:void 0,resource:void 0}}function eT(){return Ke().memoizedState}function wc(t,e,n,i){var s=kt();i=i===void 0?null:i,ne.flags|=t,s.memoizedState=Fr(1|e,Xu(),n,i)}function rl(t,e,n,i){var s=Ke();i=i===void 0?null:i;var r=s.memoizedState.inst;_e!==null&&i!==null&&Km(i,_e.memoizedState.deps)?s.memoizedState=Fr(e,r,n,i):(ne.flags|=t,s.memoizedState=Fr(1|e,r,n,i))}function gv(t,e){wc(8390656,8,t,e)}function tT(t,e){rl(2048,8,t,e)}function nT(t,e){return rl(4,2,t,e)}function iT(t,e){return rl(4,4,t,e)}function sT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rT(t,e,n){n=n!=null?n.concat([t]):null,rl(4,4,sT.bind(null,e,t),n)}function ep(){}function aT(t,e){var n=Ke();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Km(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function oT(t,e){var n=Ke();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Km(e,i[1]))return i[0];if(i=t(),Us){Oi(!0);try{t()}finally{Oi(!1)}}return n.memoizedState=[i,e],i}function tp(t,e,n){return n===void 0||Zi&1073741824?t.memoizedState=e:(t.memoizedState=n,t=XT(),ne.lanes|=t,es|=t,n)}function lT(t,e,n,i){return Zt(n,e)?n:Hr.current!==null?(t=tp(t,n,i),Zt(t,e)||(et=!0),t):Zi&42?(t=XT(),ne.lanes|=t,es|=t,e):(et=!0,t.memoizedState=n)}function cT(t,e,n,i,s){var r=me.p;me.p=r!==0&&8>r?r:8;var a=X.T,l={};X.T=l,ip(t,!1,e,n);try{var c=s(),h=X.S;if(h!==null&&h(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=BR(c,i);ao(t,e,f,Qt(t))}else ao(t,e,i,Qt(t))}catch(p){ao(t,e,{then:function(){},status:"rejected",reason:p},Qt())}finally{me.p=r,X.T=a}}function KR(){}function Af(t,e,n,i){if(t.tag!==5)throw Error(L(476));var s=uT(t).queue;cT(t,s,e,Rs,n===null?KR:function(){return hT(t),n(i)})}function uT(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Rs,baseState:Rs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:Rs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function hT(t){var e=uT(t).next.queue;ao(t,e,{},Qt())}function np(){return Tt(xo)}function dT(){return Ke().memoizedState}function fT(){return Ke().memoizedState}function $R(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Qt();t=qi(n);var i=Hi(e,t,n);i!==null&&(Wt(i,e,n),io(i,e,n)),e={cache:qm()},t.payload=e;return}e=e.return}}function YR(t,e,n){var i=Qt();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Zu(t)?pT(e,n):(n=Um(t,e,n,i),n!==null&&(Wt(n,t,i),gT(n,e,i)))}function mT(t,e,n){var i=Qt();ao(t,e,n,i)}function ao(t,e,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zu(t))pT(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,Zt(l,a))return Yu(t,e,s,0),we===null&&$u(),!1}catch{}finally{}if(n=Um(t,e,s,i),n!==null)return Wt(n,t,i),gT(n,e,i),!0}return!1}function ip(t,e,n,i){if(i={lane:2,revertLane:hp(),action:i,hasEagerState:!1,eagerState:null,next:null},Zu(t)){if(e)throw Error(L(479))}else e=Um(t,n,i,2),e!==null&&Wt(e,t,2)}function Zu(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function pT(t,e){xr=Wc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gT(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,aE(t,n)}}var Zc={readContext:Tt,use:Wu,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useLayoutEffect:Ve,useInsertionEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useSyncExternalStore:Ve,useId:Ve,useHostTransitionStatus:Ve,useFormState:Ve,useActionState:Ve,useOptimistic:Ve,useMemoCache:Ve,useCacheRefresh:Ve},yT={readContext:Tt,use:Wu,useCallback:function(t,e){return kt().memoizedState=[t,e===void 0?null:e],t},useContext:Tt,useEffect:gv,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,wc(4194308,4,sT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wc(4194308,4,t,e)},useInsertionEffect:function(t,e){wc(4,2,t,e)},useMemo:function(t,e){var n=kt();e=e===void 0?null:e;var i=t();if(Us){Oi(!0);try{t()}finally{Oi(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=kt();if(n!==void 0){var s=n(e);if(Us){Oi(!0);try{n(e)}finally{Oi(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=YR.bind(null,ne,t),[i.memoizedState,t]},useRef:function(t){var e=kt();return t={current:t},e.memoizedState=t},useState:function(t){t=wf(t);var e=t.queue,n=mT.bind(null,ne,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:ep,useDeferredValue:function(t,e){var n=kt();return tp(n,t,e)},useTransition:function(){var t=wf(!1);return t=cT.bind(null,ne,t.queue,!0,!1),kt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ne,s=kt();if(fe){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),we===null)throw Error(L(349));ue&124||FE(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,gv(KE.bind(null,i,r,t),[t]),i.flags|=2048,Fr(9,Xu(),GE.bind(null,i,r,n,e),null),n},useId:function(){var t=kt(),e=we.identifierPrefix;if(fe){var n=Xn,i=Wn;n=(i&~(1<<32-Yt(i)-1)).toString(32)+n,e="«"+e+"R"+n,n=Xc++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=qR++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:np,useFormState:fv,useActionState:fv,useOptimistic:function(t){var e=kt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=ip.bind(null,ne,!0,n),n.dispatch=e,[t,e]},useMemoCache:Zm,useCacheRefresh:function(){return kt().memoizedState=$R.bind(null,ne)}},vT={readContext:Tt,use:Wu,useCallback:aT,useContext:Tt,useEffect:tT,useImperativeHandle:rT,useInsertionEffect:nT,useLayoutEffect:iT,useMemo:oT,useReducer:bc,useRef:eT,useState:function(){return bc(li)},useDebugValue:ep,useDeferredValue:function(t,e){var n=Ke();return lT(n,_e.memoizedState,t,e)},useTransition:function(){var t=bc(li)[0],e=Ke().memoizedState;return[typeof t=="boolean"?t:sl(t),e]},useSyncExternalStore:HE,useId:dT,useHostTransitionStatus:np,useFormState:mv,useActionState:mv,useOptimistic:function(t,e){var n=Ke();return QE(n,_e,t,e)},useMemoCache:Zm,useCacheRefresh:fT},QR={readContext:Tt,use:Wu,useCallback:aT,useContext:Tt,useEffect:tT,useImperativeHandle:rT,useInsertionEffect:nT,useLayoutEffect:iT,useMemo:oT,useReducer:pd,useRef:eT,useState:function(){return pd(li)},useDebugValue:ep,useDeferredValue:function(t,e){var n=Ke();return _e===null?tp(n,t,e):lT(n,_e.memoizedState,t,e)},useTransition:function(){var t=pd(li)[0],e=Ke().memoizedState;return[typeof t=="boolean"?t:sl(t),e]},useSyncExternalStore:HE,useId:dT,useHostTransitionStatus:np,useFormState:pv,useActionState:pv,useOptimistic:function(t,e){var n=Ke();return _e!==null?QE(n,_e,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Zm,useCacheRefresh:fT},jr=null,Ro=0;function ec(t){var e=Ro;return Ro+=1,jr===null&&(jr=[]),UE(jr,t,e)}function Ma(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function tc(t,e){throw e.$$typeof===AN?Error(L(525)):(t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function yv(t){var e=t._init;return e(t._payload)}function _T(t){function e(y,_){if(t){var b=y.deletions;b===null?(y.deletions=[_],y.flags|=16):b.push(_)}}function n(y,_){if(!t)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function i(y){for(var _=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(y,_){return y=ii(y,_),y.index=0,y.sibling=null,y}function r(y,_,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<_?(y.flags|=67108866,_):b):(y.flags|=67108866,_)):(y.flags|=1048576,_)}function a(y){return t&&y.alternate===null&&(y.flags|=67108866),y}function l(y,_,b,x){return _===null||_.tag!==6?(_=dd(b,y.mode,x),_.return=y,_):(_=s(_,b),_.return=y,_)}function c(y,_,b,x){var P=b.type;return P===mr?f(y,_,b.props.children,x,b.key):_!==null&&(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ni&&yv(P)===_.type)?(_=s(_,b.props),Ma(_,b),_.return=y,_):(_=Ec(b.type,b.key,b.props,null,y.mode,x),Ma(_,b),_.return=y,_)}function h(y,_,b,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=fd(b,y.mode,x),_.return=y,_):(_=s(_,b.children||[]),_.return=y,_)}function f(y,_,b,x,P){return _===null||_.tag!==7?(_=Is(b,y.mode,x,P),_.return=y,_):(_=s(_,b),_.return=y,_)}function p(y,_,b){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=dd(""+_,y.mode,b),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $l:return b=Ec(_.type,_.key,_.props,null,y.mode,b),Ma(b,_),b.return=y,b;case Ba:return _=fd(_,y.mode,b),_.return=y,_;case Ni:var x=_._init;return _=x(_._payload),p(y,_,b)}if(qa(_)||Da(_))return _=Is(_,y.mode,b,null),_.return=y,_;if(typeof _.then=="function")return p(y,ec(_),b);if(_.$$typeof===Qn)return p(y,Zl(y,_),b);tc(y,_)}return null}function m(y,_,b,x){var P=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return P!==null?null:l(y,_,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $l:return b.key===P?c(y,_,b,x):null;case Ba:return b.key===P?h(y,_,b,x):null;case Ni:return P=b._init,b=P(b._payload),m(y,_,b,x)}if(qa(b)||Da(b))return P!==null?null:f(y,_,b,x,null);if(typeof b.then=="function")return m(y,_,ec(b),x);if(b.$$typeof===Qn)return m(y,_,Zl(y,b),x);tc(y,b)}return null}function v(y,_,b,x,P){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return y=y.get(b)||null,l(_,y,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $l:return y=y.get(x.key===null?b:x.key)||null,c(_,y,x,P);case Ba:return y=y.get(x.key===null?b:x.key)||null,h(_,y,x,P);case Ni:var V=x._init;return x=V(x._payload),v(y,_,b,x,P)}if(qa(x)||Da(x))return y=y.get(b)||null,f(_,y,x,P,null);if(typeof x.then=="function")return v(y,_,b,ec(x),P);if(x.$$typeof===Qn)return v(y,_,b,Zl(_,x),P);tc(_,x)}return null}function w(y,_,b,x){for(var P=null,V=null,S=_,T=_=0,R=null;S!==null&&T<b.length;T++){S.index>T?(R=S,S=null):R=S.sibling;var C=m(y,S,b[T],x);if(C===null){S===null&&(S=R);break}t&&S&&C.alternate===null&&e(y,S),_=r(C,_,T),V===null?P=C:V.sibling=C,V=C,S=R}if(T===b.length)return n(y,S),fe&&vs(y,T),P;if(S===null){for(;T<b.length;T++)S=p(y,b[T],x),S!==null&&(_=r(S,_,T),V===null?P=S:V.sibling=S,V=S);return fe&&vs(y,T),P}for(S=i(S);T<b.length;T++)R=v(S,y,T,b[T],x),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?T:R.key),_=r(R,_,T),V===null?P=R:V.sibling=R,V=R);return t&&S.forEach(function(D){return e(y,D)}),fe&&vs(y,T),P}function I(y,_,b,x){if(b==null)throw Error(L(151));for(var P=null,V=null,S=_,T=_=0,R=null,C=b.next();S!==null&&!C.done;T++,C=b.next()){S.index>T?(R=S,S=null):R=S.sibling;var D=m(y,S,C.value,x);if(D===null){S===null&&(S=R);break}t&&S&&D.alternate===null&&e(y,S),_=r(D,_,T),V===null?P=D:V.sibling=D,V=D,S=R}if(C.done)return n(y,S),fe&&vs(y,T),P;if(S===null){for(;!C.done;T++,C=b.next())C=p(y,C.value,x),C!==null&&(_=r(C,_,T),V===null?P=C:V.sibling=C,V=C);return fe&&vs(y,T),P}for(S=i(S);!C.done;T++,C=b.next())C=v(S,y,T,C.value,x),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),_=r(C,_,T),V===null?P=C:V.sibling=C,V=C);return t&&S.forEach(function(k){return e(y,k)}),fe&&vs(y,T),P}function N(y,_,b,x){if(typeof b=="object"&&b!==null&&b.type===mr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $l:e:{for(var P=b.key;_!==null;){if(_.key===P){if(P=b.type,P===mr){if(_.tag===7){n(y,_.sibling),x=s(_,b.props.children),x.return=y,y=x;break e}}else if(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ni&&yv(P)===_.type){n(y,_.sibling),x=s(_,b.props),Ma(x,b),x.return=y,y=x;break e}n(y,_);break}else e(y,_);_=_.sibling}b.type===mr?(x=Is(b.props.children,y.mode,x,b.key),x.return=y,y=x):(x=Ec(b.type,b.key,b.props,null,y.mode,x),Ma(x,b),x.return=y,y=x)}return a(y);case Ba:e:{for(P=b.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(y,_.sibling),x=s(_,b.children||[]),x.return=y,y=x;break e}else{n(y,_);break}else e(y,_);_=_.sibling}x=fd(b,y.mode,x),x.return=y,y=x}return a(y);case Ni:return P=b._init,b=P(b._payload),N(y,_,b,x)}if(qa(b))return w(y,_,b,x);if(Da(b)){if(P=Da(b),typeof P!="function")throw Error(L(150));return b=P.call(b),I(y,_,b,x)}if(typeof b.then=="function")return N(y,_,ec(b),x);if(b.$$typeof===Qn)return N(y,_,Zl(y,b),x);tc(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,_!==null&&_.tag===6?(n(y,_.sibling),x=s(_,b),x.return=y,y=x):(n(y,_),x=dd(b,y.mode,x),x.return=y,y=x),a(y)):n(y,_)}return function(y,_,b,x){try{Ro=0;var P=N(y,_,b,x);return jr=null,P}catch(S){if(S===il||S===Qu)throw S;var V=Gt(29,S,null,y.mode);return V.lanes=x,V.return=y,V}finally{}}}var Gr=_T(!0),ET=_T(!1),ln=Un(null),xn=null;function Ci(t){var e=t.alternate;Ce(Ye,Ye.current&1),Ce(ln,t),xn===null&&(e===null||Hr.current!==null||e.memoizedState!==null)&&(xn=t)}function TT(t){if(t.tag===22){if(Ce(Ye,Ye.current),Ce(ln,t),xn===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(xn=t)}}else Di()}function Di(){Ce(Ye,Ye.current),Ce(ln,ln.current)}function Jn(t){tt(ln),xn===t&&(xn=null),tt(Ye)}var Ye=Un(0);function Jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||qf(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function gd(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nf={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Qt(),s=qi(i);s.payload=e,n!=null&&(s.callback=n),e=Hi(t,s,i),e!==null&&(Wt(e,t,i),io(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Qt(),s=qi(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hi(t,s,i),e!==null&&(Wt(e,t,i),io(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),i=qi(n);i.tag=2,e!=null&&(i.callback=e),e=Hi(t,i,n),e!==null&&(Wt(e,t,n),io(e,t,n))}};function vv(t,e,n,i,s,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!So(n,i)||!So(s,r):!0}function _v(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Nf.enqueueReplaceState(e,e.state,null)}function Ls(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Ne({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}var eu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function bT(t){eu(t)}function wT(t){console.error(t)}function ST(t){eu(t)}function tu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function Ev(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Rf(t,e,n){return n=qi(n),n.tag=3,n.payload={element:null},n.callback=function(){tu(t,e)},n}function AT(t){return t=qi(t),t.tag=3,t}function NT(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;t.payload=function(){return s(r)},t.callback=function(){Ev(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Ev(e,n,i),typeof s!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function WR(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&tl(e,n,s,!0),n=ln.current,n!==null){switch(n.tag){case 13:return xn===null?Of():n.alternate===null&&Pe===0&&(Pe=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===_f?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Rd(t,i,s)),!1;case 22:return n.flags|=65536,i===_f?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Rd(t,i,s)),!1}throw Error(L(435,n.tag))}return Rd(t,i,s),Of(),!1}if(fe)return e=ln.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==mf&&(t=Error(L(422),{cause:i}),Ao(rn(t,n)))):(i!==mf&&(e=Error(L(423),{cause:i}),Ao(rn(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=rn(i,n),s=Rf(t.stateNode,i,s),md(t,s),Pe!==4&&(Pe=2)),!1;var r=Error(L(520),{cause:i});if(r=rn(r,n),co===null?co=[r]:co.push(r),Pe!==4&&(Pe=2),e===null)return!0;i=rn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=Rf(n.stateNode,i,t),md(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Fi===null||!Fi.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=AT(s),NT(s,t,n,i),md(n,s),!1}n=n.return}while(n!==null);return!1}var RT=Error(L(461)),et=!1;function st(t,e,n,i){e.child=t===null?ET(e,null,n,i):Gr(e,t.child,n,i)}function Tv(t,e,n,i,s){n=n.render;var r=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Vs(e),i=$m(t,e,n,a,r,s),l=Ym(),t!==null&&!et?(Qm(t,e,s),ci(t,e,s)):(fe&&l&&zm(e),e.flags|=1,st(t,e,i,s),e.child)}function bv(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!Lm(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,IT(t,e,r,i,s)):(t=Ec(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!sp(t,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:So,n(a,i)&&t.ref===e.ref)return ci(t,e,s)}return e.flags|=1,t=ii(r,i),t.ref=e.ref,t.return=e,e.child=t}function IT(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(So(r,i)&&t.ref===e.ref)if(et=!1,e.pendingProps=i=r,sp(t,s))t.flags&131072&&(et=!0);else return e.lanes=t.lanes,ci(t,e,s)}return If(t,e,n,i,s)}function CT(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;e.childLanes=r&~i}else e.childLanes=0,e.child=null;return wv(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Tc(e,r!==null?r.cachePool:null),r!==null?uv(e,r):bf(),TT(e);else return e.lanes=e.childLanes=536870912,wv(t,e,r!==null?r.baseLanes|n:n,n)}else r!==null?(Tc(e,r.cachePool),uv(e,r),Di(),e.memoizedState=null):(t!==null&&Tc(e,null),bf(),Di());return st(t,e,s,n),e.child}function wv(t,e,n,i){var s=Hm();return s=s===null?null:{parent:$e._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Tc(e,null),bf(),TT(e),t!==null&&tl(t,e,i,!0),null}function Sc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(L(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function If(t,e,n,i,s){return Vs(e),n=$m(t,e,n,i,void 0,s),i=Ym(),t!==null&&!et?(Qm(t,e,s),ci(t,e,s)):(fe&&i&&zm(e),e.flags|=1,st(t,e,n,s),e.child)}function Sv(t,e,n,i,s,r){return Vs(e),e.updateQueue=null,n=qE(e,i,n,s),BE(t),i=Ym(),t!==null&&!et?(Qm(t,e,r),ci(t,e,r)):(fe&&i&&zm(e),e.flags|=1,st(t,e,n,r),e.child)}function Av(t,e,n,i,s){if(Vs(e),e.stateNode===null){var r=br,a=n.contextType;typeof a=="object"&&a!==null&&(r=Tt(a)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Nf,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},Fm(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?Tt(a):br,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(gd(e,n,a,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Nf.enqueueReplaceState(r,r.state,null),ro(e,i,r,s),so(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,c=Ls(n,l);r.props=c;var h=r.context,f=n.contextType;a=br,typeof f=="object"&&f!==null&&(a=Tt(f));var p=n.getDerivedStateFromProps;f=typeof p=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,f||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||h!==a)&&_v(e,r,i,a),Ri=!1;var m=e.memoizedState;r.state=m,ro(e,i,r,s),so(),h=e.memoizedState,l||m!==h||Ri?(typeof p=="function"&&(gd(e,n,p,i),h=e.memoizedState),(c=Ri||vv(e,n,c,i,m,h,a))?(f||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),r.props=i,r.state=h,r.context=a,i=c):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,Ef(t,e),a=e.memoizedProps,f=Ls(n,a),r.props=f,p=e.pendingProps,m=r.context,h=n.contextType,c=br,typeof h=="object"&&h!==null&&(c=Tt(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==p||m!==c)&&_v(e,r,i,c),Ri=!1,m=e.memoizedState,r.state=m,ro(e,i,r,s),so();var v=e.memoizedState;a!==p||m!==v||Ri||t!==null&&t.dependencies!==null&&Yc(t.dependencies)?(typeof l=="function"&&(gd(e,n,l,i),v=e.memoizedState),(f=Ri||vv(e,n,f,i,m,v,c)||t!==null&&t.dependencies!==null&&Yc(t.dependencies))?(h||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,v,c),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,v,c)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),r.props=i,r.state=v,r.context=c,i=f):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,Sc(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=Gr(e,t.child,null,s),e.child=Gr(e,null,n,s)):st(t,e,n,s),e.memoizedState=r.state,t=e.child):t=ci(t,e,s),t}function Nv(t,e,n,i){return el(),e.flags|=256,st(t,e,n,i),e.child}var yd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vd(t){return{baseLanes:t,cachePool:PE()}}function _d(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=an),t}function DT(t,e,n){var i=e.pendingProps,s=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(Ye.current&2)!==0),a&&(s=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(fe){if(s?Ci(e):Di(),fe){var l=Oe,c;if(c=l){e:{for(c=l,l=Rn;c.nodeType!==8;){if(!l){l=null;break e}if(c=pn(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(e.memoizedState={dehydrated:l,treeContext:Cs!==null?{id:Wn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},c=Gt(18,null,null,0),c.stateNode=l,c.return=e,e.child=c,Rt=e,Oe=null,c=!0):c=!1}c||Ps(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return qf(l)?e.lanes=32:e.lanes=536870912,null;Jn(e)}return l=i.children,i=i.fallback,s?(Di(),s=e.mode,l=nu({mode:"hidden",children:l},s),i=Is(i,s,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,s=e.child,s.memoizedState=vd(n),s.childLanes=_d(t,a,n),e.memoizedState=yd,i):(Ci(e),Cf(e,l))}if(c=t.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(r)e.flags&256?(Ci(e),e.flags&=-257,e=Ed(t,e,n)):e.memoizedState!==null?(Di(),e.child=t.child,e.flags|=128,e=null):(Di(),s=i.fallback,l=e.mode,i=nu({mode:"visible",children:i.children},l),s=Is(s,l,n,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,Gr(e,t.child,null,n),i=e.child,i.memoizedState=vd(n),i.childLanes=_d(t,a,n),e.memoizedState=yd,e=s);else if(Ci(e),qf(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(L(419)),i.stack="",i.digest=a,Ao({value:i,source:null,stack:null}),e=Ed(t,e,n)}else if(et||tl(t,e,n,!1),a=(n&t.childLanes)!==0,et||a){if(a=we,a!==null&&(i=n&-n,i=i&42?1:Im(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==c.retryLane))throw c.retryLane=i,oa(t,i),Wt(a,t,i),RT;l.data==="$?"||Of(),e=Ed(t,e,n)}else l.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Oe=pn(l.nextSibling),Rt=e,fe=!0,Ds=null,Rn=!1,t!==null&&(tn[nn++]=Wn,tn[nn++]=Xn,tn[nn++]=Cs,Wn=t.id,Xn=t.overflow,Cs=e),e=Cf(e,i.children),e.flags|=4096);return e}return s?(Di(),s=i.fallback,l=e.mode,c=t.child,h=c.sibling,i=ii(c,{mode:"hidden",children:i.children}),i.subtreeFlags=c.subtreeFlags&65011712,h!==null?s=ii(h,s):(s=Is(s,l,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=t.child.memoizedState,l===null?l=vd(n):(c=l.cachePool,c!==null?(h=$e._currentValue,c=c.parent!==h?{parent:h,pool:h}:c):c=PE(),l={baseLanes:l.baseLanes|n,cachePool:c}),s.memoizedState=l,s.childLanes=_d(t,a,n),e.memoizedState=yd,i):(Ci(e),n=t.child,t=n.sibling,n=ii(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Cf(t,e){return e=nu({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function nu(t,e){return t=Gt(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Ed(t,e,n){return Gr(e,t.child,null,n),t=Cf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),gf(t.return,e,n)}function Td(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function xT(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(st(t,e,i.children,n),i=Ye.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rv(t,n,e);else if(t.tag===19)Rv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(Ce(Ye,i),s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Td(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Td(e,!0,n,null,r);break;case"together":Td(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ci(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),es|=e.lanes,!(n&e.childLanes))if(t!==null){if(tl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Yc(t)))}function XR(t,e,n){switch(e.tag){case 3:zc(e,e.stateNode.containerInfo),Ii(e,$e,t.memoizedState.cache),el();break;case 27:case 5:sf(e);break;case 4:zc(e,e.stateNode.containerInfo);break;case 10:Ii(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Ci(e),e.flags|=128,null):n&e.child.childLanes?DT(t,e,n):(Ci(e),t=ci(t,e,n),t!==null?t.sibling:null);Ci(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(tl(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return xT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Ye,Ye.current),i)break;return null;case 22:case 23:return e.lanes=0,CT(t,e,n);case 24:Ii(e,$e,t.memoizedState.cache)}return ci(t,e,n)}function kT(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)et=!0;else{if(!sp(t,n)&&!(e.flags&128))return et=!1,XR(t,e,n);et=!!(t.flags&131072)}else et=!1,fe&&e.flags&1048576&&ME(e,$c,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,s=i._init;if(i=s(i._payload),e.type=i,typeof i=="function")Lm(i)?(t=Ls(i,t),e.tag=1,e=Av(null,e,i,t,n)):(e.tag=0,e=If(null,e,i,t,n));else{if(i!=null){if(s=i.$$typeof,s===Am){e.tag=11,e=Tv(null,e,i,t,n);break e}else if(s===Nm){e.tag=14,e=bv(null,e,i,t,n);break e}}throw e=tf(i)||i,Error(L(306,e,""))}}return e;case 0:return If(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=Ls(i,e.pendingProps),Av(t,e,i,s,n);case 3:e:{if(zc(e,e.stateNode.containerInfo),t===null)throw Error(L(387));i=e.pendingProps;var r=e.memoizedState;s=r.element,Ef(t,e),ro(e,i,null,n);var a=e.memoizedState;if(i=a.cache,Ii(e,$e,i),i!==r.cache&&yf(e,[$e],n,!0),so(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=Nv(t,e,i,n);break e}else if(i!==s){s=rn(Error(L(424)),e),Ao(s),e=Nv(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Oe=pn(t.firstChild),Rt=e,fe=!0,Ds=null,Rn=!0,n=ET(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(el(),i===s){e=ci(t,e,n);break e}st(t,e,i,n)}e=e.child}return e;case 26:return Sc(t,e),t===null?(n=Fv(e.type,null,e.pendingProps,null))?e.memoizedState=n:fe||(n=e.type,t=e.pendingProps,i=cu(Bi.current).createElement(n),i[Et]=e,i[Vt]=t,ct(i,n,t),Je(i),e.stateNode=i):e.memoizedState=Fv(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return sf(e),t===null&&fe&&(i=e.stateNode=vb(e.type,e.pendingProps,Bi.current),Rt=e,Rn=!0,s=Oe,rs(e.type)?(Hf=s,Oe=pn(i.firstChild)):Oe=s),st(t,e,e.pendingProps.children,n),Sc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&fe&&((s=i=Oe)&&(i=AI(i,e.type,e.pendingProps,Rn),i!==null?(e.stateNode=i,Rt=e,Oe=pn(i.firstChild),Rn=!1,s=!0):s=!1),s||Ps(e)),sf(e),s=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,i=r.children,zf(s,r)?i=null:a!==null&&zf(s,a)&&(e.flags|=32),e.memoizedState!==null&&(s=$m(t,e,HR,null,null,n),xo._currentValue=s),Sc(t,e),st(t,e,i,n),e.child;case 6:return t===null&&fe&&((t=n=Oe)&&(n=NI(n,e.pendingProps,Rn),n!==null?(e.stateNode=n,Rt=e,Oe=null,t=!0):t=!1),t||Ps(e)),null;case 13:return DT(t,e,n);case 4:return zc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Gr(e,null,i,n):st(t,e,i,n),e.child;case 11:return Tv(t,e,e.type,e.pendingProps,n);case 7:return st(t,e,e.pendingProps,n),e.child;case 8:return st(t,e,e.pendingProps.children,n),e.child;case 12:return st(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Ii(e,e.type,i.value),st(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,Vs(e),s=Tt(s),i=i(s),e.flags|=1,st(t,e,i,n),e.child;case 14:return bv(t,e,e.type,e.pendingProps,n);case 15:return IT(t,e,e.type,e.pendingProps,n);case 19:return xT(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=nu(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=ii(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return CT(t,e,n);case 24:return Vs(e),i=Tt($e),t===null?(s=Hm(),s===null&&(s=we,r=qm(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:i,cache:s},Fm(e),Ii(e,$e,s)):(t.lanes&n&&(Ef(t,e),ro(e,null,null,n),so()),s=t.memoizedState,r=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Ii(e,$e,i)):(i=r.cache,Ii(e,$e,i),i!==s.cache&&yf(e,[$e],n,!0))),st(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(L(156,e.tag))}function Gn(t){t.flags|=4}function Iv(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Tb(e)){if(e=ln.current,e!==null&&((ue&4194048)===ue?xn!==null:(ue&62914560)!==ue&&!(ue&536870912)||e!==xn))throw no=_f,VE;t.flags|=8192}}function nc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?sE():536870912,t.lanes|=e,Kr|=e)}function Oa(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function De(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function ZR(t,e,n){var i=e.pendingProps;switch(Bm(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return De(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),si($e),Lr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ja(e)?Gn(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sv())),De(e),null;case 26:return n=e.memoizedState,t===null?(Gn(e),n!==null?(De(e),Iv(e,n)):(De(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Gn(e),De(e),Iv(e,n)):(De(e),e.flags&=-16777217):(t.memoizedProps!==i&&Gn(e),De(e),e.flags&=-16777217),null;case 27:Bc(e),n=Bi.current;var s=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Gn(e);else{if(!i){if(e.stateNode===null)throw Error(L(166));return De(e),null}t=Cn.current,ja(e)?nv(e):(t=vb(s,i,n),e.stateNode=t,Gn(e))}return De(e),null;case 5:if(Bc(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Gn(e);else{if(!i){if(e.stateNode===null)throw Error(L(166));return De(e),null}if(t=Cn.current,ja(e))nv(e);else{switch(s=cu(Bi.current),t){case 1:t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}t[Et]=e,t[Vt]=i;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=t;e:switch(ct(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Gn(e)}}return De(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Gn(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(L(166));if(t=Bi.current,ja(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=Rt,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[Et]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||pb(t.nodeValue,n)),t||Ps(e)}else t=cu(t).createTextNode(i),t[Et]=e,e.stateNode=t}return De(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=ja(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(L(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[Et]=e}else el(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),s=!1}else s=sv(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(Jn(e),e):(Jn(e),null)}if(Jn(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),nc(e,e.updateQueue),De(e),null;case 4:return Lr(),t===null&&dp(e.stateNode.containerInfo),De(e),null;case 10:return si(e.type),De(e),null;case 19:if(tt(Ye),s=e.memoizedState,s===null)return De(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)Oa(s,!1);else{if(Pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=Jc(t),r!==null){for(e.flags|=128,Oa(s,!1),t=r.updateQueue,e.updateQueue=t,nc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)jE(n,t),n=n.sibling;return Ce(Ye,Ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&Dn()>su&&(e.flags|=128,i=!0,Oa(s,!1),e.lanes=4194304)}else{if(!i)if(t=Jc(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,nc(e,t),Oa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!fe)return De(e),null}else 2*Dn()-s.renderingStartTime>su&&n!==536870912&&(e.flags|=128,i=!0,Oa(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dn(),e.sibling=null,t=Ye.current,Ce(Ye,i?t&1|2:t&1),e):(De(e),null);case 22:case 23:return Jn(e),Gm(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),n=e.updateQueue,n!==null&&nc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&tt(xs),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),si($e),De(e),null;case 25:return null;case 30:return null}throw Error(L(156,e.tag))}function JR(t,e){switch(Bm(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return si($e),Lr(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Bc(e),null;case 13:if(Jn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));el()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(Ye),null;case 4:return Lr(),null;case 10:return si(e.type),null;case 22:case 23:return Jn(e),Gm(),t!==null&&tt(xs),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return si($e),null;case 25:return null;default:return null}}function jT(t,e){switch(Bm(e),e.tag){case 3:si($e),Lr();break;case 26:case 27:case 5:Bc(e);break;case 4:Lr();break;case 13:Jn(e);break;case 19:tt(Ye);break;case 10:si(e.type);break;case 22:case 23:Jn(e),Gm(),t!==null&&tt(xs);break;case 24:si($e)}}function al(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){be(e,e.return,l)}}function Ji(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=e;var c=n,h=l;try{h()}catch(f){be(s,c,f)}}}i=i.next}while(i!==r)}}catch(f){be(e,e.return,f)}}function MT(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{zE(e,n)}catch(i){be(t,t.return,i)}}}function OT(t,e,n){n.props=Ls(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){be(t,e,i)}}function oo(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(s){be(t,e,s)}}function In(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){be(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){be(t,e,s)}else n.current=null}function PT(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){be(t,t.return,s)}}function bd(t,e,n){try{var i=t.stateNode;EI(i,t.type,n,e),i[Vt]=e}catch(s){be(t,t.return,s)}}function VT(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&rs(t.type)||t.tag===4}function wd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||VT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&rs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Df(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nh));else if(i!==4&&(i===27&&rs(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Df(t,e,n),t=t.sibling;t!==null;)Df(t,e,n),t=t.sibling}function iu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&rs(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(iu(t,e,n),t=t.sibling;t!==null;)iu(t,e,n),t=t.sibling}function UT(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);ct(e,i,n),e[Et]=t,e[Vt]=n}catch(r){be(t,t.return,r)}}var $n=!1,Ue=!1,Sd=!1,Cv=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function eI(t,e){if(t=t.containerInfo,Uf=fu,t=AE(t),Pm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,h=0,f=0,p=t,m=null;t:for(;;){for(var v;p!==n||s!==0&&p.nodeType!==3||(l=a+s),p!==r||i!==0&&p.nodeType!==3||(c=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===t)break t;if(m===n&&++h===s&&(l=a),m===r&&++f===i&&(c=a),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lf={focusedElem:t,selectionRange:n},fu=!1,Ze=e;Ze!==null;)if(e=Ze,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Ze=t;else for(;Ze!==null;){switch(e=Ze,r=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var w=Ls(n.type,s,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(w,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(I){be(n,n.return,I)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Bf(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Bf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(L(163))}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}}function LT(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:bi(t,n),i&4&&al(5,n);break;case 1:if(bi(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){be(n,n.return,a)}else{var s=Ls(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){be(n,n.return,a)}}i&64&&MT(n),i&512&&oo(n,n.return);break;case 3:if(bi(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{zE(t,e)}catch(a){be(n,n.return,a)}}break;case 27:e===null&&i&4&&UT(n);case 26:case 5:bi(t,n),e===null&&i&4&&PT(n),i&512&&oo(n,n.return);break;case 12:bi(t,n);break;case 13:bi(t,n),i&4&&qT(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=cI.bind(null,n),RI(t,n))));break;case 22:if(i=n.memoizedState!==null||$n,!i){e=e!==null&&e.memoizedState!==null||Ue,s=$n;var r=Ue;$n=i,(Ue=e)&&!r?Ai(t,n,(n.subtreeFlags&8772)!==0):bi(t,n),$n=s,Ue=r}break;case 30:break;default:bi(t,n)}}function zT(t){var e=t.alternate;e!==null&&(t.alternate=null,zT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Dm(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Re=null,jt=!1;function Kn(t,e,n){for(n=n.child;n!==null;)BT(t,e,n),n=n.sibling}function BT(t,e,n){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Qo,n)}catch{}switch(n.tag){case 26:Ue||In(n,e),Kn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ue||In(n,e);var i=Re,s=jt;rs(n.type)&&(Re=n.stateNode,jt=!1),Kn(t,e,n),ho(n.stateNode),Re=i,jt=s;break;case 5:Ue||In(n,e);case 6:if(i=Re,s=jt,Re=null,Kn(t,e,n),Re=i,jt=s,Re!==null)if(jt)try{(Re.nodeType===9?Re.body:Re.nodeName==="HTML"?Re.ownerDocument.body:Re).removeChild(n.stateNode)}catch(r){be(n,e,r)}else try{Re.removeChild(n.stateNode)}catch(r){be(n,e,r)}break;case 18:Re!==null&&(jt?(t=Re,Bv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Mo(t)):Bv(Re,n.stateNode));break;case 4:i=Re,s=jt,Re=n.stateNode.containerInfo,jt=!0,Kn(t,e,n),Re=i,jt=s;break;case 0:case 11:case 14:case 15:Ue||Ji(2,n,e),Ue||Ji(4,n,e),Kn(t,e,n);break;case 1:Ue||(In(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&OT(n,e,i)),Kn(t,e,n);break;case 21:Kn(t,e,n);break;case 22:Ue=(i=Ue)||n.memoizedState!==null,Kn(t,e,n),Ue=i;break;default:Kn(t,e,n)}}function qT(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Mo(t)}catch(n){be(e,e.return,n)}}function tI(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Cv),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Cv),e;default:throw Error(L(435,t.tag))}}function Ad(t,e){var n=tI(t);e.forEach(function(i){var s=uI.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}function zt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(rs(l.type)){Re=l.stateNode,jt=!1;break e}break;case 5:Re=l.stateNode,jt=!1;break e;case 3:case 4:Re=l.stateNode.containerInfo,jt=!0;break e}l=l.return}if(Re===null)throw Error(L(160));BT(r,a,s),Re=null,jt=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)HT(e,t),e=e.sibling}var fn=null;function HT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zt(e,t),Bt(t),i&4&&(Ji(3,t,t.return),al(3,t),Ji(5,t,t.return));break;case 1:zt(e,t),Bt(t),i&512&&(Ue||n===null||In(n,n.return)),i&64&&$n&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=fn;if(zt(e,t),Bt(t),i&512&&(Ue||n===null||In(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[Zo]||r[Et]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),ct(r,i,n),r[Et]=t,Je(r),i=r;break e;case"link":var a=Kv("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}r=s.createElement(i),ct(r,i,n),s.head.appendChild(r);break;case"meta":if(a=Kv("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}r=s.createElement(i),ct(r,i,n),s.head.appendChild(r);break;default:throw Error(L(468,i))}r[Et]=t,Je(r),i=r}t.stateNode=i}else $v(s,t.type,t.stateNode);else t.stateNode=Gv(s,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?$v(s,t.type,t.stateNode):Gv(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&bd(t,t.memoizedProps,n.memoizedProps)}break;case 27:zt(e,t),Bt(t),i&512&&(Ue||n===null||In(n,n.return)),n!==null&&i&4&&bd(t,t.memoizedProps,n.memoizedProps);break;case 5:if(zt(e,t),Bt(t),i&512&&(Ue||n===null||In(n,n.return)),t.flags&32){s=t.stateNode;try{Br(s,"")}catch(v){be(t,t.return,v)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,bd(t,s,n!==null?n.memoizedProps:s)),i&1024&&(Sd=!0);break;case 6:if(zt(e,t),Bt(t),i&4){if(t.stateNode===null)throw Error(L(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(v){be(t,t.return,v)}}break;case 3:if(Rc=null,s=fn,fn=uu(e.containerInfo),zt(e,t),fn=s,Bt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Mo(e.containerInfo)}catch(v){be(t,t.return,v)}Sd&&(Sd=!1,FT(t));break;case 4:i=fn,fn=uu(t.stateNode.containerInfo),zt(e,t),Bt(t),fn=i;break;case 12:zt(e,t),Bt(t);break;case 13:zt(e,t),Bt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(cp=Dn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Ad(t,i)));break;case 22:s=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,h=$n,f=Ue;if($n=h||s,Ue=f||c,zt(e,t),Ue=f,$n=h,Bt(t),i&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||c||$n||Ue||_s(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(r=c.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var p=c.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(v){be(c,c.return,v)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(v){be(c,c.return,v)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Ad(t,n))));break;case 19:zt(e,t),Bt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Ad(t,i)));break;case 30:break;case 21:break;default:zt(e,t),Bt(t)}}function Bt(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(VT(i)){n=i;break}i=i.return}if(n==null)throw Error(L(160));switch(n.tag){case 27:var s=n.stateNode,r=wd(t);iu(t,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(Br(a,""),n.flags&=-33);var l=wd(t);iu(t,l,a);break;case 3:case 4:var c=n.stateNode.containerInfo,h=wd(t);Df(t,h,c);break;default:throw Error(L(161))}}catch(f){be(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FT(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;FT(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function bi(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)LT(t,e.alternate,e),e=e.sibling}function _s(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ji(4,e,e.return),_s(e);break;case 1:In(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&OT(e,e.return,n),_s(e);break;case 27:ho(e.stateNode);case 26:case 5:In(e,e.return),_s(e);break;case 22:e.memoizedState===null&&_s(e);break;case 30:_s(e);break;default:_s(e)}t=t.sibling}}function Ai(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:Ai(s,r,n),al(4,r);break;case 1:if(Ai(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){be(i,i.return,h)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var c=s.shared.hiddenCallbacks;if(c!==null)for(s.shared.hiddenCallbacks=null,s=0;s<c.length;s++)LE(c[s],l)}catch(h){be(i,i.return,h)}}n&&a&64&&MT(r),oo(r,r.return);break;case 27:UT(r);case 26:case 5:Ai(s,r,n),n&&i===null&&a&4&&PT(r),oo(r,r.return);break;case 12:Ai(s,r,n);break;case 13:Ai(s,r,n),n&&a&4&&qT(s,r);break;case 22:r.memoizedState===null&&Ai(s,r,n),oo(r,r.return);break;case 30:break;default:Ai(s,r,n)}e=e.sibling}}function rp(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&nl(n))}function ap(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&nl(t))}function An(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)GT(t,e,n,i),e=e.sibling}function GT(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:An(t,e,n,i),s&2048&&al(9,e);break;case 1:An(t,e,n,i);break;case 3:An(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&nl(t)));break;case 12:if(s&2048){An(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){be(e,e.return,c)}}else An(t,e,n,i);break;case 13:An(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?An(t,e,n,i):lo(t,e):r._visibility&2?An(t,e,n,i):(r._visibility|=2,cr(t,e,n,i,(e.subtreeFlags&10256)!==0)),s&2048&&rp(a,e);break;case 24:An(t,e,n,i),s&2048&&ap(e.alternate,e);break;default:An(t,e,n,i)}}function cr(t,e,n,i,s){for(s=s&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var r=t,a=e,l=n,c=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:cr(r,a,l,c,s),al(8,a);break;case 23:break;case 22:var f=a.stateNode;a.memoizedState!==null?f._visibility&2?cr(r,a,l,c,s):lo(r,a):(f._visibility|=2,cr(r,a,l,c,s)),s&&h&2048&&rp(a.alternate,a);break;case 24:cr(r,a,l,c,s),s&&h&2048&&ap(a.alternate,a);break;default:cr(r,a,l,c,s)}e=e.sibling}}function lo(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:lo(n,i),s&2048&&rp(i.alternate,i);break;case 24:lo(n,i),s&2048&&ap(i.alternate,i);break;default:lo(n,i)}e=e.sibling}}var Fa=8192;function rr(t){if(t.subtreeFlags&Fa)for(t=t.child;t!==null;)KT(t),t=t.sibling}function KT(t){switch(t.tag){case 26:rr(t),t.flags&Fa&&t.memoizedState!==null&&zI(fn,t.memoizedState,t.memoizedProps);break;case 5:rr(t);break;case 3:case 4:var e=fn;fn=uu(t.stateNode.containerInfo),rr(t),fn=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Fa,Fa=16777216,rr(t),Fa=e):rr(t));break;default:rr(t)}}function $T(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Pa(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Ze=i,QT(i,t)}$T(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)YT(t),t=t.sibling}function YT(t){switch(t.tag){case 0:case 11:case 15:Pa(t),t.flags&2048&&Ji(9,t,t.return);break;case 3:Pa(t);break;case 12:Pa(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Ac(t)):Pa(t);break;default:Pa(t)}}function Ac(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Ze=i,QT(i,t)}$T(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ji(8,e,e.return),Ac(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Ac(e));break;default:Ac(e)}t=t.sibling}}function QT(t,e){for(;Ze!==null;){var n=Ze;switch(n.tag){case 0:case 11:case 15:Ji(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:nl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Ze=i;else e:for(n=t;Ze!==null;){i=Ze;var s=i.sibling,r=i.return;if(zT(i),i===n){Ze=null;break e}if(s!==null){s.return=r,Ze=s;break e}Ze=r}}}var nI={getCacheForType:function(t){var e=Tt($e),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},iI=typeof WeakMap=="function"?WeakMap:Map,ge=0,we=null,ae=null,ue=0,pe=0,qt=null,Vi=!1,la=!1,op=!1,ui=0,Pe=0,es=0,ks=0,lp=0,an=0,Kr=0,co=null,Mt=null,xf=!1,cp=0,su=1/0,ru=null,Fi=null,ot=0,Gi=null,$r=null,Mr=0,kf=0,jf=null,WT=null,uo=0,Mf=null;function Qt(){if(ge&2&&ue!==0)return ue&-ue;if(X.T!==null){var t=qr;return t!==0?t:hp()}return oE()}function XT(){an===0&&(an=!(ue&536870912)||fe?iE():536870912);var t=ln.current;return t!==null&&(t.flags|=32),an}function Wt(t,e,n){(t===we&&(pe===2||pe===9)||t.cancelPendingCommit!==null)&&(Yr(t,0),Ui(t,ue,an,!1)),Xo(t,n),(!(ge&2)||t!==we)&&(t===we&&(!(ge&2)&&(ks|=n),Pe===4&&Ui(t,ue,an,!1)),Ln(t))}function ZT(t,e,n){if(ge&6)throw Error(L(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||Wo(t,e),s=i?aI(t,e):Nd(t,e,!0),r=i;do{if(s===0){la&&!i&&Ui(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!sI(n)){s=Nd(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;s=co;var c=l.current.memoizedState.isDehydrated;if(c&&(Yr(l,a).flags|=256),a=Nd(l,a,!1),a!==2){if(op&&!c){l.errorRecoveryDisabledLanes|=r,ks|=r,s=4;break e}r=Mt,Mt=s,r!==null&&(Mt===null?Mt=r:Mt.push.apply(Mt,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){Yr(t,0),Ui(t,e,0,!0);break}e:{switch(i=t,r=s,r){case 0:case 1:throw Error(L(345));case 4:if((e&4194048)!==e)break;case 6:Ui(i,e,an,!Vi);break e;case 2:Mt=null;break;case 3:case 5:break;default:throw Error(L(329))}if((e&62914560)===e&&(s=cp+300-Dn(),10<s)){if(Ui(i,e,an,!Vi),Hu(i,0,!0)!==0)break e;i.timeoutHandle=yb(Dv.bind(null,i,n,Mt,ru,xf,e,an,ks,Kr,Vi,r,2,-0,0),s);break e}Dv(i,n,Mt,ru,xf,e,an,ks,Kr,Vi,r,0,-0,0)}}break}while(!0);Ln(t)}function Dv(t,e,n,i,s,r,a,l,c,h,f,p,m,v){if(t.timeoutHandle=-1,p=e.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(Do={stylesheets:null,count:0,unsuspend:LI},KT(e),p=BI(),p!==null)){t.cancelPendingCommit=p(kv.bind(null,t,e,r,n,i,s,a,l,c,f,1,m,v)),Ui(t,r,a,!h);return}kv(t,e,r,n,i,s,a,l,c)}function sI(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Zt(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ui(t,e,n,i){e&=~lp,e&=~ks,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var r=31-Yt(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&rE(t,n,e)}function Ju(){return ge&6?!0:(ol(0),!1)}function up(){if(ae!==null){if(pe===0)var t=ae.return;else t=ae,Zn=Ws=null,Wm(t),jr=null,Ro=0,t=ae;for(;t!==null;)jT(t.alternate,t),t=t.return;ae=null}}function Yr(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,bI(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),up(),we=t,ae=n=ii(t.current,null),ue=e,pe=0,qt=null,Vi=!1,la=Wo(t,e),op=!1,Kr=an=lp=ks=es=Pe=0,Mt=co=null,xf=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-Yt(i),r=1<<s;e|=t[s],i&=~r}return ui=e,$u(),n}function JT(t,e){ne=null,X.H=Zc,e===il||e===Qu?(e=lv(),pe=3):e===VE?(e=lv(),pe=4):pe=e===RT?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,qt=e,ae===null&&(Pe=1,tu(t,rn(e,t.current)))}function eb(){var t=X.H;return X.H=Zc,t===null?Zc:t}function tb(){var t=X.A;return X.A=nI,t}function Of(){Pe=4,Vi||(ue&4194048)!==ue&&ln.current!==null||(la=!0),!(es&134217727)&&!(ks&134217727)||we===null||Ui(we,ue,an,!1)}function Nd(t,e,n){var i=ge;ge|=2;var s=eb(),r=tb();(we!==t||ue!==e)&&(ru=null,Yr(t,e)),e=!1;var a=Pe;e:do try{if(pe!==0&&ae!==null){var l=ae,c=qt;switch(pe){case 8:up(),a=6;break e;case 3:case 2:case 9:case 6:ln.current===null&&(e=!0);var h=pe;if(pe=0,qt=null,Ar(t,l,c,h),n&&la){a=0;break e}break;default:h=pe,pe=0,qt=null,Ar(t,l,c,h)}}rI(),a=Pe;break}catch(f){JT(t,f)}while(!0);return e&&t.shellSuspendCounter++,Zn=Ws=null,ge=i,X.H=s,X.A=r,ae===null&&(we=null,ue=0,$u()),a}function rI(){for(;ae!==null;)nb(ae)}function aI(t,e){var n=ge;ge|=2;var i=eb(),s=tb();we!==t||ue!==e?(ru=null,su=Dn()+500,Yr(t,e)):la=Wo(t,e);e:do try{if(pe!==0&&ae!==null){e=ae;var r=qt;t:switch(pe){case 1:pe=0,qt=null,Ar(t,e,r,1);break;case 2:case 9:if(ov(r)){pe=0,qt=null,xv(e);break}e=function(){pe!==2&&pe!==9||we!==t||(pe=7),Ln(t)},r.then(e,e);break e;case 3:pe=7;break e;case 4:pe=5;break e;case 7:ov(r)?(pe=0,qt=null,xv(e)):(pe=0,qt=null,Ar(t,e,r,7));break;case 5:var a=null;switch(ae.tag){case 26:a=ae.memoizedState;case 5:case 27:var l=ae;if(!a||Tb(a)){pe=0,qt=null;var c=l.sibling;if(c!==null)ae=c;else{var h=l.return;h!==null?(ae=h,eh(h)):ae=null}break t}}pe=0,qt=null,Ar(t,e,r,5);break;case 6:pe=0,qt=null,Ar(t,e,r,6);break;case 8:up(),Pe=6;break e;default:throw Error(L(462))}}oI();break}catch(f){JT(t,f)}while(!0);return Zn=Ws=null,X.H=i,X.A=s,ge=n,ae!==null?0:(we=null,ue=0,$u(),Pe)}function oI(){for(;ae!==null&&!CN();)nb(ae)}function nb(t){var e=kT(t.alternate,t,ui);t.memoizedProps=t.pendingProps,e===null?eh(t):ae=e}function xv(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Sv(n,e,e.pendingProps,e.type,void 0,ue);break;case 11:e=Sv(n,e,e.pendingProps,e.type.render,e.ref,ue);break;case 5:Wm(e);default:jT(n,e),e=ae=jE(e,ui),e=kT(n,e,ui)}t.memoizedProps=t.pendingProps,e===null?eh(t):ae=e}function Ar(t,e,n,i){Zn=Ws=null,Wm(e),jr=null,Ro=0;var s=e.return;try{if(WR(t,s,e,n,ue)){Pe=1,tu(t,rn(n,t.current)),ae=null;return}}catch(r){if(s!==null)throw ae=s,r;Pe=1,tu(t,rn(n,t.current)),ae=null;return}e.flags&32768?(fe||i===1?t=!0:la||ue&536870912?t=!1:(Vi=t=!0,(i===2||i===9||i===3||i===6)&&(i=ln.current,i!==null&&i.tag===13&&(i.flags|=16384))),ib(e,t)):eh(e)}function eh(t){var e=t;do{if(e.flags&32768){ib(e,Vi);return}t=e.return;var n=ZR(e.alternate,e,ui);if(n!==null){ae=n;return}if(e=e.sibling,e!==null){ae=e;return}ae=e=t}while(e!==null);Pe===0&&(Pe=5)}function ib(t,e){do{var n=JR(t.alternate,t);if(n!==null){n.flags&=32767,ae=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ae=t;return}ae=t=n}while(t!==null);Pe=6,ae=null}function kv(t,e,n,i,s,r,a,l,c){t.cancelPendingCommit=null;do th();while(ot!==0);if(ge&6)throw Error(L(327));if(e!==null){if(e===t.current)throw Error(L(177));if(r=e.lanes|e.childLanes,r|=Vm,LN(t,n,r,a,l,c),t===we&&(ae=we=null,ue=0),$r=e,Gi=t,Mr=n,kf=r,jf=s,WT=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,hI(qc,function(){return lb(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=X.T,X.T=null,s=me.p,me.p=2,a=ge,ge|=4;try{eI(t,e,n)}finally{ge=a,me.p=s,X.T=i}}ot=1,sb(),rb(),ab()}}function sb(){if(ot===1){ot=0;var t=Gi,e=$r,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=X.T,X.T=null;var i=me.p;me.p=2;var s=ge;ge|=4;try{HT(e,t);var r=Lf,a=AE(t.containerInfo),l=r.focusedElem,c=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&SE(l.ownerDocument.documentElement,l)){if(c!==null&&Pm(l)){var h=c.start,f=c.end;if(f===void 0&&(f=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(f,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var v=m.getSelection(),w=l.textContent.length,I=Math.min(c.start,w),N=c.end===void 0?I:Math.min(c.end,w);!v.extend&&I>N&&(a=N,N=I,I=a);var y=Jy(l,I),_=Jy(l,N);if(y&&_&&(v.rangeCount!==1||v.anchorNode!==y.node||v.anchorOffset!==y.offset||v.focusNode!==_.node||v.focusOffset!==_.offset)){var b=p.createRange();b.setStart(y.node,y.offset),v.removeAllRanges(),I>N?(v.addRange(b),v.extend(_.node,_.offset)):(b.setEnd(_.node,_.offset),v.addRange(b))}}}}for(p=[],v=l;v=v.parentNode;)v.nodeType===1&&p.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var x=p[l];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}fu=!!Uf,Lf=Uf=null}finally{ge=s,me.p=i,X.T=n}}t.current=e,ot=2}}function rb(){if(ot===2){ot=0;var t=Gi,e=$r,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=X.T,X.T=null;var i=me.p;me.p=2;var s=ge;ge|=4;try{LT(t,e.alternate,e)}finally{ge=s,me.p=i,X.T=n}}ot=3}}function ab(){if(ot===4||ot===3){ot=0,DN();var t=Gi,e=$r,n=Mr,i=WT;e.subtreeFlags&10256||e.flags&10256?ot=5:(ot=0,$r=Gi=null,ob(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(Fi=null),Cm(n),e=e.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Qo,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=X.T,s=me.p,me.p=2,X.T=null;try{for(var r=t.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{X.T=e,me.p=s}}Mr&3&&th(),Ln(t),s=t.pendingLanes,n&4194090&&s&42?t===Mf?uo++:(uo=0,Mf=t):uo=0,ol(0)}}function ob(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,nl(e)))}function th(t){return sb(),rb(),ab(),lb()}function lb(){if(ot!==5)return!1;var t=Gi,e=kf;kf=0;var n=Cm(Mr),i=X.T,s=me.p;try{me.p=32>n?32:n,X.T=null,n=jf,jf=null;var r=Gi,a=Mr;if(ot=0,$r=Gi=null,Mr=0,ge&6)throw Error(L(331));var l=ge;if(ge|=4,YT(r.current),GT(r,r.current,a,n),ge=l,ol(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Qo,r)}catch{}return!0}finally{me.p=s,X.T=i,ob(t,e)}}function jv(t,e,n){e=rn(n,e),e=Rf(t.stateNode,e,2),t=Hi(t,e,2),t!==null&&(Xo(t,2),Ln(t))}function be(t,e,n){if(t.tag===3)jv(t,t,n);else for(;e!==null;){if(e.tag===3){jv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Fi===null||!Fi.has(i))){t=rn(n,t),n=AT(2),i=Hi(e,n,2),i!==null&&(NT(n,i,e,t),Xo(i,2),Ln(i));break}}e=e.return}}function Rd(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new iI;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(op=!0,s.add(n),t=lI.bind(null,t,e,n),e.then(t,t))}function lI(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,we===t&&(ue&n)===n&&(Pe===4||Pe===3&&(ue&62914560)===ue&&300>Dn()-cp?!(ge&2)&&Yr(t,0):lp|=n,Kr===ue&&(Kr=0)),Ln(t)}function cb(t,e){e===0&&(e=sE()),t=oa(t,e),t!==null&&(Xo(t,e),Ln(t))}function cI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cb(t,n)}function uI(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(L(314))}i!==null&&i.delete(e),cb(t,n)}function hI(t,e){return Rm(t,e)}var au=null,ur=null,Pf=!1,ou=!1,Id=!1,js=0;function Ln(t){t!==ur&&t.next===null&&(ur===null?au=ur=t:ur=ur.next=t),ou=!0,Pf||(Pf=!0,fI())}function ol(t,e){if(!Id&&ou){Id=!0;do for(var n=!1,i=au;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-Yt(42|t)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Mv(i,r))}else r=ue,r=Hu(i,i===we?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||Wo(i,r)||(n=!0,Mv(i,r));i=i.next}while(n);Id=!1}}function dI(){ub()}function ub(){ou=Pf=!1;var t=0;js!==0&&(TI()&&(t=js),js=0);for(var e=Dn(),n=null,i=au;i!==null;){var s=i.next,r=hb(i,e);r===0?(i.next=null,n===null?au=s:n.next=s,s===null&&(ur=n)):(n=i,(t!==0||r&3)&&(ou=!0)),i=s}ol(t)}function hb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-Yt(r),l=1<<a,c=s[a];c===-1?(!(l&n)||l&i)&&(s[a]=UN(l,e)):c<=e&&(t.expiredLanes|=l),r&=~l}if(e=we,n=ue,n=Hu(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(pe===2||pe===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&ed(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Wo(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&ed(i),Cm(n)){case 2:case 8:n=tE;break;case 32:n=qc;break;case 268435456:n=nE;break;default:n=qc}return i=db.bind(null,t),n=Rm(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&ed(i),t.callbackPriority=2,t.callbackNode=null,2}function db(t,e){if(ot!==0&&ot!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(th()&&t.callbackNode!==n)return null;var i=ue;return i=Hu(t,t===we?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(ZT(t,i,e),hb(t,Dn()),t.callbackNode!=null&&t.callbackNode===n?db.bind(null,t):null)}function Mv(t,e){if(th())return null;ZT(t,e,!0)}function fI(){wI(function(){ge&6?Rm(eE,dI):ub()})}function hp(){return js===0&&(js=iE()),js}function Ov(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yc(""+t)}function Pv(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function mI(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var r=Ov((s[Vt]||null).action),a=i.submitter;a&&(e=(e=a[Vt]||null)?Ov(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var l=new Fu("action","action",null,i,s);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(js!==0){var c=a?Pv(s,a):new FormData(s);Af(n,{pending:!0,data:c,method:s.method,action:r},null,c)}}else typeof r=="function"&&(l.preventDefault(),c=a?Pv(s,a):new FormData(s),Af(n,{pending:!0,data:c,method:s.method,action:r},r,c))},currentTarget:s}]})}}for(var Cd=0;Cd<ff.length;Cd++){var Dd=ff[Cd],pI=Dd.toLowerCase(),gI=Dd[0].toUpperCase()+Dd.slice(1);_n(pI,"on"+gI)}_n(RE,"onAnimationEnd");_n(IE,"onAnimationIteration");_n(CE,"onAnimationStart");_n("dblclick","onDoubleClick");_n("focusin","onFocus");_n("focusout","onBlur");_n(jR,"onTransitionRun");_n(MR,"onTransitionStart");_n(OR,"onTransitionCancel");_n(DE,"onTransitionEnd");zr("onMouseEnter",["mouseout","mouseover"]);zr("onMouseLeave",["mouseout","mouseover"]);zr("onPointerEnter",["pointerout","pointerover"]);zr("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Io));function fb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=h;try{r(s)}catch(f){eu(f)}s.currentTarget=null,r=c}else for(a=0;a<i.length;a++){if(l=i[a],c=l.instance,h=l.currentTarget,l=l.listener,c!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=h;try{r(s)}catch(f){eu(f)}s.currentTarget=null,r=c}}}}function re(t,e){var n=e[af];n===void 0&&(n=e[af]=new Set);var i=t+"__bubble";n.has(i)||(mb(e,t,2,!1),n.add(i))}function xd(t,e,n){var i=0;e&&(i|=4),mb(n,t,i,e)}var ic="_reactListening"+Math.random().toString(36).slice(2);function dp(t){if(!t[ic]){t[ic]=!0,lE.forEach(function(n){n!=="selectionchange"&&(yI.has(n)||xd(n,!1,t),xd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ic]||(e[ic]=!0,xd("selectionchange",!1,e))}}function mb(t,e,n,i){switch(Nb(e)){case 2:var s=FI;break;case 8:s=GI;break;default:s=gp}n=s.bind(null,e,n,t),s=void 0,!uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function kd(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=gr(l),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){i=r=a;continue e}l=l.parentNode}}i=i.return}gE(function(){var h=r,f=km(n),p=[];e:{var m=xE.get(t);if(m!==void 0){var v=Fu,w=t;switch(t){case"keypress":if(_c(n)===0)break e;case"keydown":case"keyup":v=hR;break;case"focusin":w="focus",v=ld;break;case"focusout":w="blur",v=ld;break;case"beforeblur":case"afterblur":v=ld;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Hy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=JN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=mR;break;case RE:case IE:case CE:v=nR;break;case DE:v=gR;break;case"scroll":case"scrollend":v=XN;break;case"wheel":v=vR;break;case"copy":case"cut":case"paste":v=sR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Gy;break;case"toggle":case"beforetoggle":v=ER}var I=(e&4)!==0,N=!I&&(t==="scroll"||t==="scrollend"),y=I?m!==null?m+"Capture":null:m;I=[];for(var _=h,b;_!==null;){var x=_;if(b=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||b===null||y===null||(x=bo(_,y),x!=null&&I.push(Co(_,x,b))),N)break;_=_.return}0<I.length&&(m=new v(m,w,null,n,f),p.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==cf&&(w=n.relatedTarget||n.fromElement)&&(gr(w)||w[ra]))break e;if((v||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=h,w=w?gr(w):null,w!==null&&(N=Yo(w),I=w.tag,w!==N||I!==5&&I!==27&&I!==6)&&(w=null)):(v=null,w=h),v!==w)){if(I=Hy,x="onMouseLeave",y="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(I=Gy,x="onPointerLeave",y="onPointerEnter",_="pointer"),N=v==null?m:Ha(v),b=w==null?m:Ha(w),m=new I(x,_+"leave",v,n,f),m.target=N,m.relatedTarget=b,x=null,gr(f)===h&&(I=new I(y,_+"enter",w,n,f),I.target=b,I.relatedTarget=N,x=I),N=x,v&&w)t:{for(I=v,y=w,_=0,b=I;b;b=ar(b))_++;for(b=0,x=y;x;x=ar(x))b++;for(;0<_-b;)I=ar(I),_--;for(;0<b-_;)y=ar(y),b--;for(;_--;){if(I===y||y!==null&&I===y.alternate)break t;I=ar(I),y=ar(y)}I=null}else I=null;v!==null&&Vv(p,m,v,I,!1),w!==null&&N!==null&&Vv(p,N,w,I,!0)}}e:{if(m=h?Ha(h):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var P=Qy;else if(Yy(m))if(bE)P=DR;else{P=IR;var V=RR}else v=m.nodeName,!v||v.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&xm(h.elementType)&&(P=Qy):P=CR;if(P&&(P=P(t,h))){TE(p,P,n,f);break e}V&&V(t,m,h),t==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&lf(m,"number",m.value)}switch(V=h?Ha(h):window,t){case"focusin":(Yy(V)||V.contentEditable==="true")&&(_r=V,hf=h,eo=null);break;case"focusout":eo=hf=_r=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,ev(p,n,f);break;case"selectionchange":if(kR)break;case"keydown":case"keyup":ev(p,n,f)}var S;if(Om)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else vr?_E(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(vE&&n.locale!=="ko"&&(vr||T!=="onCompositionStart"?T==="onCompositionEnd"&&vr&&(S=yE()):(Pi=f,jm="value"in Pi?Pi.value:Pi.textContent,vr=!0)),V=lu(h,T),0<V.length&&(T=new Fy(T,t,null,n,f),p.push({event:T,listeners:V}),S?T.data=S:(S=EE(n),S!==null&&(T.data=S)))),(S=bR?wR(t,n):SR(t,n))&&(T=lu(h,"onBeforeInput"),0<T.length&&(V=new Fy("onBeforeInput","beforeinput",null,n,f),p.push({event:V,listeners:T}),V.data=S)),mI(p,t,h,n,f)}fb(p,e)})}function Co(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lu(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=bo(t,n),s!=null&&i.unshift(Co(t,s,r)),s=bo(t,e),s!=null&&i.push(Co(t,s,r))),t.tag===3)return i;t=t.return}return[]}function ar(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Vv(t,e,n,i,s){for(var r=e._reactName,a=[];n!==null&&n!==i;){var l=n,c=l.alternate,h=l.stateNode;if(l=l.tag,c!==null&&c===i)break;l!==5&&l!==26&&l!==27||h===null||(c=h,s?(h=bo(n,r),h!=null&&a.unshift(Co(n,h,c))):s||(h=bo(n,r),h!=null&&a.push(Co(n,h,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var vI=/\r\n?/g,_I=/\u0000|\uFFFD/g;function Uv(t){return(typeof t=="string"?t:""+t).replace(vI,`
`).replace(_I,"")}function pb(t,e){return e=Uv(e),Uv(t)===e}function nh(){}function ve(t,e,n,i,s,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Br(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Br(t,""+i);break;case"className":Wl(t,"class",i);break;case"tabIndex":Wl(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Wl(t,n,i);break;case"style":pE(t,i,r);break;case"data":if(e!=="object"){Wl(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=yc(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&ve(t,e,"name",s.name,s,null),ve(t,e,"formEncType",s.formEncType,s,null),ve(t,e,"formMethod",s.formMethod,s,null),ve(t,e,"formTarget",s.formTarget,s,null)):(ve(t,e,"encType",s.encType,s,null),ve(t,e,"method",s.method,s,null),ve(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=yc(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=nh);break;case"onScroll":i!=null&&re("scroll",t);break;case"onScrollEnd":i!=null&&re("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(L(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=yc(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":re("beforetoggle",t),re("toggle",t),gc(t,"popover",i);break;case"xlinkActuate":Fn(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Fn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Fn(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Fn(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Fn(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Fn(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Fn(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Fn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Fn(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":gc(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=QN.get(n)||n,gc(t,n,i))}}function Vf(t,e,n,i,s,r){switch(n){case"style":pE(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(L(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Br(t,i):(typeof i=="number"||typeof i=="bigint")&&Br(t,""+i);break;case"onScroll":i!=null&&re("scroll",t);break;case"onScrollEnd":i!=null&&re("scrollend",t);break;case"onClick":i!=null&&(t.onclick=nh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cE.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[Vt]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):gc(t,n,i)}}}function ct(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":re("error",t),re("load",t);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(L(137,e));default:ve(t,e,r,a,n,null)}}s&&ve(t,e,"srcSet",n.srcSet,n,null),i&&ve(t,e,"src",n.src,n,null);return;case"input":re("invalid",t);var l=r=a=s=null,c=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var f=n[i];if(f!=null)switch(i){case"name":s=f;break;case"type":a=f;break;case"checked":c=f;break;case"defaultChecked":h=f;break;case"value":r=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(L(137,e));break;default:ve(t,e,i,f,n,null)}}dE(t,r,l,c,h,a,s,!1),Hc(t);return;case"select":re("invalid",t),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:ve(t,e,s,l,n,null)}e=r,n=a,t.multiple=!!i,e!=null?Ir(t,!!i,e,!1):n!=null&&Ir(t,!!i,n,!0);return;case"textarea":re("invalid",t),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(L(91));break;default:ve(t,e,a,l,n,null)}mE(t,i,s,r),Hc(t);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:ve(t,e,c,i,n,null)}return;case"dialog":re("beforetoggle",t),re("toggle",t),re("cancel",t),re("close",t);break;case"iframe":case"object":re("load",t);break;case"video":case"audio":for(i=0;i<Io.length;i++)re(Io[i],t);break;case"image":re("error",t),re("load",t);break;case"details":re("toggle",t);break;case"embed":case"source":case"link":re("error",t),re("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(L(137,e));default:ve(t,e,h,i,n,null)}return;default:if(xm(e)){for(f in n)n.hasOwnProperty(f)&&(i=n[f],i!==void 0&&Vf(t,e,f,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&ve(t,e,l,i,n,null))}function EI(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,c=null,h=null,f=null;for(v in n){var p=n[v];if(n.hasOwnProperty(v)&&p!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":c=p;default:i.hasOwnProperty(v)||ve(t,e,v,null,i,p)}}for(var m in i){var v=i[m];if(p=n[m],i.hasOwnProperty(m)&&(v!=null||p!=null))switch(m){case"type":r=v;break;case"name":s=v;break;case"checked":h=v;break;case"defaultChecked":f=v;break;case"value":a=v;break;case"defaultValue":l=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(L(137,e));break;default:v!==p&&ve(t,e,m,v,i,p)}}of(t,a,l,c,h,f,r,s);return;case"select":v=a=l=m=null;for(r in n)if(c=n[r],n.hasOwnProperty(r)&&c!=null)switch(r){case"value":break;case"multiple":v=c;default:i.hasOwnProperty(r)||ve(t,e,r,null,i,c)}for(s in i)if(r=i[s],c=n[s],i.hasOwnProperty(s)&&(r!=null||c!=null))switch(s){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==c&&ve(t,e,s,r,i,c)}e=l,n=a,i=v,m!=null?Ir(t,!!n,m,!1):!!i!=!!n&&(e!=null?Ir(t,!!n,e,!0):Ir(t,!!n,n?[]:"",!1));return;case"textarea":v=m=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:ve(t,e,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":m=s;break;case"defaultValue":v=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(L(91));break;default:s!==r&&ve(t,e,a,s,i,r)}fE(t,m,v);return;case"option":for(var w in n)if(m=n[w],n.hasOwnProperty(w)&&m!=null&&!i.hasOwnProperty(w))switch(w){case"selected":t.selected=!1;break;default:ve(t,e,w,null,i,m)}for(c in i)if(m=i[c],v=n[c],i.hasOwnProperty(c)&&m!==v&&(m!=null||v!=null))switch(c){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ve(t,e,c,m,i,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var I in n)m=n[I],n.hasOwnProperty(I)&&m!=null&&!i.hasOwnProperty(I)&&ve(t,e,I,null,i,m);for(h in i)if(m=i[h],v=n[h],i.hasOwnProperty(h)&&m!==v&&(m!=null||v!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(L(137,e));break;default:ve(t,e,h,m,i,v)}return;default:if(xm(e)){for(var N in n)m=n[N],n.hasOwnProperty(N)&&m!==void 0&&!i.hasOwnProperty(N)&&Vf(t,e,N,void 0,i,m);for(f in i)m=i[f],v=n[f],!i.hasOwnProperty(f)||m===v||m===void 0&&v===void 0||Vf(t,e,f,m,i,v);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&m!=null&&!i.hasOwnProperty(y)&&ve(t,e,y,null,i,m);for(p in i)m=i[p],v=n[p],!i.hasOwnProperty(p)||m===v||m==null&&v==null||ve(t,e,p,m,i,v)}var Uf=null,Lf=null;function cu(t){return t.nodeType===9?t:t.ownerDocument}function Lv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gb(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function zf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jd=null;function TI(){var t=window.event;return t&&t.type==="popstate"?t===jd?!1:(jd=t,!0):(jd=null,!1)}var yb=typeof setTimeout=="function"?setTimeout:void 0,bI=typeof clearTimeout=="function"?clearTimeout:void 0,zv=typeof Promise=="function"?Promise:void 0,wI=typeof queueMicrotask=="function"?queueMicrotask:typeof zv<"u"?function(t){return zv.resolve(null).then(t).catch(SI)}:yb;function SI(t){setTimeout(function(){throw t})}function rs(t){return t==="head"}function Bv(t,e){var n=e,i=0,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=t.ownerDocument;if(n&1&&ho(a.documentElement),n&2&&ho(a.body),n&4)for(n=a.head,ho(n),a=n.firstChild;a;){var l=a.nextSibling,c=a.nodeName;a[Zo]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){t.removeChild(r),Mo(e);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Mo(e)}function Bf(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Bf(n),Dm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function AI(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Zo])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=pn(t.nextSibling),t===null)break}return null}function NI(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=pn(t.nextSibling),t===null))return null;return t}function qf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function RI(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Hf=null;function qv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function vb(t,e,n){switch(e=cu(n),t){case"html":if(t=e.documentElement,!t)throw Error(L(452));return t;case"head":if(t=e.head,!t)throw Error(L(453));return t;case"body":if(t=e.body,!t)throw Error(L(454));return t;default:throw Error(L(451))}}function ho(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Dm(t)}var cn=new Map,Hv=new Set;function uu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var pi=me.d;me.d={f:II,r:CI,D:DI,C:xI,L:kI,m:jI,X:OI,S:MI,M:PI};function II(){var t=pi.f(),e=Ju();return t||e}function CI(t){var e=aa(t);e!==null&&e.tag===5&&e.type==="form"?hT(e):pi.r(t)}var ca=typeof document>"u"?null:document;function _b(t,e,n){var i=ca;if(i&&typeof e=="string"&&e){var s=sn(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Hv.has(s)||(Hv.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),ct(e,"link",t),Je(e),i.head.appendChild(e)))}}function DI(t){pi.D(t),_b("dns-prefetch",t,null)}function xI(t,e){pi.C(t,e),_b("preconnect",t,e)}function kI(t,e,n){pi.L(t,e,n);var i=ca;if(i&&t&&e){var s='link[rel="preload"][as="'+sn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+sn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+sn(n.imageSizes)+'"]')):s+='[href="'+sn(t)+'"]';var r=s;switch(e){case"style":r=Qr(t);break;case"script":r=ua(t)}cn.has(r)||(t=Ne({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),cn.set(r,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(ll(r))||e==="script"&&i.querySelector(cl(r))||(e=i.createElement("link"),ct(e,"link",t),Je(e),i.head.appendChild(e)))}}function jI(t,e){pi.m(t,e);var n=ca;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+sn(i)+'"][href="'+sn(t)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ua(t)}if(!cn.has(r)&&(t=Ne({rel:"modulepreload",href:t},e),cn.set(r,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(cl(r)))return}i=n.createElement("link"),ct(i,"link",t),Je(i),n.head.appendChild(i)}}}function MI(t,e,n){pi.S(t,e,n);var i=ca;if(i&&t){var s=Rr(i).hoistableStyles,r=Qr(t);e=e||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(ll(r)))l.loading=5;else{t=Ne({rel:"stylesheet",href:t,"data-precedence":e},n),(n=cn.get(r))&&fp(t,n);var c=a=i.createElement("link");Je(c),ct(c,"link",t),c._p=new Promise(function(h,f){c.onload=h,c.onerror=f}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Nc(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function OI(t,e){pi.X(t,e);var n=ca;if(n&&t){var i=Rr(n).hoistableScripts,s=ua(t),r=i.get(s);r||(r=n.querySelector(cl(s)),r||(t=Ne({src:t,async:!0},e),(e=cn.get(s))&&mp(t,e),r=n.createElement("script"),Je(r),ct(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function PI(t,e){pi.M(t,e);var n=ca;if(n&&t){var i=Rr(n).hoistableScripts,s=ua(t),r=i.get(s);r||(r=n.querySelector(cl(s)),r||(t=Ne({src:t,async:!0,type:"module"},e),(e=cn.get(s))&&mp(t,e),r=n.createElement("script"),Je(r),ct(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Fv(t,e,n,i){var s=(s=Bi.current)?uu(s):null;if(!s)throw Error(L(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Qr(n.href),n=Rr(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Qr(n.href);var r=Rr(s).hoistableStyles,a=r.get(t);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=s.querySelector(ll(t)))&&!r._p&&(a.instance=r,a.state.loading=5),cn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},cn.set(t,n),r||VI(s,t,n,a.state))),e&&i===null)throw Error(L(528,""));return a}if(e&&i!==null)throw Error(L(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=ua(n),n=Rr(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(L(444,t))}}function Qr(t){return'href="'+sn(t)+'"'}function ll(t){return'link[rel="stylesheet"]['+t+"]"}function Eb(t){return Ne({},t,{"data-precedence":t.precedence,precedence:null})}function VI(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),ct(e,"link",n),Je(e),t.head.appendChild(e))}function ua(t){return'[src="'+sn(t)+'"]'}function cl(t){return"script[async]"+t}function Gv(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+sn(n.href)+'"]');if(i)return e.instance=i,Je(i),i;var s=Ne({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Je(i),ct(i,"style",s),Nc(i,n.precedence,t),e.instance=i;case"stylesheet":s=Qr(n.href);var r=t.querySelector(ll(s));if(r)return e.state.loading|=4,e.instance=r,Je(r),r;i=Eb(n),(s=cn.get(s))&&fp(i,s),r=(t.ownerDocument||t).createElement("link"),Je(r);var a=r;return a._p=new Promise(function(l,c){a.onload=l,a.onerror=c}),ct(r,"link",i),e.state.loading|=4,Nc(r,n.precedence,t),e.instance=r;case"script":return r=ua(n.src),(s=t.querySelector(cl(r)))?(e.instance=s,Je(s),s):(i=n,(s=cn.get(r))&&(i=Ne({},n),mp(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),Je(s),ct(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(L(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Nc(i,n.precedence,t));return e.instance}function Nc(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function fp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function mp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Rc=null;function Kv(t,e,n){if(Rc===null){var i=new Map,s=Rc=new Map;s.set(n,i)}else s=Rc,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[Zo]||r[Et]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function $v(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function UI(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Tb(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Do=null;function LI(){}function zI(t,e,n){if(Do===null)throw Error(L(475));var i=Do;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var s=Qr(n.href),r=t.querySelector(ll(s));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=hu.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=r,Je(r);return}r=t.ownerDocument||t,n=Eb(n),(s=cn.get(s))&&fp(n,s),r=r.createElement("link"),Je(r);var a=r;a._p=new Promise(function(l,c){a.onload=l,a.onerror=c}),ct(r,"link",n),e.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=hu.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function BI(){if(Do===null)throw Error(L(475));var t=Do;return t.stylesheets&&t.count===0&&Ff(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Ff(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function hu(){if(this.count--,this.count===0){if(this.stylesheets)Ff(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var du=null;function Ff(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,du=new Map,e.forEach(qI,t),du=null,hu.call(t))}function qI(t,e){if(!(e.state.loading&4)){var n=du.get(t);if(n)var i=n.get(null);else{n=new Map,du.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=e.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=hu.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var xo={$$typeof:Qn,Provider:null,Consumer:null,_currentValue:Rs,_currentValue2:Rs,_threadCount:0};function HI(t,e,n,i,s,r,a,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=td(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=td(0),this.hiddenUpdates=td(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function bb(t,e,n,i,s,r,a,l,c,h,f,p){return t=new HI(t,e,n,a,l,c,h,p),e=1,r===!0&&(e|=24),r=Gt(3,null,null,e),t.current=r,r.stateNode=t,e=qm(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},Fm(r),t}function wb(t){return t?(t=br,t):br}function Sb(t,e,n,i,s,r){s=wb(s),i.context===null?i.context=s:i.pendingContext=s,i=qi(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Hi(t,i,e),n!==null&&(Wt(n,t,e),io(n,t,e))}function Yv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pp(t,e){Yv(t,e),(t=t.alternate)&&Yv(t,e)}function Ab(t){if(t.tag===13){var e=oa(t,67108864);e!==null&&Wt(e,t,67108864),pp(t,67108864)}}var fu=!0;function FI(t,e,n,i){var s=X.T;X.T=null;var r=me.p;try{me.p=2,gp(t,e,n,i)}finally{me.p=r,X.T=s}}function GI(t,e,n,i){var s=X.T;X.T=null;var r=me.p;try{me.p=8,gp(t,e,n,i)}finally{me.p=r,X.T=s}}function gp(t,e,n,i){if(fu){var s=Gf(i);if(s===null)kd(t,e,i,mu,n),Qv(t,i);else if($I(s,t,e,n,i))i.stopPropagation();else if(Qv(t,i),e&4&&-1<KI.indexOf(t)){for(;s!==null;){var r=aa(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=ys(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var c=1<<31-Yt(a);l.entanglements[1]|=c,a&=~c}Ln(r),!(ge&6)&&(su=Dn()+500,ol(0))}}break;case 13:l=oa(r,2),l!==null&&Wt(l,r,2),Ju(),pp(r,2)}if(r=Gf(i),r===null&&kd(t,e,i,mu,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else kd(t,e,i,null,n)}}function Gf(t){return t=km(t),yp(t)}var mu=null;function yp(t){if(mu=null,t=gr(t),t!==null){var e=Yo(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=W0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return mu=t,null}function Nb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xN()){case eE:return 2;case tE:return 8;case qc:case kN:return 32;case nE:return 268435456;default:return 32}default:return 32}}var Kf=!1,Ki=null,$i=null,Yi=null,ko=new Map,jo=new Map,xi=[],KI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qv(t,e){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":ko.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jo.delete(e.pointerId)}}function Va(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=aa(e),e!==null&&Ab(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function $I(t,e,n,i,s){switch(e){case"focusin":return Ki=Va(Ki,t,e,n,i,s),!0;case"dragenter":return $i=Va($i,t,e,n,i,s),!0;case"mouseover":return Yi=Va(Yi,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return ko.set(r,Va(ko.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,jo.set(r,Va(jo.get(r)||null,t,e,n,i,s)),!0}return!1}function Rb(t){var e=gr(t.target);if(e!==null){var n=Yo(e);if(n!==null){if(e=n.tag,e===13){if(e=W0(n),e!==null){t.blockedOn=e,zN(t.priority,function(){if(n.tag===13){var i=Qt();i=Im(i);var s=oa(n,i);s!==null&&Wt(s,n,i),pp(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gf(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);cf=i,n.target.dispatchEvent(i),cf=null}else return e=aa(n),e!==null&&Ab(e),t.blockedOn=n,!1;e.shift()}return!0}function Wv(t,e,n){Ic(t)&&n.delete(e)}function YI(){Kf=!1,Ki!==null&&Ic(Ki)&&(Ki=null),$i!==null&&Ic($i)&&($i=null),Yi!==null&&Ic(Yi)&&(Yi=null),ko.forEach(Wv),jo.forEach(Wv)}function sc(t,e){t.blockedOn===e&&(t.blockedOn=null,Kf||(Kf=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,YI)))}var rc=null;function Xv(t){rc!==t&&(rc=t,We.unstable_scheduleCallback(We.unstable_NormalPriority,function(){rc===t&&(rc=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(yp(i||n)===null)continue;break}var r=aa(n);r!==null&&(t.splice(e,3),e-=3,Af(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Mo(t){function e(c){return sc(c,t)}Ki!==null&&sc(Ki,t),$i!==null&&sc($i,t),Yi!==null&&sc(Yi,t),ko.forEach(e),jo.forEach(e);for(var n=0;n<xi.length;n++){var i=xi[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<xi.length&&(n=xi[0],n.blockedOn===null);)Rb(n),n.blockedOn===null&&xi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[Vt]||null;if(typeof r=="function")a||Xv(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[Vt]||null)l=a.formAction;else if(yp(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Xv(n)}}}function vp(t){this._internalRoot=t}ih.prototype.render=vp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));var n=e.current,i=Qt();Sb(n,i,t,e,null,null)};ih.prototype.unmount=vp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sb(t.current,2,null,t,null,null),Ju(),e[ra]=null}};function ih(t){this._internalRoot=t}ih.prototype.unstable_scheduleHydration=function(t){if(t){var e=oE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xi.length&&e!==0&&e<xi[n].priority;n++);xi.splice(n,0,t),n===0&&Rb(t)}};var Zv=Y0.version;if(Zv!=="19.1.1")throw Error(L(527,Zv,"19.1.1"));me.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=SN(e),t=t!==null?X0(t):null,t=t===null?null:t.stateNode,t};var QI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Qo=ac.inject(QI),$t=ac}catch{}}zu.createRoot=function(t,e){if(!Q0(t))throw Error(L(299));var n=!1,i="",s=bT,r=wT,a=ST,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=bb(t,1,!1,null,null,n,i,s,r,a,l,null),t[ra]=e.current,dp(t),new vp(e)};zu.hydrateRoot=function(t,e,n){if(!Q0(t))throw Error(L(299));var i=!1,s="",r=bT,a=wT,l=ST,c=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),e=bb(t,1,!0,e,n??null,i,s,r,a,l,c,h),e.context=wb(null),n=e.current,i=Qt(),i=Im(i),s=qi(i),s.callback=null,Hi(n,s,i),n=i,e.current.lanes=n,Xo(e,n),Ln(e),t[ra]=e.current,dp(t),new ih(e)};zu.version="19.1.1";function Ib(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ib)}catch(t){console.error(t)}}Ib(),q0.exports=zu;var WI=q0.exports;const XI="modulepreload",ZI=function(t){return"/"+t},Jv={},Cc=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=ZI(c),c in Jv)return;Jv[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":XI,h||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((m,v)=>{p.addEventListener("load",m),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})};var e_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},JI=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const r=t[n++],a=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},Db={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,f=r>>2,p=(r&3)<<4|l>>4;let m=(l&15)<<2|h>>6,v=h&63;c||(v=64,a||(m=64)),i.push(n[f],n[p],n[m],n[v])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Cb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||l==null||h==null||p==null)throw new e1;const m=r<<2|l>>4;if(i.push(m),h!==64){const v=l<<4&240|h>>2;if(i.push(v),p!==64){const w=h<<6&192|p;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class e1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const t1=function(t){const e=Cb(t);return Db.encodeByteArray(e,!0)},pu=function(t){return t1(t).replace(/\./g,"")},xb=function(t){try{return Db.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=()=>n1().__FIREBASE_DEFAULTS__,s1=()=>{if(typeof process>"u"||typeof e_>"u")return;const t=e_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},r1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xb(t[1]);return e&&JSON.parse(e)},sh=()=>{try{return i1()||s1()||r1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kb=t=>{var e,n;return(n=(e=sh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},a1=t=>{const e=kb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},jb=()=>{var t;return(t=sh())===null||t===void 0?void 0:t.config},Mb=t=>{var e;return(e=sh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pu(JSON.stringify(n)),pu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function c1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function u1(){var t;const e=(t=sh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function h1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ob(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function d1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f1(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m1(){return!u1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pb(){try{return typeof indexedDB=="object"}catch{return!1}}function Vb(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}function p1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="FirebaseError";class En extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=g1,Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xs.prototype.create)}}class Xs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?y1(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new En(s,l,i)}}function y1(t,e){return t.replace(v1,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const v1=/\{\$([^}]+)}/g;function _1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],a=e[s];if(t_(r)&&t_(a)){if(!Oo(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function t_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ga(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Ka(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function E1(t,e){const n=new T1(t,e);return n.subscribe.bind(n)}class T1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");b1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Md),s.error===void 0&&(s.error=Md),s.complete===void 0&&(s.complete=Md);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Md(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=1e3,S1=2,A1=4*60*60*1e3,N1=.5;function n_(t,e=w1,n=S1){const i=e*Math.pow(n,t),s=Math.round(N1*i*(Math.random()-.5)*2);return Math.min(A1,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t){return t&&t._delegate?t._delegate:t}class yn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new o1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(C1(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const a=this.instances.get(s);return a&&e(a,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:I1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function I1(t){return t===Es?void 0:t}function C1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new R1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const x1={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},k1=le.INFO,j1={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},M1=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=j1[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rh{constructor(e){this.name=e,this._logLevel=k1,this._logHandler=M1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const O1=(t,e)=>e.some(n=>t instanceof n);let i_,s_;function P1(){return i_||(i_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V1(){return s_||(s_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ub=new WeakMap,$f=new WeakMap,Lb=new WeakMap,Od=new WeakMap,_p=new WeakMap;function U1(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(Qi(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Ub.set(n,t)}).catch(()=>{}),_p.set(e,t),e}function L1(t){if($f.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});$f.set(t,e)}let Yf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $f.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Lb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function z1(t){Yf=t(Yf)}function B1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Pd(this),e,...n);return Lb.set(i,e.sort?e.sort():[e]),Qi(i)}:V1().includes(t)?function(...e){return t.apply(Pd(this),e),Qi(Ub.get(this))}:function(...e){return Qi(t.apply(Pd(this),e))}}function q1(t){return typeof t=="function"?B1(t):(t instanceof IDBTransaction&&L1(t),O1(t,P1())?new Proxy(t,Yf):t)}function Qi(t){if(t instanceof IDBRequest)return U1(t);if(Od.has(t))return Od.get(t);const e=q1(t);return e!==t&&(Od.set(t,e),_p.set(e,t)),e}const Pd=t=>_p.get(t);function zb(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(t,e),l=Qi(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Qi(a.result),c.oldVersion,c.newVersion,Qi(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{r&&c.addEventListener("close",()=>r()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const H1=["get","getKey","getAll","getAllKeys","count"],F1=["put","add","delete","clear"],Vd=new Map;function r_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vd.get(e))return Vd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=F1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||H1.includes(n)))return;const r=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let h=c.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return Vd.set(e,r),r}z1(t=>({...t,get:(e,n,i)=>r_(e,n)||t.get(e,n,i),has:(e,n)=>!!r_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(K1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function K1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qf="@firebase/app",a_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new rh("@firebase/app"),$1="@firebase/app-compat",Y1="@firebase/analytics-compat",Q1="@firebase/analytics",W1="@firebase/app-check-compat",X1="@firebase/app-check",Z1="@firebase/auth",J1="@firebase/auth-compat",eC="@firebase/database",tC="@firebase/data-connect",nC="@firebase/database-compat",iC="@firebase/functions",sC="@firebase/functions-compat",rC="@firebase/installations",aC="@firebase/installations-compat",oC="@firebase/messaging",lC="@firebase/messaging-compat",cC="@firebase/performance",uC="@firebase/performance-compat",hC="@firebase/remote-config",dC="@firebase/remote-config-compat",fC="@firebase/storage",mC="@firebase/storage-compat",pC="@firebase/firestore",gC="@firebase/vertexai-preview",yC="@firebase/firestore-compat",vC="firebase",_C="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="[DEFAULT]",EC={[Qf]:"fire-core",[$1]:"fire-core-compat",[Q1]:"fire-analytics",[Y1]:"fire-analytics-compat",[X1]:"fire-app-check",[W1]:"fire-app-check-compat",[Z1]:"fire-auth",[J1]:"fire-auth-compat",[eC]:"fire-rtdb",[tC]:"fire-data-connect",[nC]:"fire-rtdb-compat",[iC]:"fire-fn",[sC]:"fire-fn-compat",[rC]:"fire-iid",[aC]:"fire-iid-compat",[oC]:"fire-fcm",[lC]:"fire-fcm-compat",[cC]:"fire-perf",[uC]:"fire-perf-compat",[hC]:"fire-rc",[dC]:"fire-rc-compat",[fC]:"fire-gcs",[mC]:"fire-gcs-compat",[pC]:"fire-fst",[yC]:"fire-fst-compat",[gC]:"fire-vertex","fire-js":"fire-js",[vC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=new Map,TC=new Map,Xf=new Map;function o_(t,e){try{t.container.addComponent(e)}catch(n){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function On(t){const e=t.name;if(Xf.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;Xf.set(e,t);for(const n of gu.values())o_(n,t);for(const n of TC.values())o_(n,t);return!0}function Zs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wi=new Xs("app","Firebase",bC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new yn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=_C;function Bb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Wf,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Wi.create("bad-app-name",{appName:String(s)});if(n||(n=jb()),!n)throw Wi.create("no-options");const r=gu.get(s);if(r){if(Oo(n,r.options)&&Oo(i,r.config))return r;throw Wi.create("duplicate-app",{appName:s})}const a=new D1(s);for(const c of Xf.values())a.addComponent(c);const l=new wC(n,i,a);return gu.set(s,l),l}function Ep(t=Wf){const e=gu.get(t);if(!e&&t===Wf&&jb())return Bb();if(!e)throw Wi.create("no-app",{appName:t});return e}function on(t,e,n){var i;let s=(i=EC[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const l=[`Unable to register library "${s}" with version "${e}":`];r&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(l.join(" "));return}On(new yn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="firebase-heartbeat-database",AC=1,Po="firebase-heartbeat-store";let Ud=null;function qb(){return Ud||(Ud=zb(SC,AC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Po)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wi.create("idb-open",{originalErrorMessage:t.message})})),Ud}async function NC(t){try{const n=(await qb()).transaction(Po),i=await n.objectStore(Po).get(Hb(t));return await n.done,i}catch(e){if(e instanceof En)hi.warn(e.message);else{const n=Wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(n.message)}}}async function l_(t,e){try{const i=(await qb()).transaction(Po,"readwrite");await i.objectStore(Po).put(e,Hb(t)),await i.done}catch(n){if(n instanceof En)hi.warn(n.message);else{const i=Wi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hi.warn(i.message)}}}function Hb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=1024,IC=30*24*60*60*1e3;class CC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xC(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=c_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r)?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=IC}),this._storage.overwrite(this._heartbeatsCache))}catch(i){hi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=c_(),{heartbeatsToSend:i,unsentEntries:s}=DC(this._heartbeatsCache.heartbeats),r=pu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return hi.warn(n),""}}}function c_(){return new Date().toISOString().substring(0,10)}function DC(t,e=RC){const n=[];let i=t.slice();for(const s of t){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),u_(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),u_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class xC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pb()?Vb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return l_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return l_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function u_(t){return pu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){On(new yn("platform-logger",e=>new G1(e),"PRIVATE")),On(new yn("heartbeat",e=>new CC(e),"PRIVATE")),on(Qf,a_,t),on(Qf,a_,"esm2017"),on("fire-js","")}kC("");function Tp(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function Fb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jC=Fb,Gb=new Xs("auth","Firebase",Fb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=new rh("@firebase/auth");function MC(t,...e){yu.logLevel<=le.WARN&&yu.warn(`Auth (${ha}): ${t}`,...e)}function Dc(t,...e){yu.logLevel<=le.ERROR&&yu.error(`Auth (${ha}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,...e){throw wp(t,...e)}function gn(t,...e){return wp(t,...e)}function bp(t,e,n){const i=Object.assign(Object.assign({},jC()),{[e]:n});return new Xs("auth","Firebase",i).create(e,{appName:t.name})}function ri(t){return bp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OC(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&un(t,"argument-error"),bp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Gb.create(t,...e)}function W(t,e,...n){if(!t)throw wp(e,...n)}function ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dc(e),new Error(e)}function di(t,e){t||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PC(){return h_()==="http:"||h_()==="https:"}function h_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PC()||Ob()||"connection"in navigator)?navigator.onLine:!0}function UC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n){this.shortDelay=e,this.longDelay=n,di(n>e,"Short delay should be less than long delay!"),this.isMobile=c1()||d1()}get(){return VC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t,e){di(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new hl(3e4,6e4);function as(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function os(t,e,n,i,s={}){return $b(t,s,async()=>{let r={},a={};i&&(e==="GET"?a=i:r={body:JSON.stringify(i)});const l=ul(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},r);return h1()||(h.referrerPolicy="no-referrer"),Kb.fetch()(Yb(t,t.config.apiHost,n,l),h)})}async function $b(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},LC),e);try{const s=new qC(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw oc(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw oc(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw oc(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw oc(t,"user-disabled",a);const f=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw bp(t,f,h);un(t,f)}}catch(s){if(s instanceof En)throw s;un(t,"network-request-failed",{message:String(s)})}}async function dl(t,e,n,i,s={}){const r=await os(t,e,n,i,s);return"mfaPendingCredential"in r&&un(t,"multi-factor-auth-required",{_serverResponse:r}),r}function Yb(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?Sp(t.config,s):`${t.config.apiScheme}://${s}`}function BC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(gn(this.auth,"network-request-failed")),zC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function oc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=gn(t,e,i);return s.customData._tokenResponse=n,s}function d_(t){return t!==void 0&&t.enterprise!==void 0}class HC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function FC(t,e){return os(t,"GET","/v2/recaptchaConfig",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t,e){return os(t,"POST","/v1/accounts:delete",e)}async function Qb(t,e){return os(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KC(t,e=!1){const n=xe(t),i=await n.getIdToken(e),s=Ap(i);W(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:fo(Ld(s.auth_time)),issuedAtTime:fo(Ld(s.iat)),expirationTime:fo(Ld(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Ld(t){return Number(t)*1e3}function Ap(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Dc("JWT malformed, contained fewer than 3 sections"),null;try{const s=xb(n);return s?JSON.parse(s):(Dc("Failed to decode base64 JWT payload"),null)}catch(s){return Dc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function f_(t){const e=Ap(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof En&&$C(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function $C({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fo(this.lastLoginAt),this.creationTime=fo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Vo(t,Qb(n,{idToken:i}));W(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const a=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?Wb(r.providerUserInfo):[],l=WC(t.providerData,a),c=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(l!=null&&l.length),f=c?h:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new Jf(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function QC(t){const e=xe(t);await vu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WC(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Wb(t){return t.map(e=>{var{providerId:n}=e,i=Tp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(t,e){const n=await $b(t,{},async()=>{const i=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,a=Yb(t,s,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Kb.fetch()(a,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZC(t,e){return os(t,"POST","/v2/accounts:revokeToken",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):f_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");const n=f_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await XC(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Or;return i&&(W(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(W(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(W(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Or,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=Tp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Jf(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Vo(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KC(this,e)}reload(){return QC(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await vu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(ri(this.auth));const e=await this.getIdToken();return await Vo(this,GC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,a,l,c,h,f;const p=(i=n.displayName)!==null&&i!==void 0?i:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,v=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,w=(a=n.photoURL)!==null&&a!==void 0?a:void 0,I=(l=n.tenantId)!==null&&l!==void 0?l:void 0,N=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,y=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:b,emailVerified:x,isAnonymous:P,providerData:V,stsTokenManager:S}=n;W(b&&S,e,"internal-error");const T=Or.fromJSON(this.name,S);W(typeof b=="string",e,"internal-error"),wi(p,e.name),wi(m,e.name),W(typeof x=="boolean",e,"internal-error"),W(typeof P=="boolean",e,"internal-error"),wi(v,e.name),wi(w,e.name),wi(I,e.name),wi(N,e.name),wi(y,e.name),wi(_,e.name);const R=new ti({uid:b,auth:e,email:m,emailVerified:x,displayName:p,isAnonymous:P,photoURL:w,phoneNumber:v,tenantId:I,stsTokenManager:T,createdAt:y,lastLoginAt:_});return V&&Array.isArray(V)&&(R.providerData=V.map(C=>Object.assign({},C))),N&&(R._redirectEventId=N),R}static async _fromIdTokenResponse(e,n,i=!1){const s=new Or;s.updateFromServerResponse(n);const r=new ti({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await vu(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];W(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?Wb(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new Or;l.updateFromIdToken(i);const c=new ti({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Jf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=new Map;function ni(t){di(t instanceof Function,"Expected a class definition");let e=m_.get(t);return e?(di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,m_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Xb.type="NONE";const p_=Xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t,e,n){return`firebase:${t}:${e}:${n}`}class Pr{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=xc(this.userKey,s.apiKey,r),this.fullPersistenceKey=xc("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Pr(ni(p_),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||ni(p_);const a=xc(i,e.config.apiKey,e.name);let l=null;for(const h of n)try{const f=await h._get(a);if(f){const p=ti._fromJSON(e,f);h!==r&&(l=p),r=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new Pr(r,e,i):(r=c[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new Pr(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iw(e))return"Blackberry";if(sw(e))return"Webos";if(Jb(e))return"Safari";if((e.includes("chrome/")||ew(e))&&!e.includes("edge/"))return"Chrome";if(nw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Zb(t=wt()){return/firefox\//i.test(t)}function Jb(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ew(t=wt()){return/crios\//i.test(t)}function tw(t=wt()){return/iemobile/i.test(t)}function nw(t=wt()){return/android/i.test(t)}function iw(t=wt()){return/blackberry/i.test(t)}function sw(t=wt()){return/webos/i.test(t)}function Np(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JC(t=wt()){var e;return Np(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eD(){return f1()&&document.documentMode===10}function rw(t=wt()){return Np(t)||nw(t)||sw(t)||iw(t)||/windows phone/i.test(t)||tw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e=[]){let n;switch(t){case"Browser":n=g_(wt());break;case"Worker":n=`${g_(wt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ha}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((a,l)=>{try{const c=e(r);a(c)}catch(c){l(c)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e={}){return os(t,"GET","/v2/passwordPolicy",as(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=6;class sD{constructor(e){var n,i,s,r;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:iD,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,r,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsUppercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y_(this),this.idTokenSubscription=new y_(this),this.beforeStateQueue=new tD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Pr.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qb(this,{idToken:e}),i=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(ri(this));const n=e?xe(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nD(this),n=new sD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ni(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await Pr.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&MC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ls(t){return xe(t)}class y_{constructor(e){this.auth=e,this.observer=null,this.addObserver=E1(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aD(t){ah=t}function ow(t){return ah.loadJS(t)}function oD(){return ah.recaptchaEnterpriseScript}function lD(){return ah.gapiScript}function cD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const uD="recaptcha-enterprise",hD="NO_RECAPTCHA";class dD{constructor(e){this.type=uD,this.auth=ls(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{FC(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new HC(c);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,a(h.siteKey)}}).catch(c=>{l(c)})})}function s(r,a,l){const c=window.grecaptcha;d_(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:e}).then(h=>{a(h)}).catch(()=>{a(hD)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,a)=>{i(this.auth).then(l=>{if(!n&&d_(window.grecaptcha))s(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=oD();c.length!==0&&(c+=l),ow(c).then(()=>{s(l,r,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function v_(t,e,n,i=!1){const s=new dD(t);let r;try{r=await s.verify(n)}catch{r=await s.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:r}):Object.assign(a,{captchaResponse:r}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function em(t,e,n,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await v_(t,e,n,n==="getOobCode");return i(t,r)}else return i(t,e).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await v_(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e){const n=Zs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Oo(r,e??{}))return s;un(s,"already-initialized")}return n.initialize({options:e})}function mD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function pD(t,e,n){const i=ls(t);W(i._canInitEmulator,i,"emulator-config-failed"),W(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=lw(e),{host:a,port:l}=gD(e),c=l===null?"":`:${l}`;i.config.emulator={url:`${r}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),yD()}function lw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gD(t){const e=lw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:__(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:__(a)}}}function __(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,n){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function vD(t,e){return os(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(t,e){return dl(t,"POST","/v1/accounts:signInWithPassword",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(t,e){return dl(t,"POST","/v1/accounts:signInWithEmailLink",as(t,e))}async function TD(t,e){return dl(t,"POST","/v1/accounts:signInWithEmailLink",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends Rp{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Uo(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Uo(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return em(e,n,"signInWithPassword",_D);case"emailLink":return ED(e,{email:this._email,oobCode:this._password});default:un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return em(e,i,"signUpPassword",vD);case"emailLink":return TD(e,{idToken:n,email:this._email,oobCode:this._password});default:un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vr(t,e){return dl(t,"POST","/v1/accounts:signInWithIdp",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="http://localhost";class zs extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=Tp(n,["providerId","signInMethod"]);if(!i||!s)return null;const a=new zs(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Vr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Vr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vr(e,n)}buildRequest(){const e={requestUri:bD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ul(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SD(t){const e=Ga(Ka(t)).link,n=e?Ga(Ka(e)).deep_link_id:null,i=Ga(Ka(t)).deep_link_id;return(i?Ga(Ka(i)).link:null)||i||n||e||t}class Ip{constructor(e){var n,i,s,r,a,l;const c=Ga(Ka(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(i=c.oobCode)!==null&&i!==void 0?i:null,p=wD((s=c.mode)!==null&&s!==void 0?s:null);W(h&&f&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=f,this.continueUrl=(r=c.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=SD(e);try{return new Ip(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.providerId=da.PROVIDER_ID}static credential(e,n){return Uo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Ip.parseLink(n);return W(i,"argument-error"),Uo._fromEmailAndCode(e,i.code,i.tenantId)}}da.PROVIDER_ID="password";da.EMAIL_PASSWORD_SIGN_IN_METHOD="password";da.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Cp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends fl{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zs._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Yn.credential(n,i)}catch{return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com";Yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends fl{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.GITHUB_SIGN_IN_METHOD="github.com";ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends fl{constructor(){super("twitter.com")}static credential(e,n){return zs._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e){return dl(t,"POST","/v1/accounts:signUp",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await ti._fromIdTokenResponse(e,i,s),a=E_(i);return new Bs({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=E_(i);return new Bs({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function E_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends En{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,_u.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new _u(e,n,i,s)}}function cw(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?_u._fromErrorAndOperation(t,r,e,i):r})}async function ND(t,e,n=!1){const i=await Vo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e,n=!1){const{auth:i}=t;if(mn(i.app))return Promise.reject(ri(i));const s="reauthenticate";try{const r=await Vo(t,cw(i,s,e,t),n);W(r.idToken,i,"internal-error");const a=Ap(r.idToken);W(a,i,"internal-error");const{sub:l}=a;return W(t.uid===l,i,"user-mismatch"),Bs._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&un(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uw(t,e,n=!1){if(mn(t.app))return Promise.reject(ri(t));const i="signIn",s=await cw(t,i,e),r=await Bs._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function ID(t,e){return uw(ls(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(t){const e=ls(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CD(t,e,n){if(mn(t.app))return Promise.reject(ri(t));const i=ls(t),a=await em(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AD).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&hw(t),c}),l=await Bs._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function DD(t,e,n){return mn(t.app)?Promise.reject(ri(t)):ID(xe(t),da.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&hw(t),i})}function xD(t,e,n,i){return xe(t).onIdTokenChanged(e,n,i)}function kD(t,e,n){return xe(t).beforeAuthStateChanged(e,n)}function jD(t,e,n,i){return xe(t).onAuthStateChanged(e,n,i)}function MD(t){return xe(t).signOut()}const Eu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Eu,"1"),this.storage.removeItem(Eu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=1e3,PD=10;class fw extends dw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);eD()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,PD):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},OD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fw.type="LOCAL";const VD=fw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends dw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mw.type="SESSION";const pw=mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new oh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),c=await UD(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,c)=>{const h=Dp("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(m.data.response);break;default:clearTimeout(f),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return window}function zD(t){kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function BD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function HD(){return gw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="firebaseLocalStorageDb",FD=1,Tu="firebaseLocalStorage",vw="fbase_key";class ml{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lh(t,e){return t.transaction([Tu],e?"readwrite":"readonly").objectStore(Tu)}function GD(){const t=indexedDB.deleteDatabase(yw);return new ml(t).toPromise()}function tm(){const t=indexedDB.open(yw,FD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Tu,{keyPath:vw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Tu)?e(i):(i.close(),await GD(),e(await tm()))})})}async function T_(t,e,n){const i=lh(t,!0).put({[vw]:e,value:n});return new ml(i).toPromise()}async function KD(t,e){const n=lh(t,!1).get(e),i=await new ml(n).toPromise();return i===void 0?null:i.value}function b_(t,e){const n=lh(t,!0).delete(e);return new ml(n).toPromise()}const $D=800,YD=3;class _w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>YD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=oh._getInstance(HD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await BD(),!this.activeServiceWorker)return;this.sender=new LD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tm();return await T_(e,Eu,"1"),await b_(e,Eu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>T_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>KD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>b_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=lh(s,!1).getAll();return new ml(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$D)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_w.type="LOCAL";const QD=_w;new hl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t,e){return e?ni(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WD(t){return uw(t.auth,new xp(t),t.bypassAuthState)}function XD(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),RD(n,new xp(t),t.bypassAuthState)}async function ZD(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),ND(n,new xp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WD;case"linkViaPopup":case"linkViaRedirect":return ZD;case"reauthViaPopup":case"reauthViaRedirect":return XD;default:un(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new hl(2e3,1e4);async function ex(t,e,n){if(mn(t.app))return Promise.reject(gn(t,"operation-not-supported-in-this-environment"));const i=ls(t);OC(t,e,Cp);const s=Ew(i,n);return new Ss(i,"signInViaPopup",e,s).executeNotNull()}class Ss extends Tw{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return W(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JD.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="pendingRedirect",kc=new Map;class nx extends Tw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=kc.get(this.auth._key());if(!e){try{const i=await ix(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}kc.set(this.auth._key(),e)}return this.bypassAuthState||kc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ix(t,e){const n=ax(e),i=rx(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function sx(t,e){kc.set(t._key(),e)}function rx(t){return ni(t._redirectPersistence)}function ax(t){return xc(tx,t.config.apiKey,t.name)}async function ox(t,e,n=!1){if(mn(t.app))return Promise.reject(ri(t));const i=ls(t),s=Ew(i,e),a=await new nx(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=10*60*1e3;class cx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ux(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!bw(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(gn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lx&&this.cachedEventUids.clear(),this.cachedEventUids.has(w_(e))}saveEventToCache(e){this.cachedEventUids.add(w_(e)),this.lastProcessedEventTime=Date.now()}}function w_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ux(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(t,e={}){return os(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fx=/^https?/;async function mx(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hx(t);for(const n of e)try{if(px(n))return}catch{}un(t,"unauthorized-domain")}function px(t){const e=Zf(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!fx.test(n))return!1;if(dx.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=new hl(3e4,6e4);function S_(){const t=kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yx(t){return new Promise((e,n)=>{var i,s,r;function a(){S_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S_(),n(gn(t,"network-request-failed"))},timeout:gx.get()})}if(!((s=(i=kn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=kn().gapi)===null||r===void 0)&&r.load)a();else{const l=cD("iframefcb");return kn()[l]=()=>{gapi.load?a():n(gn(t,"network-request-failed"))},ow(`${lD()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw jc=null,e})}let jc=null;function vx(t){return jc=jc||yx(t),jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new hl(5e3,15e3),Ex="__/auth/iframe",Tx="emulator/auth/iframe",bx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sx(t){const e=t.config;W(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sp(e,Tx):`https://${t.config.authDomain}/${Ex}`,i={apiKey:e.apiKey,appName:t.name,v:ha},s=wx.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${ul(i).slice(1)}`}async function Ax(t){const e=await vx(t),n=kn().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:Sx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bx,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=gn(t,"network-request-failed"),l=kn().setTimeout(()=>{r(a)},_x.get());function c(){kn().clearTimeout(l),s(i)}i.ping(c).then(c,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rx=500,Ix=600,Cx="_blank",Dx="http://localhost";class A_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xx(t,e,n,i=Rx,s=Ix){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Nx),{width:i.toString(),height:s.toString(),top:r,left:a}),h=wt().toLowerCase();n&&(l=ew(h)?Cx:n),Zb(h)&&(e=e||Dx,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[v,w])=>`${m}${v}=${w},`,"");if(JC(h)&&l!=="_self")return kx(e||"",l),new A_(null);const p=window.open(e||"",l,f);W(p,t,"popup-blocked");try{p.focus()}catch{}return new A_(p)}function kx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="__/auth/handler",Mx="emulator/auth/handler",Ox=encodeURIComponent("fac");async function N_(t,e,n,i,s,r){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ha,eventId:s};if(e instanceof Cp){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",_1(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof fl){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),h=c?`#${Ox}=${encodeURIComponent(c)}`:"";return`${Px(t)}?${ul(l).slice(1)}${h}`}function Px({config:t}){return t.emulator?Sp(t,Mx):`https://${t.authDomain}/${jx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class Vx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pw,this._completeRedirectFn=ox,this._overrideRedirectResult=sx}async _openPopup(e,n,i,s){var r;di((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await N_(e,n,i,Zf(),s);return xx(e,a,Dp())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await N_(e,n,i,Zf(),s);return zD(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(di(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Ax(e),i=new cx(e);return n.register("authEvent",s=>(W(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zd,{type:zd},s=>{var r;const a=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[zd];a!==void 0&&n(!!a),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rw()||Jb()||Np()}}const Ux=Vx;var R_="@firebase/auth",I_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bx(t){On(new yn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aw(t)},h=new rD(i,s,r,c);return mD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),On(new yn("auth-internal",e=>{const n=ls(e.getProvider("auth").getImmediate());return(i=>new Lx(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),on(R_,I_,zx(t)),on(R_,I_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=5*60,Hx=Mb("authIdTokenMaxAge")||qx;let C_=null;const Fx=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Hx)return;const s=n==null?void 0:n.token;C_!==s&&(C_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Gx(t=Ep()){const e=Zs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fD(t,{popupRedirectResolver:Ux,persistence:[QD,VD,pw]}),i=Mb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=Fx(r.toString());kD(n,a,()=>a(n.currentUser)),xD(n,l=>a(l))}}const s=kb("auth");return s&&pD(n,`http://${s}`),n}function Kx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=gn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",Kx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bx("Browser");var $x="firebase",Yx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on($x,Yx,"app");var D_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,ww;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function R(){}R.prototype=T.prototype,S.D=T.prototype,S.prototype=new R,S.prototype.constructor=S,S.C=function(C,D,k){for(var A=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)A[Q-2]=arguments[Q];return T.prototype[D].apply(C,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,R){R||(R=0);var C=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)C[D]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(D=0;16>D;++D)C[D]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=S.g[0],R=S.g[1],D=S.g[2];var k=S.g[3],A=T+(k^R&(D^k))+C[0]+3614090360&4294967295;T=R+(A<<7&4294967295|A>>>25),A=k+(D^T&(R^D))+C[1]+3905402710&4294967295,k=T+(A<<12&4294967295|A>>>20),A=D+(R^k&(T^R))+C[2]+606105819&4294967295,D=k+(A<<17&4294967295|A>>>15),A=R+(T^D&(k^T))+C[3]+3250441966&4294967295,R=D+(A<<22&4294967295|A>>>10),A=T+(k^R&(D^k))+C[4]+4118548399&4294967295,T=R+(A<<7&4294967295|A>>>25),A=k+(D^T&(R^D))+C[5]+1200080426&4294967295,k=T+(A<<12&4294967295|A>>>20),A=D+(R^k&(T^R))+C[6]+2821735955&4294967295,D=k+(A<<17&4294967295|A>>>15),A=R+(T^D&(k^T))+C[7]+4249261313&4294967295,R=D+(A<<22&4294967295|A>>>10),A=T+(k^R&(D^k))+C[8]+1770035416&4294967295,T=R+(A<<7&4294967295|A>>>25),A=k+(D^T&(R^D))+C[9]+2336552879&4294967295,k=T+(A<<12&4294967295|A>>>20),A=D+(R^k&(T^R))+C[10]+4294925233&4294967295,D=k+(A<<17&4294967295|A>>>15),A=R+(T^D&(k^T))+C[11]+2304563134&4294967295,R=D+(A<<22&4294967295|A>>>10),A=T+(k^R&(D^k))+C[12]+1804603682&4294967295,T=R+(A<<7&4294967295|A>>>25),A=k+(D^T&(R^D))+C[13]+4254626195&4294967295,k=T+(A<<12&4294967295|A>>>20),A=D+(R^k&(T^R))+C[14]+2792965006&4294967295,D=k+(A<<17&4294967295|A>>>15),A=R+(T^D&(k^T))+C[15]+1236535329&4294967295,R=D+(A<<22&4294967295|A>>>10),A=T+(D^k&(R^D))+C[1]+4129170786&4294967295,T=R+(A<<5&4294967295|A>>>27),A=k+(R^D&(T^R))+C[6]+3225465664&4294967295,k=T+(A<<9&4294967295|A>>>23),A=D+(T^R&(k^T))+C[11]+643717713&4294967295,D=k+(A<<14&4294967295|A>>>18),A=R+(k^T&(D^k))+C[0]+3921069994&4294967295,R=D+(A<<20&4294967295|A>>>12),A=T+(D^k&(R^D))+C[5]+3593408605&4294967295,T=R+(A<<5&4294967295|A>>>27),A=k+(R^D&(T^R))+C[10]+38016083&4294967295,k=T+(A<<9&4294967295|A>>>23),A=D+(T^R&(k^T))+C[15]+3634488961&4294967295,D=k+(A<<14&4294967295|A>>>18),A=R+(k^T&(D^k))+C[4]+3889429448&4294967295,R=D+(A<<20&4294967295|A>>>12),A=T+(D^k&(R^D))+C[9]+568446438&4294967295,T=R+(A<<5&4294967295|A>>>27),A=k+(R^D&(T^R))+C[14]+3275163606&4294967295,k=T+(A<<9&4294967295|A>>>23),A=D+(T^R&(k^T))+C[3]+4107603335&4294967295,D=k+(A<<14&4294967295|A>>>18),A=R+(k^T&(D^k))+C[8]+1163531501&4294967295,R=D+(A<<20&4294967295|A>>>12),A=T+(D^k&(R^D))+C[13]+2850285829&4294967295,T=R+(A<<5&4294967295|A>>>27),A=k+(R^D&(T^R))+C[2]+4243563512&4294967295,k=T+(A<<9&4294967295|A>>>23),A=D+(T^R&(k^T))+C[7]+1735328473&4294967295,D=k+(A<<14&4294967295|A>>>18),A=R+(k^T&(D^k))+C[12]+2368359562&4294967295,R=D+(A<<20&4294967295|A>>>12),A=T+(R^D^k)+C[5]+4294588738&4294967295,T=R+(A<<4&4294967295|A>>>28),A=k+(T^R^D)+C[8]+2272392833&4294967295,k=T+(A<<11&4294967295|A>>>21),A=D+(k^T^R)+C[11]+1839030562&4294967295,D=k+(A<<16&4294967295|A>>>16),A=R+(D^k^T)+C[14]+4259657740&4294967295,R=D+(A<<23&4294967295|A>>>9),A=T+(R^D^k)+C[1]+2763975236&4294967295,T=R+(A<<4&4294967295|A>>>28),A=k+(T^R^D)+C[4]+1272893353&4294967295,k=T+(A<<11&4294967295|A>>>21),A=D+(k^T^R)+C[7]+4139469664&4294967295,D=k+(A<<16&4294967295|A>>>16),A=R+(D^k^T)+C[10]+3200236656&4294967295,R=D+(A<<23&4294967295|A>>>9),A=T+(R^D^k)+C[13]+681279174&4294967295,T=R+(A<<4&4294967295|A>>>28),A=k+(T^R^D)+C[0]+3936430074&4294967295,k=T+(A<<11&4294967295|A>>>21),A=D+(k^T^R)+C[3]+3572445317&4294967295,D=k+(A<<16&4294967295|A>>>16),A=R+(D^k^T)+C[6]+76029189&4294967295,R=D+(A<<23&4294967295|A>>>9),A=T+(R^D^k)+C[9]+3654602809&4294967295,T=R+(A<<4&4294967295|A>>>28),A=k+(T^R^D)+C[12]+3873151461&4294967295,k=T+(A<<11&4294967295|A>>>21),A=D+(k^T^R)+C[15]+530742520&4294967295,D=k+(A<<16&4294967295|A>>>16),A=R+(D^k^T)+C[2]+3299628645&4294967295,R=D+(A<<23&4294967295|A>>>9),A=T+(D^(R|~k))+C[0]+4096336452&4294967295,T=R+(A<<6&4294967295|A>>>26),A=k+(R^(T|~D))+C[7]+1126891415&4294967295,k=T+(A<<10&4294967295|A>>>22),A=D+(T^(k|~R))+C[14]+2878612391&4294967295,D=k+(A<<15&4294967295|A>>>17),A=R+(k^(D|~T))+C[5]+4237533241&4294967295,R=D+(A<<21&4294967295|A>>>11),A=T+(D^(R|~k))+C[12]+1700485571&4294967295,T=R+(A<<6&4294967295|A>>>26),A=k+(R^(T|~D))+C[3]+2399980690&4294967295,k=T+(A<<10&4294967295|A>>>22),A=D+(T^(k|~R))+C[10]+4293915773&4294967295,D=k+(A<<15&4294967295|A>>>17),A=R+(k^(D|~T))+C[1]+2240044497&4294967295,R=D+(A<<21&4294967295|A>>>11),A=T+(D^(R|~k))+C[8]+1873313359&4294967295,T=R+(A<<6&4294967295|A>>>26),A=k+(R^(T|~D))+C[15]+4264355552&4294967295,k=T+(A<<10&4294967295|A>>>22),A=D+(T^(k|~R))+C[6]+2734768916&4294967295,D=k+(A<<15&4294967295|A>>>17),A=R+(k^(D|~T))+C[13]+1309151649&4294967295,R=D+(A<<21&4294967295|A>>>11),A=T+(D^(R|~k))+C[4]+4149444226&4294967295,T=R+(A<<6&4294967295|A>>>26),A=k+(R^(T|~D))+C[11]+3174756917&4294967295,k=T+(A<<10&4294967295|A>>>22),A=D+(T^(k|~R))+C[2]+718787259&4294967295,D=k+(A<<15&4294967295|A>>>17),A=R+(k^(D|~T))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+k&4294967295}i.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var R=T-this.blockSize,C=this.B,D=this.h,k=0;k<T;){if(D==0)for(;k<=R;)s(this,S,k),k+=this.blockSize;if(typeof S=="string"){for(;k<T;)if(C[D++]=S.charCodeAt(k++),D==this.blockSize){s(this,C),D=0;break}}else for(;k<T;)if(C[D++]=S[k++],D==this.blockSize){s(this,C),D=0;break}}this.h=D,this.o+=T},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var R=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=R&255,R/=256;for(this.u(S),S=Array(16),T=R=0;4>T;++T)for(var C=0;32>C;C+=8)S[R++]=this.g[T]>>>C&255;return S};function r(S,T){var R=l;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=T(S)}function a(S,T){this.h=T;for(var R=[],C=!0,D=S.length-1;0<=D;D--){var k=S[D]|0;C&&k==T||(R[D]=k,C=!1)}this.g=R}var l={};function c(S){return-128<=S&&128>S?r(S,function(T){return new a([T|0],0>T?-1:0)}):new a([S|0],0>S?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return N(h(-S));for(var T=[],R=1,C=0;S>=R;C++)T[C]=S/R|0,R*=4294967296;return new a(T,0)}function f(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return N(f(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(T,8)),C=p,D=0;D<S.length;D+=8){var k=Math.min(8,S.length-D),A=parseInt(S.substring(D,D+k),T);8>k?(k=h(Math.pow(T,k)),C=C.j(k).add(h(A))):(C=C.j(R),C=C.add(h(A)))}return C}var p=c(0),m=c(1),v=c(16777216);t=a.prototype,t.m=function(){if(I(this))return-N(this).m();for(var S=0,T=1,R=0;R<this.g.length;R++){var C=this.i(R);S+=(0<=C?C:4294967296+C)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(I(this))return"-"+N(this).toString(S);for(var T=h(Math.pow(S,6)),R=this,C="";;){var D=x(R,T).g;R=y(R,D.j(T));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(S);if(R=D,w(R))return k+C;for(;6>k.length;)k="0"+k;C=k+C}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function I(S){return S.h==-1}t.l=function(S){return S=y(this,S),I(S)?-1:w(S)?0:1};function N(S){for(var T=S.g.length,R=[],C=0;C<T;C++)R[C]=~S.g[C];return new a(R,~S.h).add(m)}t.abs=function(){return I(this)?N(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),R=[],C=0,D=0;D<=T;D++){var k=C+(this.i(D)&65535)+(S.i(D)&65535),A=(k>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);C=A>>>16,k&=65535,A&=65535,R[D]=A<<16|k}return new a(R,R[R.length-1]&-2147483648?-1:0)};function y(S,T){return S.add(N(T))}t.j=function(S){if(w(this)||w(S))return p;if(I(this))return I(S)?N(this).j(N(S)):N(N(this).j(S));if(I(S))return N(this.j(N(S)));if(0>this.l(v)&&0>S.l(v))return h(this.m()*S.m());for(var T=this.g.length+S.g.length,R=[],C=0;C<2*T;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<S.g.length;D++){var k=this.i(C)>>>16,A=this.i(C)&65535,Q=S.i(D)>>>16,F=S.i(D)&65535;R[2*C+2*D]+=A*F,_(R,2*C+2*D),R[2*C+2*D+1]+=k*F,_(R,2*C+2*D+1),R[2*C+2*D+1]+=A*Q,_(R,2*C+2*D+1),R[2*C+2*D+2]+=k*Q,_(R,2*C+2*D+2)}for(C=0;C<T;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=T;C<2*T;C++)R[C]=0;return new a(R,0)};function _(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function b(S,T){this.g=S,this.h=T}function x(S,T){if(w(T))throw Error("division by zero");if(w(S))return new b(p,p);if(I(S))return T=x(N(S),T),new b(N(T.g),N(T.h));if(I(T))return T=x(S,N(T)),new b(N(T.g),T.h);if(30<S.g.length){if(I(S)||I(T))throw Error("slowDivide_ only works with positive integers.");for(var R=m,C=T;0>=C.l(S);)R=P(R),C=P(C);var D=V(R,1),k=V(C,1);for(C=V(C,2),R=V(R,2);!w(C);){var A=k.add(C);0>=A.l(S)&&(D=D.add(R),k=A),C=V(C,1),R=V(R,1)}return T=y(S,D.j(T)),new b(D,T)}for(D=p;0<=S.l(T);){for(R=Math.max(1,Math.floor(S.m()/T.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),k=h(R),A=k.j(T);I(A)||0<A.l(S);)R-=C,k=h(R),A=k.j(T);w(k)&&(k=m),D=D.add(k),S=y(S,A)}return new b(D,S)}t.A=function(S){return x(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),R=[],C=0;C<T;C++)R[C]=this.i(C)&S.i(C);return new a(R,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),R=[],C=0;C<T;C++)R[C]=this.i(C)|S.i(C);return new a(R,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),R=[],C=0;C<T;C++)R[C]=this.i(C)^S.i(C);return new a(R,this.h^S.h)};function P(S){for(var T=S.g.length+1,R=[],C=0;C<T;C++)R[C]=S.i(C)<<1|S.i(C-1)>>>31;return new a(R,S.h)}function V(S,T){var R=T>>5;T%=32;for(var C=S.g.length-R,D=[],k=0;k<C;k++)D[k]=0<T?S.i(k+R)>>>T|S.i(k+R+1)<<32-T:S.i(k+R);return new a(D,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ww=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Ms=a}).apply(typeof D_<"u"?D_:typeof self<"u"?self:typeof window<"u"?window:{});var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sw,$a,Aw,Mc,nm,Nw,Rw,Iw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,d,g){return o==Array.prototype||o==Object.prototype||(o[d]=g.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof lc=="object"&&lc];for(var d=0;d<o.length;++d){var g=o[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function s(o,d){if(d)e:{var g=i;o=o.split(".");for(var E=0;E<o.length-1;E++){var j=o[E];if(!(j in g))break e;g=g[j]}o=o[o.length-1],E=g[o],d=d(E),d!=E&&d!=null&&e(g,o,{configurable:!0,writable:!0,value:d})}}function r(o,d){o instanceof String&&(o+="");var g=0,E=!1,j={next:function(){if(!E&&g<o.length){var O=g++;return{value:d(O,o[O]),done:!1}}return E=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(o){return o||function(){return r(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var d=typeof o;return d=d!="object"?d:o?Array.isArray(o)?"array":d:"null",d=="array"||d=="object"&&typeof o.length=="number"}function h(o){var d=typeof o;return d=="object"&&o!=null||d=="function"}function f(o,d,g){return o.call.apply(o.bind,arguments)}function p(o,d,g){if(!o)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,E),o.apply(d,j)}}return function(){return o.apply(d,arguments)}}function m(o,d,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function v(o,d){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),o.apply(this,E)}}function w(o,d){function g(){}g.prototype=d.prototype,o.aa=d.prototype,o.prototype=new g,o.prototype.constructor=o,o.Qb=function(E,j,O){for(var H=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)H[Te-2]=arguments[Te];return d.prototype[j].apply(E,H)}}function I(o){const d=o.length;if(0<d){const g=Array(d);for(let E=0;E<d;E++)g[E]=o[E];return g}return[]}function N(o,d){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(c(E)){const j=o.length||0,O=E.length||0;o.length=j+O;for(let H=0;H<O;H++)o[j+H]=E[H]}else o.push(E)}}class y{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(o){return/^[\s\xa0]*$/.test(o)}function b(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var P=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function V(o,d,g){for(const E in o)d.call(g,o[E],E,o)}function S(o,d){for(const g in o)d.call(void 0,o[g],g,o)}function T(o){const d={};for(const g in o)d[g]=o[g];return d}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(o,d){let g,E;for(let j=1;j<arguments.length;j++){E=arguments[j];for(g in E)o[g]=E[g];for(let O=0;O<R.length;O++)g=R[O],Object.prototype.hasOwnProperty.call(E,g)&&(o[g]=E[g])}}function D(o){var d=1;o=o.split(":");const g=[];for(;0<d&&o.length;)g.push(o.shift()),d--;return o.length&&g.push(o.join(":")),g}function k(o){l.setTimeout(()=>{throw o},0)}function A(){var o=ie;let d=null;return o.g&&(d=o.g,o.g=o.g.next,o.g||(o.h=null),d.next=null),d}class Q{constructor(){this.h=this.g=null}add(d,g){const E=F.get();E.set(d,g),this.h?this.h.next=E:this.g=E,this.h=E}}var F=new y(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let q,K=!1,ie=new Q,Ee=()=>{const o=l.Promise.resolve(void 0);q=()=>{o.then(wn)}};var wn=()=>{for(var o;o=A();){try{o.h.call(o.g)}catch(g){k(g)}var d=F;d.j(o),100>d.h&&(d.h++,o.next=d.g,d.g=o)}K=!1};function ze(){this.s=this.s,this.C=this.C}ze.prototype.s=!1,ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(o,d){this.type=o,this.g=this.target=d,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var Bn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,d=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const g=()=>{};l.addEventListener("test",g,d),l.removeEventListener("test",g,d)}catch{}return o}();function Sn(o,d){if(Be.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var g=this.type=o.type,E=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=d,d=o.relatedTarget){if(P){e:{try{x(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else g=="mouseover"?d=o.fromElement:g=="mouseout"&&(d=o.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:TA[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Sn.aa.h.call(this)}}w(Sn,Be);var TA={2:"touch",3:"pen",4:"mouse"};Sn.prototype.h=function(){Sn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Rl="closure_listenable_"+(1e6*Math.random()|0),bA=0;function wA(o,d,g,E,j){this.listener=o,this.proxy=null,this.src=d,this.type=g,this.capture=!!E,this.ha=j,this.key=++bA,this.da=this.fa=!1}function Il(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Cl(o){this.src=o,this.g={},this.h=0}Cl.prototype.add=function(o,d,g,E,j){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var H=xh(o,d,E,j);return-1<H?(d=o[H],g||(d.fa=!1)):(d=new wA(d,this.src,O,!!E,j),d.fa=g,o.push(d)),d};function Dh(o,d){var g=d.type;if(g in o.g){var E=o.g[g],j=Array.prototype.indexOf.call(E,d,void 0),O;(O=0<=j)&&Array.prototype.splice.call(E,j,1),O&&(Il(d),o.g[g].length==0&&(delete o.g[g],o.h--))}}function xh(o,d,g,E){for(var j=0;j<o.length;++j){var O=o[j];if(!O.da&&O.listener==d&&O.capture==!!g&&O.ha==E)return j}return-1}var kh="closure_lm_"+(1e6*Math.random()|0),jh={};function Cg(o,d,g,E,j){if(Array.isArray(d)){for(var O=0;O<d.length;O++)Cg(o,d[O],g,E,j);return null}return g=kg(g),o&&o[Rl]?o.K(d,g,h(E)?!!E.capture:!1,j):SA(o,d,g,!1,E,j)}function SA(o,d,g,E,j,O){if(!d)throw Error("Invalid event type");var H=h(j)?!!j.capture:!!j,Te=Oh(o);if(Te||(o[kh]=Te=new Cl(o)),g=Te.add(d,g,E,H,O),g.proxy)return g;if(E=AA(),g.proxy=E,E.src=o,E.listener=g,o.addEventListener)Bn||(j=H),j===void 0&&(j=!1),o.addEventListener(d.toString(),E,j);else if(o.attachEvent)o.attachEvent(xg(d.toString()),E);else if(o.addListener&&o.removeListener)o.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function AA(){function o(g){return d.call(o.src,o.listener,g)}const d=NA;return o}function Dg(o,d,g,E,j){if(Array.isArray(d))for(var O=0;O<d.length;O++)Dg(o,d[O],g,E,j);else E=h(E)?!!E.capture:!!E,g=kg(g),o&&o[Rl]?(o=o.i,d=String(d).toString(),d in o.g&&(O=o.g[d],g=xh(O,g,E,j),-1<g&&(Il(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete o.g[d],o.h--)))):o&&(o=Oh(o))&&(d=o.g[d.toString()],o=-1,d&&(o=xh(d,g,E,j)),(g=-1<o?d[o]:null)&&Mh(g))}function Mh(o){if(typeof o!="number"&&o&&!o.da){var d=o.src;if(d&&d[Rl])Dh(d.i,o);else{var g=o.type,E=o.proxy;d.removeEventListener?d.removeEventListener(g,E,o.capture):d.detachEvent?d.detachEvent(xg(g),E):d.addListener&&d.removeListener&&d.removeListener(E),(g=Oh(d))?(Dh(g,o),g.h==0&&(g.src=null,d[kh]=null)):Il(o)}}}function xg(o){return o in jh?jh[o]:jh[o]="on"+o}function NA(o,d){if(o.da)o=!0;else{d=new Sn(d,this);var g=o.listener,E=o.ha||o.src;o.fa&&Mh(o),o=g.call(E,d)}return o}function Oh(o){return o=o[kh],o instanceof Cl?o:null}var Ph="__closure_events_fn_"+(1e9*Math.random()>>>0);function kg(o){return typeof o=="function"?o:(o[Ph]||(o[Ph]=function(d){return o.handleEvent(d)}),o[Ph])}function ft(){ze.call(this),this.i=new Cl(this),this.M=this,this.F=null}w(ft,ze),ft.prototype[Rl]=!0,ft.prototype.removeEventListener=function(o,d,g,E){Dg(this,o,d,g,E)};function At(o,d){var g,E=o.F;if(E)for(g=[];E;E=E.F)g.push(E);if(o=o.M,E=d.type||d,typeof d=="string")d=new Be(d,o);else if(d instanceof Be)d.target=d.target||o;else{var j=d;d=new Be(E,o),C(d,j)}if(j=!0,g)for(var O=g.length-1;0<=O;O--){var H=d.g=g[O];j=Dl(H,E,!0,d)&&j}if(H=d.g=o,j=Dl(H,E,!0,d)&&j,j=Dl(H,E,!1,d)&&j,g)for(O=0;O<g.length;O++)H=d.g=g[O],j=Dl(H,E,!1,d)&&j}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var o=this.i,d;for(d in o.g){for(var g=o.g[d],E=0;E<g.length;E++)Il(g[E]);delete o.g[d],o.h--}}this.F=null},ft.prototype.K=function(o,d,g,E){return this.i.add(String(o),d,!1,g,E)},ft.prototype.L=function(o,d,g,E){return this.i.add(String(o),d,!0,g,E)};function Dl(o,d,g,E){if(d=o.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,O=0;O<d.length;++O){var H=d[O];if(H&&!H.da&&H.capture==g){var Te=H.listener,it=H.ha||H.src;H.fa&&Dh(o.i,H),j=Te.call(it,E)!==!1&&j}}return j&&!E.defaultPrevented}function jg(o,d,g){if(typeof o=="function")g&&(o=m(o,g));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(o,d||0)}function Mg(o){o.g=jg(()=>{o.g=null,o.i&&(o.i=!1,Mg(o))},o.l);const d=o.h;o.h=null,o.m.apply(null,d)}class RA extends ze{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Mg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ya(o){ze.call(this),this.h=o,this.g={}}w(ya,ze);var Og=[];function Pg(o){V(o.g,function(d,g){this.g.hasOwnProperty(g)&&Mh(d)},o),o.g={}}ya.prototype.N=function(){ya.aa.N.call(this),Pg(this)},ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vh=l.JSON.stringify,IA=l.JSON.parse,CA=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Uh(){}Uh.prototype.h=null;function Vg(o){return o.h||(o.h=o.i())}function Ug(){}var va={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lh(){Be.call(this,"d")}w(Lh,Be);function zh(){Be.call(this,"c")}w(zh,Be);var ds={},Lg=null;function xl(){return Lg=Lg||new ft}ds.La="serverreachability";function zg(o){Be.call(this,ds.La,o)}w(zg,Be);function _a(o){const d=xl();At(d,new zg(d))}ds.STAT_EVENT="statevent";function Bg(o,d){Be.call(this,ds.STAT_EVENT,o),this.stat=d}w(Bg,Be);function Nt(o){const d=xl();At(d,new Bg(d,o))}ds.Ma="timingevent";function qg(o,d){Be.call(this,ds.Ma,o),this.size=d}w(qg,Be);function Ea(o,d){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},d)}function Ta(){this.g=!0}Ta.prototype.xa=function(){this.g=!1};function DA(o,d,g,E,j,O){o.info(function(){if(o.g)if(O)for(var H="",Te=O.split("&"),it=0;it<Te.length;it++){var he=Te[it].split("=");if(1<he.length){var mt=he[0];he=he[1];var pt=mt.split("_");H=2<=pt.length&&pt[1]=="type"?H+(mt+"="+he+"&"):H+(mt+"=redacted&")}}else H=null;else H=O;return"XMLHTTP REQ ("+E+") [attempt "+j+"]: "+d+`
`+g+`
`+H})}function xA(o,d,g,E,j,O,H){o.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+j+"]: "+d+`
`+g+`
`+O+" "+H})}function tr(o,d,g,E){o.info(function(){return"XMLHTTP TEXT ("+d+"): "+jA(o,g)+(E?" "+E:"")})}function kA(o,d){o.info(function(){return"TIMEOUT: "+d})}Ta.prototype.info=function(){};function jA(o,d){if(!o.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(o=0;o<g.length;o++)if(Array.isArray(g[o])){var E=g[o];if(!(2>E.length)){var j=E[1];if(Array.isArray(j)&&!(1>j.length)){var O=j[0];if(O!="noop"&&O!="stop"&&O!="close")for(var H=1;H<j.length;H++)j[H]=""}}}}return Vh(g)}catch{return d}}var kl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bh;function jl(){}w(jl,Uh),jl.prototype.g=function(){return new XMLHttpRequest},jl.prototype.i=function(){return{}},Bh=new jl;function vi(o,d,g,E){this.j=o,this.i=d,this.l=g,this.R=E||1,this.U=new ya(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fg}function Fg(){this.i=null,this.g="",this.h=!1}var Gg={},qh={};function Hh(o,d,g){o.L=1,o.v=Vl(qn(d)),o.m=g,o.P=!0,Kg(o,null)}function Kg(o,d){o.F=Date.now(),Ml(o),o.A=qn(o.v);var g=o.A,E=o.R;Array.isArray(E)||(E=[String(E)]),ay(g.i,"t",E),o.C=0,g=o.j.J,o.h=new Fg,o.g=Sy(o.j,g?d:null,!o.m),0<o.O&&(o.M=new RA(m(o.Y,o,o.g),o.O)),d=o.U,g=o.g,E=o.ca;var j="readystatechange";Array.isArray(j)||(j&&(Og[0]=j.toString()),j=Og);for(var O=0;O<j.length;O++){var H=Cg(g,j[O],E||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=o.H?T(o.H):{},o.m?(o.u||(o.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,d)):(o.u="GET",o.g.ea(o.A,o.u,null,d)),_a(),DA(o.i,o.u,o.A,o.l,o.R,o.m)}vi.prototype.ca=function(o){o=o.target;const d=this.M;d&&Hn(o)==3?d.j():this.Y(o)},vi.prototype.Y=function(o){try{if(o==this.g)e:{const pt=Hn(this.g);var d=this.g.Ba();const sr=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||fy(this.g)))){this.J||pt!=4||d==7||(d==8||0>=sr?_a(3):_a(2)),Fh(this);var g=this.g.Z();this.X=g;t:if($g(this)){var E=fy(this.g);o="";var j=E.length,O=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fs(this),ba(this);var H="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,o+=this.h.i.decode(E[d],{stream:!(O&&d==j-1)});E.length=0,this.h.g+=o,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=g==200,xA(this.i,this.u,this.A,this.l,this.R,pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,it=this.g;if((Te=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Te)){var he=Te;break t}}he=null}if(g=he)tr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gh(this,g);else{this.o=!1,this.s=3,Nt(12),fs(this),ba(this);break e}}if(this.P){g=!0;let dn;for(;!this.J&&this.C<H.length;)if(dn=MA(this,H),dn==qh){pt==4&&(this.s=4,Nt(14),g=!1),tr(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==Gg){this.s=4,Nt(15),tr(this.i,this.l,H,"[Invalid Chunk]"),g=!1;break}else tr(this.i,this.l,dn,null),Gh(this,dn);if($g(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||H.length!=0||this.h.h||(this.s=1,Nt(16),g=!1),this.o=this.o&&g,!g)tr(this.i,this.l,H,"[Invalid Chunked Response]"),fs(this),ba(this);else if(0<H.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Xh(mt),mt.M=!0,Nt(11))}}else tr(this.i,this.l,H,null),Gh(this,H);pt==4&&fs(this),this.o&&!this.J&&(pt==4?Ey(this.j,this):(this.o=!1,Ml(this)))}else XA(this.g),g==400&&0<H.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),fs(this),ba(this)}}}catch{}finally{}};function $g(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function MA(o,d){var g=o.C,E=d.indexOf(`
`,g);return E==-1?qh:(g=Number(d.substring(g,E)),isNaN(g)?Gg:(E+=1,E+g>d.length?qh:(d=d.slice(E,E+g),o.C=E+g,d)))}vi.prototype.cancel=function(){this.J=!0,fs(this)};function Ml(o){o.S=Date.now()+o.I,Yg(o,o.I)}function Yg(o,d){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ea(m(o.ba,o),d)}function Fh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}vi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(kA(this.i,this.A),this.L!=2&&(_a(),Nt(17)),fs(this),this.s=2,ba(this)):Yg(this,this.S-o)};function ba(o){o.j.G==0||o.J||Ey(o.j,o)}function fs(o){Fh(o);var d=o.M;d&&typeof d.ma=="function"&&d.ma(),o.M=null,Pg(o.U),o.g&&(d=o.g,o.g=null,d.abort(),d.ma())}function Gh(o,d){try{var g=o.j;if(g.G!=0&&(g.g==o||Kh(g.h,o))){if(!o.K&&Kh(g.h,o)&&g.G==3){try{var E=g.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var j=E;if(j[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<o.F)Hl(g),Bl(g);else break e;Wh(g),Nt(18)}}else g.za=j[1],0<g.za-g.T&&37500>j[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ea(m(g.Za,g),6e3));if(1>=Xg(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ps(g,11)}else if((o.K||g.g==o)&&Hl(g),!_(d))for(j=g.Da.g.parse(d),d=0;d<j.length;d++){let he=j[d];if(g.T=he[0],he=he[1],g.G==2)if(he[0]=="c"){g.K=he[1],g.ia=he[2];const mt=he[3];mt!=null&&(g.la=mt,g.j.info("VER="+g.la));const pt=he[4];pt!=null&&(g.Aa=pt,g.j.info("SVER="+g.Aa));const sr=he[5];sr!=null&&typeof sr=="number"&&0<sr&&(E=1.5*sr,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const dn=o.g;if(dn){const Gl=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gl){var O=E.h;O.g||Gl.indexOf("spdy")==-1&&Gl.indexOf("quic")==-1&&Gl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&($h(O,O.h),O.h=null))}if(E.D){const Zh=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zh&&(E.ya=Zh,Se(E.I,E.D,Zh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-o.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var H=o;if(E.qa=wy(E,E.J?E.ia:null,E.W),H.K){Zg(E.h,H);var Te=H,it=E.L;it&&(Te.I=it),Te.B&&(Fh(Te),Ml(Te)),E.g=H}else vy(E);0<g.i.length&&ql(g)}else he[0]!="stop"&&he[0]!="close"||ps(g,7);else g.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?ps(g,7):Qh(g):he[0]!="noop"&&g.l&&g.l.ta(he),g.v=0)}}_a(4)}catch{}}var OA=class{constructor(o,d){this.g=o,this.map=d}};function Qg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Xg(o){return o.h?1:o.g?o.g.size:0}function Kh(o,d){return o.h?o.h==d:o.g?o.g.has(d):!1}function $h(o,d){o.g?o.g.add(d):o.h=d}function Zg(o,d){o.h&&o.h==d?o.h=null:o.g&&o.g.has(d)&&o.g.delete(d)}Qg.prototype.cancel=function(){if(this.i=Jg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Jg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let d=o.i;for(const g of o.g.values())d=d.concat(g.D);return d}return I(o.i)}function PA(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var d=[],g=o.length,E=0;E<g;E++)d.push(o[E]);return d}d=[],g=0;for(E in o)d[g++]=o[E];return d}function VA(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var d=[];o=o.length;for(var g=0;g<o;g++)d.push(g);return d}d=[],g=0;for(const E in o)d[g++]=E;return d}}}function ey(o,d){if(o.forEach&&typeof o.forEach=="function")o.forEach(d,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,d,void 0);else for(var g=VA(o),E=PA(o),j=E.length,O=0;O<j;O++)d.call(void 0,E[O],g&&g[O],o)}var ty=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UA(o,d){if(o){o=o.split("&");for(var g=0;g<o.length;g++){var E=o[g].indexOf("="),j=null;if(0<=E){var O=o[g].substring(0,E);j=o[g].substring(E+1)}else O=o[g];d(O,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function ms(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ms){this.h=o.h,Ol(this,o.j),this.o=o.o,this.g=o.g,Pl(this,o.s),this.l=o.l;var d=o.i,g=new Aa;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),ny(this,g),this.m=o.m}else o&&(d=String(o).match(ty))?(this.h=!1,Ol(this,d[1]||"",!0),this.o=wa(d[2]||""),this.g=wa(d[3]||"",!0),Pl(this,d[4]),this.l=wa(d[5]||"",!0),ny(this,d[6]||"",!0),this.m=wa(d[7]||"")):(this.h=!1,this.i=new Aa(null,this.h))}ms.prototype.toString=function(){var o=[],d=this.j;d&&o.push(Sa(d,iy,!0),":");var g=this.g;return(g||d=="file")&&(o.push("//"),(d=this.o)&&o.push(Sa(d,iy,!0),"@"),o.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&o.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&o.push("/"),o.push(Sa(g,g.charAt(0)=="/"?BA:zA,!0))),(g=this.i.toString())&&o.push("?",g),(g=this.m)&&o.push("#",Sa(g,HA)),o.join("")};function qn(o){return new ms(o)}function Ol(o,d,g){o.j=g?wa(d,!0):d,o.j&&(o.j=o.j.replace(/:$/,""))}function Pl(o,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);o.s=d}else o.s=null}function ny(o,d,g){d instanceof Aa?(o.i=d,FA(o.i,o.h)):(g||(d=Sa(d,qA)),o.i=new Aa(d,o.h))}function Se(o,d,g){o.i.set(d,g)}function Vl(o){return Se(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function wa(o,d){return o?d?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Sa(o,d,g){return typeof o=="string"?(o=encodeURI(o).replace(d,LA),g&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function LA(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var iy=/[#\/\?@]/g,zA=/[#\?:]/g,BA=/[#\?]/g,qA=/[#\?@]/g,HA=/#/g;function Aa(o,d){this.h=this.g=null,this.i=o||null,this.j=!!d}function _i(o){o.g||(o.g=new Map,o.h=0,o.i&&UA(o.i,function(d,g){o.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}t=Aa.prototype,t.add=function(o,d){_i(this),this.i=null,o=nr(this,o);var g=this.g.get(o);return g||this.g.set(o,g=[]),g.push(d),this.h+=1,this};function sy(o,d){_i(o),d=nr(o,d),o.g.has(d)&&(o.i=null,o.h-=o.g.get(d).length,o.g.delete(d))}function ry(o,d){return _i(o),d=nr(o,d),o.g.has(d)}t.forEach=function(o,d){_i(this),this.g.forEach(function(g,E){g.forEach(function(j){o.call(d,j,E,this)},this)},this)},t.na=function(){_i(this);const o=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let E=0;E<d.length;E++){const j=o[E];for(let O=0;O<j.length;O++)g.push(d[E])}return g},t.V=function(o){_i(this);let d=[];if(typeof o=="string")ry(this,o)&&(d=d.concat(this.g.get(nr(this,o))));else{o=Array.from(this.g.values());for(let g=0;g<o.length;g++)d=d.concat(o[g])}return d},t.set=function(o,d){return _i(this),this.i=null,o=nr(this,o),ry(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[d]),this.h+=1,this},t.get=function(o,d){return o?(o=this.V(o),0<o.length?String(o[0]):d):d};function ay(o,d,g){sy(o,d),0<g.length&&(o.i=null,o.g.set(nr(o,d),I(g)),o.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var E=d[g];const O=encodeURIComponent(String(E)),H=this.V(E);for(E=0;E<H.length;E++){var j=O;H[E]!==""&&(j+="="+encodeURIComponent(String(H[E]))),o.push(j)}}return this.i=o.join("&")};function nr(o,d){return d=String(d),o.j&&(d=d.toLowerCase()),d}function FA(o,d){d&&!o.j&&(_i(o),o.i=null,o.g.forEach(function(g,E){var j=E.toLowerCase();E!=j&&(sy(this,E),ay(this,j,g))},o)),o.j=d}function GA(o,d){const g=new Ta;if(l.Image){const E=new Image;E.onload=v(Ei,g,"TestLoadImage: loaded",!0,d,E),E.onerror=v(Ei,g,"TestLoadImage: error",!1,d,E),E.onabort=v(Ei,g,"TestLoadImage: abort",!1,d,E),E.ontimeout=v(Ei,g,"TestLoadImage: timeout",!1,d,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=o}else d(!1)}function KA(o,d){const g=new Ta,E=new AbortController,j=setTimeout(()=>{E.abort(),Ei(g,"TestPingServer: timeout",!1,d)},1e4);fetch(o,{signal:E.signal}).then(O=>{clearTimeout(j),O.ok?Ei(g,"TestPingServer: ok",!0,d):Ei(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Ei(g,"TestPingServer: error",!1,d)})}function Ei(o,d,g,E,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),E(g)}catch{}}function $A(){this.g=new CA}function YA(o,d,g){const E=g||"";try{ey(o,function(j,O){let H=j;h(j)&&(H=Vh(j)),d.push(E+O+"="+encodeURIComponent(H))})}catch(j){throw d.push(E+"type="+encodeURIComponent("_badmap")),j}}function Ul(o){this.l=o.Ub||null,this.j=o.eb||!1}w(Ul,Uh),Ul.prototype.g=function(){return new Ll(this.l,this.j)},Ul.prototype.i=function(o){return function(){return o}}({});function Ll(o,d){ft.call(this),this.D=o,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ll,ft),t=Ll.prototype,t.open=function(o,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=d,this.readyState=1,Ra(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(d.body=o),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Na(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ra(this)),this.g&&(this.readyState=3,Ra(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oy(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function oy(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var d=o.value?o.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!o.done}))&&(this.response=this.responseText+=d)}o.done?Na(this):Ra(this),this.readyState==3&&oy(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Na(this))},t.Qa=function(o){this.g&&(this.response=o,Na(this))},t.ga=function(){this.g&&Na(this)};function Na(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ra(o)}t.setRequestHeader=function(o,d){this.u.append(o,d)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,o.push(g[0]+": "+g[1]),g=d.next();return o.join(`\r
`)};function Ra(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ly(o){let d="";return V(o,function(g,E){d+=E,d+=":",d+=g,d+=`\r
`}),d}function Yh(o,d,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=ly(g),typeof o=="string"?g!=null&&encodeURIComponent(String(g)):Se(o,d,g))}function je(o){ft.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(je,ft);var QA=/^https?$/i,WA=["POST","PUT"];t=je.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,d,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);d=d?d.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bh.g(),this.v=this.o?Vg(this.o):Vg(Bh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(o),!0),this.B=!1}catch(O){cy(this,O);return}if(o=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var j in E)g.set(j,E[j]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const O of E.keys())g.set(O,E.get(O));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),j=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(WA,d,void 0))||E||j||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,H]of g)this.g.setRequestHeader(O,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dy(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){cy(this,O)}};function cy(o,d){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=d,o.m=5,uy(o),zl(o)}function uy(o){o.A||(o.A=!0,At(o,"complete"),At(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,At(this,"complete"),At(this,"abort"),zl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zl(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?hy(this):this.bb())},t.bb=function(){hy(this)};function hy(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Hn(o)!=4||o.Z()!=2)){if(o.u&&Hn(o)==4)jg(o.Ea,0,o);else if(At(o,"readystatechange"),Hn(o)==4){o.h=!1;try{const H=o.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var E;if(E=H===0){var j=String(o.D).match(ty)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),E=!QA.test(j?j.toLowerCase():"")}g=E}if(g)At(o,"complete"),At(o,"success");else{o.m=6;try{var O=2<Hn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",uy(o)}}finally{zl(o)}}}}function zl(o,d){if(o.g){dy(o);const g=o.g,E=o.v[0]?()=>{}:null;o.g=null,o.v=null,d||At(o,"ready");try{g.onreadystatechange=E}catch{}}}function dy(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Hn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var d=this.g.responseText;return o&&d.indexOf(o)==0&&(d=d.substring(o.length)),IA(d)}};function fy(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function XA(o){const d={};o=(o.g&&2<=Hn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<o.length;E++){if(_(o[E]))continue;var g=D(o[E]);const j=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=d[j]||[];d[j]=O,O.push(g)}S(d,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ia(o,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[o]||d}function my(o){this.Aa=0,this.i=[],this.j=new Ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ia("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ia("baseRetryDelayMs",5e3,o),this.cb=Ia("retryDelaySeedMs",1e4,o),this.Wa=Ia("forwardChannelMaxRetries",2,o),this.wa=Ia("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Qg(o&&o.concurrentRequestLimit),this.Da=new $A,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=my.prototype,t.la=8,t.G=1,t.connect=function(o,d,g,E){Nt(0),this.W=o,this.H=d||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=wy(this,null,this.W),ql(this)};function Qh(o){if(py(o),o.G==3){var d=o.U++,g=qn(o.I);if(Se(g,"SID",o.K),Se(g,"RID",d),Se(g,"TYPE","terminate"),Ca(o,g),d=new vi(o,o.j,d),d.L=2,d.v=Vl(qn(g)),g=!1,l.navigator&&l.navigator.sendBeacon)try{g=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&l.Image&&(new Image().src=d.v,g=!0),g||(d.g=Sy(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ml(d)}by(o)}function Bl(o){o.g&&(Xh(o),o.g.cancel(),o.g=null)}function py(o){Bl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Hl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ql(o){if(!Wg(o.h)&&!o.s){o.s=!0;var d=o.Ga;q||Ee(),K||(q(),K=!0),ie.add(d,o),o.B=0}}function ZA(o,d){return Xg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=d.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ea(m(o.Ga,o,d),Ty(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const j=new vi(this,this.j,o);let O=this.o;if(this.S&&(O?(O=T(O),C(O,this.S)):O=this.S),this.m!==null||this.O||(j.H=O,O=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=yy(this,j,d),g=qn(this.I),Se(g,"RID",o),Se(g,"CVER",22),this.D&&Se(g,"X-HTTP-Session-Id",this.D),Ca(this,g),O&&(this.O?d="headers="+encodeURIComponent(String(ly(O)))+"&"+d:this.m&&Yh(g,this.m,O)),$h(this.h,j),this.Ua&&Se(g,"TYPE","init"),this.P?(Se(g,"$req",d),Se(g,"SID","null"),j.T=!0,Hh(j,g,null)):Hh(j,g,d),this.G=2}}else this.G==3&&(o?gy(this,o):this.i.length==0||Wg(this.h)||gy(this))};function gy(o,d){var g;d?g=d.l:g=o.U++;const E=qn(o.I);Se(E,"SID",o.K),Se(E,"RID",g),Se(E,"AID",o.T),Ca(o,E),o.m&&o.o&&Yh(E,o.m,o.o),g=new vi(o,o.j,g,o.B+1),o.m===null&&(g.H=o.o),d&&(o.i=d.D.concat(o.i)),d=yy(o,g,1e3),g.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),$h(o.h,g),Hh(g,E,d)}function Ca(o,d){o.H&&V(o.H,function(g,E){Se(d,E,g)}),o.l&&ey({},function(g,E){Se(d,E,g)})}function yy(o,d,g){g=Math.min(o.i.length,g);var E=o.l?m(o.l.Na,o.l,o):null;e:{var j=o.i;let O=-1;for(;;){const H=["count="+g];O==-1?0<g?(O=j[0].g,H.push("ofs="+O)):O=0:H.push("ofs="+O);let Te=!0;for(let it=0;it<g;it++){let he=j[it].g;const mt=j[it].map;if(he-=O,0>he)O=Math.max(0,j[it].g-100),Te=!1;else try{YA(mt,H,"req"+he+"_")}catch{E&&E(mt)}}if(Te){E=H.join("&");break e}}}return o=o.i.splice(0,g),d.D=o,E}function vy(o){if(!o.g&&!o.u){o.Y=1;var d=o.Fa;q||Ee(),K||(q(),K=!0),ie.add(d,o),o.v=0}}function Wh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ea(m(o.Fa,o),Ty(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,_y(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ea(m(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),Bl(this),_y(this))};function Xh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function _y(o){o.g=new vi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var d=qn(o.qa);Se(d,"RID","rpc"),Se(d,"SID",o.K),Se(d,"AID",o.T),Se(d,"CI",o.F?"0":"1"),!o.F&&o.ja&&Se(d,"TO",o.ja),Se(d,"TYPE","xmlhttp"),Ca(o,d),o.m&&o.o&&Yh(d,o.m,o.o),o.L&&(o.g.I=o.L);var g=o.g;o=o.ia,g.L=1,g.v=Vl(qn(d)),g.m=null,g.P=!0,Kg(g,o)}t.Za=function(){this.C!=null&&(this.C=null,Bl(this),Wh(this),Nt(19))};function Hl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Ey(o,d){var g=null;if(o.g==d){Hl(o),Xh(o),o.g=null;var E=2}else if(Kh(o.h,d))g=d.D,Zg(o.h,d),E=1;else return;if(o.G!=0){if(d.o)if(E==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var j=o.B;E=xl(),At(E,new qg(E,g)),ql(o)}else vy(o);else if(j=d.s,j==3||j==0&&0<d.X||!(E==1&&ZA(o,d)||E==2&&Wh(o)))switch(g&&0<g.length&&(d=o.h,d.i=d.i.concat(g)),j){case 1:ps(o,5);break;case 4:ps(o,10);break;case 3:ps(o,6);break;default:ps(o,2)}}}function Ty(o,d){let g=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(g*=2),g*d}function ps(o,d){if(o.j.info("Error code "+d),d==2){var g=m(o.fb,o),E=o.Xa;const j=!E;E=new ms(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ol(E,"https"),Vl(E),j?GA(E.toString(),g):KA(E.toString(),g)}else Nt(2);o.G=0,o.l&&o.l.sa(d),by(o),py(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function by(o){if(o.G=0,o.ka=[],o.l){const d=Jg(o.h);(d.length!=0||o.i.length!=0)&&(N(o.ka,d),N(o.ka,o.i),o.h.i.length=0,I(o.i),o.i.length=0),o.l.ra()}}function wy(o,d,g){var E=g instanceof ms?qn(g):new ms(g);if(E.g!="")d&&(E.g=d+"."+E.g),Pl(E,E.s);else{var j=l.location;E=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var O=new ms(null);E&&Ol(O,E),d&&(O.g=d),j&&Pl(O,j),g&&(O.l=g),E=O}return g=o.D,d=o.ya,g&&d&&Se(E,g,d),Se(E,"VER",o.la),Ca(o,E),E}function Sy(o,d,g){if(d&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=o.Ca&&!o.pa?new je(new Ul({eb:g})):new je(o.pa),d.Ha(o.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ay(){}t=Ay.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fl(){}Fl.prototype.g=function(o,d){return new Lt(o,d)};function Lt(o,d){ft.call(this),this.g=new my(d),this.l=o,this.h=d&&d.messageUrlParams||null,o=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(o?o["X-WebChannel-Content-Type"]=d.messageContentType:o={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(o?o["X-WebChannel-Client-Profile"]=d.va:o={"X-WebChannel-Client-Profile":d.va}),this.g.S=o,(o=d&&d.Sb)&&!_(o)&&(this.g.m=o),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,o=this.h,o!==null&&d in o&&(o=this.h,d in o&&delete o[d])),this.j=new ir(this)}w(Lt,ft),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Qh(this.g)},Lt.prototype.o=function(o){var d=this.g;if(typeof o=="string"){var g={};g.__data__=o,o=g}else this.u&&(g={},g.__data__=Vh(o),o=g);d.i.push(new OA(d.Ya++,o)),d.G==3&&ql(d)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Qh(this.g),delete this.g,Lt.aa.N.call(this)};function Ny(o){Lh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var d=o.__sm__;if(d){e:{for(const g in d){o=g;break e}o=void 0}(this.i=o)&&(o=this.i,d=d!==null&&o in d?d[o]:void 0),this.data=d}else this.data=o}w(Ny,Lh);function Ry(){zh.call(this),this.status=1}w(Ry,zh);function ir(o){this.g=o}w(ir,Ay),ir.prototype.ua=function(){At(this.g,"a")},ir.prototype.ta=function(o){At(this.g,new Ny(o))},ir.prototype.sa=function(o){At(this.g,new Ry)},ir.prototype.ra=function(){At(this.g,"b")},Fl.prototype.createWebChannel=Fl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Iw=function(){return new Fl},Rw=function(){return xl()},Nw=ds,nm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kl.NO_ERROR=0,kl.TIMEOUT=8,kl.HTTP_ERROR=6,Mc=kl,Hg.COMPLETE="complete",Aw=Hg,Ug.EventType=va,va.OPEN="a",va.CLOSE="b",va.ERROR="c",va.MESSAGE="d",ft.prototype.listen=ft.prototype.K,$a=Ug,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,Sw=je}).apply(typeof lc<"u"?lc:typeof self<"u"?self:typeof window<"u"?window:{});const x_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new rh("@firebase/firestore");function Ua(){return qs.logLevel}function $(t,...e){if(qs.logLevel<=le.DEBUG){const n=e.map(kp);qs.debug(`Firestore (${fa}): ${t}`,...n)}}function fi(t,...e){if(qs.logLevel<=le.ERROR){const n=e.map(kp);qs.error(`Firestore (${fa}): ${t}`,...n)}}function Wr(t,...e){if(qs.logLevel<=le.WARN){const n=e.map(kp);qs.warn(`Firestore (${fa}): ${t}`,...n)}}function kp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${fa}) INTERNAL ASSERTION FAILED: `+t;throw fi(e),new Error(e)}function ye(t,e){t||Z()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends En{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}}class Wx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Xx{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let r=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ai,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=r;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ai)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ye(typeof i.accessToken=="string"),new Cw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new vt(e)}}class Zx{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Jx{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Zx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ek{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const i=r=>{r.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.R;return this.R=r.token,$("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new ek(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=nk(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%e.length))}return i}}function de(t,e){return t<e?-1:t>e?1:0}function Xr(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Qe(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Qe(0,0))}static max(){return new J(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n,i){n===void 0?n=0:n>e.length&&Z(),i===void 0?i=e.length-n:i>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Lo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lo?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=e.get(s),a=n.get(s);if(r<a)return-1;if(r>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends Lo{construct(e,n,i){return new Ae(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new G(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const ik=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Lo{construct(e,n,i){return new lt(e,n,i)}static isValidIdentifier(e){return ik.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new G(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new G(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new G(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ae.fromString(e))}static fromName(e){return new Y(Ae.fromString(e).popFirst(5))}static empty(){return new Y(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ae(e.slice()))}}function sk(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(i===1e9?new Qe(n+1,0):new Qe(n,i));return new ts(s,Y.empty(),e)}function rk(t){return new ts(t.readTime,t.key,-1)}class ts{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ts(J.min(),Y.empty(),-1)}static max(){return new ts(J.max(),Y.empty(),-1)}}function ak(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==ok)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,i)=>{n(e)})}static reject(e){return new z((n,i)=>{i(e)})}static waitFor(e){return new z((n,i)=>{let s=0,r=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},c=>i(c))}),a=!0,r===s&&n()})}static or(e){let n=z.resolve(!1);for(const i of e)n=n.next(s=>s?z.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new z((i,s)=>{const r=e.length,a=new Array(r);let l=0;for(let c=0;c<r;c++){const h=c;n(e[h]).next(f=>{a[h]=f,++l,l===r&&i(a)},f=>s(f))}})}static doWhile(e,n){return new z((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function ck(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}jp.oe=-1;function ch(t){return t==null}function bu(t){return t===0&&1/t==-1/0}function uk(t){return typeof t=="number"&&Number.isInteger(t)&&!bu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cc(this.root,e,this.comparator,!0)}}class cc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??rt.RED,this.left=s??rt.EMPTY,this.right=r??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new rt(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,i,s,r){return this}insert(e,n,i){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j_(this.data.getIterator())}getIteratorFrom(e){return new j_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class j_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new ut(lt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xr(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new kw("Invalid base64 string: "+r):r}}(e);return new ht(n)}static fromUint8Array(e){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const hk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(ye(!!t),typeof t=="string"){let e=0;const n=hk.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hs(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Op(t){const e=t.mapValue.fields.__previous_value__;return Mp(e)?Op(e):e}function zo(t){const e=ns(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,i,s,r,a,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class Bo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc={mapValue:{}};function Fs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mp(t)?4:mk(t)?9007199254740991:fk(t)?10:11:Z()}function Pn(t,e){if(t===e)return!0;const n=Fs(t);if(n!==Fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zo(t).isEqual(zo(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=ns(s.timestampValue),l=ns(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Hs(s.bytesValue).isEqual(Hs(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Le(s.geoPointValue.latitude)===Le(r.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Le(s.integerValue)===Le(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Le(s.doubleValue),l=Le(r.doubleValue);return a===l?bu(a)===bu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Xr(t.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(k_(a)!==k_(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Pn(a[c],l[c])))return!1;return!0}(t,e);default:return Z()}}function qo(t,e){return(t.values||[]).find(n=>Pn(n,e))!==void 0}function Zr(t,e){if(t===e)return 0;const n=Fs(t),i=Fs(e);if(n!==i)return de(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(r,a){const l=Le(r.integerValue||r.doubleValue),c=Le(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return M_(t.timestampValue,e.timestampValue);case 4:return M_(zo(t),zo(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(r,a){const l=Hs(r),c=Hs(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const l=r.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=de(l[h],c[h]);if(f!==0)return f}return de(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const l=de(Le(r.latitude),Le(a.latitude));return l!==0?l:de(Le(r.longitude),Le(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return O_(t.arrayValue,e.arrayValue);case 10:return function(r,a){var l,c,h,f;const p=r.fields||{},m=a.fields||{},v=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,I=de(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0);return I!==0?I:O_(v,w)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===uc.mapValue&&a===uc.mapValue)return 0;if(r===uc.mapValue)return 1;if(a===uc.mapValue)return-1;const l=r.fields||{},c=Object.keys(l),h=a.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const m=de(c[p],f[p]);if(m!==0)return m;const v=Zr(l[c[p]],h[f[p]]);if(v!==0)return v}return de(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Z()}}function M_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=ns(t),i=ns(e),s=de(n.seconds,i.seconds);return s!==0?s:de(n.nanos,i.nanos)}function O_(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Zr(n[s],i[s]);if(r)return r}return de(n.length,i.length)}function Jr(t){return im(t)}function im(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ns(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=im(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${im(n.fields[a])}`;return s+"}"}(t.mapValue):Z()}function P_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sm(t){return!!t&&"integerValue"in t}function Pp(t){return!!t&&"arrayValue"in t}function V_(t){return!!t&&"nullValue"in t}function U_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oc(t){return!!t&&"mapValue"in t}function fk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function mo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=mo(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.value=e}static empty(){return new Ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Oc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mo(n)}setAll(e){let n=lt.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=mo(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());Oc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Oc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Js(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Ot(mo(this.value))}}function jw(t){const e=[];return Js(t.fields,(n,i)=>{const s=new lt([n]);if(Oc(i)){const r=jw(i.mapValue).fields;if(r.length===0)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,i,s,r,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(e){return new _t(e,0,J.min(),J.min(),J.min(),Ot.empty(),0)}static newFoundDocument(e,n,i,s){return new _t(e,1,n,J.min(),i,s,0)}static newNoDocument(e,n){return new _t(e,2,n,J.min(),J.min(),Ot.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,J.min(),J.min(),Ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.position=e,this.inclusive=n}}function L_(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],a=t.position[s];if(r.field.isKeyField()?i=Y.comparator(Y.fromName(a.referenceValue),n.key):i=Zr(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function z_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function pk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{}class Ge extends Mw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new yk(e,n,i):n==="array-contains"?new Ek(e,i):n==="in"?new Tk(e,i):n==="not-in"?new bk(e,i):n==="array-contains-any"?new wk(e,i):new Ge(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new vk(e,i):new _k(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zr(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(Zr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vn extends Mw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new vn(e,n)}matches(e){return Ow(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ow(t){return t.op==="and"}function Pw(t){return gk(t)&&Ow(t)}function gk(t){for(const e of t.filters)if(e instanceof vn)return!1;return!0}function rm(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+Jr(t.value);if(Pw(t))return t.filters.map(e=>rm(e)).join(",");{const e=t.filters.map(n=>rm(n)).join(",");return`${t.op}(${e})`}}function Vw(t,e){return t instanceof Ge?function(i,s){return s instanceof Ge&&i.op===s.op&&i.field.isEqual(s.field)&&Pn(i.value,s.value)}(t,e):t instanceof vn?function(i,s){return s instanceof vn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&Vw(a,s.filters[l]),!0):!1}(t,e):void Z()}function Uw(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Jr(n.value)}`}(t):t instanceof vn?function(n){return n.op.toString()+" {"+n.getFilters().map(Uw).join(" ,")+"}"}(t):"Filter"}class yk extends Ge{constructor(e,n,i){super(e,n,i),this.key=Y.fromName(i.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class vk extends Ge{constructor(e,n){super(e,"in",n),this.keys=Lw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _k extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=Lw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Lw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Y.fromName(i.referenceValue))}class Ek extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pp(n)&&qo(n.arrayValue,this.value)}}class Tk extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qo(this.value.arrayValue,n)}}class bk extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qo(this.value.arrayValue,n)}}class wk extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>qo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,n=null,i=[],s=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.ue=null}}function B_(t,e=null,n=[],i=[],s=null,r=null,a=null){return new Sk(t,e,n,i,s,r,a)}function Vp(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>rm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),ch(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Jr(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Jr(i)).join(",")),e.ue=n}return e.ue}function Up(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Vw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!z_(t.startAt,e.startAt)&&z_(t.endAt,e.endAt)}function am(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n=null,i=[],s=[],r=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ak(t,e,n,i,s,r,a,l){return new ma(t,e,n,i,s,r,a,l)}function uh(t){return new ma(t)}function q_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zw(t){return t.collectionGroup!==null}function po(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const r of e.explicitOrderBy)e.ce.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ut(lt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.ce.push(new Ho(r,i))}),n.has(lt.keyField().canonicalString())||e.ce.push(new Ho(lt.keyField(),i))}return e.ce}function jn(t){const e=ee(t);return e.le||(e.le=Nk(e,po(t))),e.le}function Nk(t,e){if(t.limitType==="F")return B_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Ho(s.field,r)});const n=t.endAt?new wu(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new wu(t.startAt.position,t.startAt.inclusive):null;return B_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function om(t,e){const n=t.filters.concat([e]);return new ma(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Su(t,e,n){return new ma(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hh(t,e){return Up(jn(t),jn(e))&&t.limitType===e.limitType}function Bw(t){return`${Vp(jn(t))}|lt:${t.limitType}`}function hr(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>Uw(s)).join(", ")}]`),ch(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Jr(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Jr(s)).join(",")),`Target(${i})`}(jn(t))}; limitType=${t.limitType})`}function dh(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Y.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of po(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(a,l,c){const h=L_(a,l,c);return a.inclusive?h<=0:h<0}(i.startAt,po(i),s)||i.endAt&&!function(a,l,c){const h=L_(a,l,c);return a.inclusive?h>=0:h>0}(i.endAt,po(i),s))}(t,e)}function Rk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qw(t){return(e,n)=>{let i=!1;for(const s of po(t)){const r=Ik(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function Ik(t,e,n){const i=t.field.isKeyField()?Y.comparator(e.key,n.key):function(r,a,l){const c=a.data.field(r),h=l.data.field(r);return c!==null&&h!==null?Zr(c,h):Z()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return xw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new ke(Y.comparator);function mi(){return Ck}const Hw=new ke(Y.comparator);function Ya(...t){let e=Hw;for(const n of t)e=e.insert(n.key,n);return e}function Fw(t){let e=Hw;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function As(){return go()}function Gw(){return go()}function go(){return new pa(t=>t.toString(),(t,e)=>t.isEqual(e))}const Dk=new ke(Y.comparator),xk=new ut(Y.comparator);function oe(...t){let e=xk;for(const n of t)e=e.add(n);return e}const kk=new ut(de);function jk(){return kk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(e)?"-0":e}}function Kw(t){return{integerValue:""+t}}function Mk(t,e){return uk(e)?Kw(e):Lp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function Ok(t,e,n){return t instanceof Au?function(s,r){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Mp(r)&&(r=Op(r)),r&&(a.fields.__previous_value__=r),{mapValue:a}}(n,e):t instanceof Fo?Yw(t,e):t instanceof Go?Qw(t,e):function(s,r){const a=$w(s,r),l=H_(a)+H_(s.Pe);return sm(a)&&sm(s.Pe)?Kw(l):Lp(s.serializer,l)}(t,e)}function Pk(t,e,n){return t instanceof Fo?Yw(t,e):t instanceof Go?Qw(t,e):n}function $w(t,e){return t instanceof Nu?function(i){return sm(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class Au extends fh{}class Fo extends fh{constructor(e){super(),this.elements=e}}function Yw(t,e){const n=Ww(e);for(const i of t.elements)n.some(s=>Pn(s,i))||n.push(i);return{arrayValue:{values:n}}}class Go extends fh{constructor(e){super(),this.elements=e}}function Qw(t,e){let n=Ww(e);for(const i of t.elements)n=n.filter(s=>!Pn(s,i));return{arrayValue:{values:n}}}class Nu extends fh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function H_(t){return Le(t.integerValue||t.doubleValue)}function Ww(t){return Pp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Vk(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Fo&&s instanceof Fo||i instanceof Go&&s instanceof Go?Xr(i.elements,s.elements,Pn):i instanceof Nu&&s instanceof Nu?Pn(i.Pe,s.Pe):i instanceof Au&&s instanceof Au}(t.transform,e.transform)}class Uk{constructor(e,n){this.version=e,this.transformResults=n}}class Ct{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ct}static exists(e){return new Ct(void 0,e)}static updateTime(e){return new Ct(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mh{}function Xw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ph(t.key,Ct.none()):new yl(t.key,t.data,Ct.none());{const n=t.data,i=Ot.empty();let s=new ut(lt.comparator);for(let r of e.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new cs(t.key,i,new Kt(s.toArray()),Ct.none())}}function Lk(t,e,n){t instanceof yl?function(s,r,a){const l=s.value.clone(),c=G_(s.fieldTransforms,r,a.transformResults);l.setAll(c),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof cs?function(s,r,a){if(!Pc(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=G_(s.fieldTransforms,r,a.transformResults),c=r.data;c.setAll(Zw(s)),c.setAll(l),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function yo(t,e,n,i){return t instanceof yl?function(r,a,l,c){if(!Pc(r.precondition,a))return l;const h=r.value.clone(),f=K_(r.fieldTransforms,c,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof cs?function(r,a,l,c){if(!Pc(r.precondition,a))return l;const h=K_(r.fieldTransforms,c,a),f=a.data;return f.setAll(Zw(r)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(r,a,l){return Pc(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function zk(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=$w(i.transform,s||null);r!=null&&(n===null&&(n=Ot.empty()),n.set(i.field,r))}return n||null}function F_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Xr(i,s,(r,a)=>Vk(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yl extends mh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cs extends mh{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Zw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function G_(t,e,n){const i=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],a=r.transform,l=e.data.field(r.field);i.set(r.field,Pk(a,l,n[s]))}return i}function K_(t,e,n){const i=new Map;for(const s of t){const r=s.transform,a=n.data.field(s.field);i.set(s.field,Ok(r,a,e))}return i}class ph extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bk extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&Lk(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=yo(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=yo(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Gw();return this.mutations.forEach(s=>{const r=e.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const c=Xw(a,l);c!==null&&i.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Xr(this.mutations,e.mutations,(n,i)=>F_(n,i))&&Xr(this.baseMutations,e.baseMutations,(n,i)=>F_(n,i))}}class zp{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){ye(e.mutations.length===i.length);let s=function(){return Dk}();const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new zp(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,ce;function Gk(t){switch(t){default:return Z();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function Jw(t){if(t===void 0)return fi("GRPC error has no .code"),U.UNKNOWN;switch(t){case qe.OK:return U.OK;case qe.CANCELLED:return U.CANCELLED;case qe.UNKNOWN:return U.UNKNOWN;case qe.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case qe.INTERNAL:return U.INTERNAL;case qe.UNAVAILABLE:return U.UNAVAILABLE;case qe.UNAUTHENTICATED:return U.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case qe.NOT_FOUND:return U.NOT_FOUND;case qe.ALREADY_EXISTS:return U.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return U.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case qe.ABORTED:return U.ABORTED;case qe.OUT_OF_RANGE:return U.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return U.UNIMPLEMENTED;case qe.DATA_LOSS:return U.DATA_LOSS;default:return Z()}}(ce=qe||(qe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new Ms([4294967295,4294967295],0);function $_(t){const e=Kk().encode(t),n=new ww;return n.update(e),new Uint8Array(n.digest())}function Y_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Ms([n,i],0),new Ms([s,r],0)]}class Bp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Qa(`Invalid padding: ${n}`);if(i<0)throw new Qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ms.fromNumber(this.Ie)}Ee(e,n,i){let s=e.add(n.multiply(Ms.fromNumber(i)));return s.compare($k)===1&&(s=new Ms([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=$_(e),[i,s]=Y_(n);for(let r=0;r<this.hashCount;r++){const a=this.Ee(i,s,r);if(!this.de(a))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new Bp(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=$_(e),[i,s]=Y_(n);for(let r=0;r<this.hashCount;r++){const a=this.Ee(i,s,r);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new gh(J.min(),s,new ke(de),mi(),oe())}}class vl{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new vl(i,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,i,s){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=s}}class eS{constructor(e,n){this.targetId=e,this.me=n}}class tS{constructor(e,n,i=ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class Q_{constructor(){this.fe=0,this.ge=X_(),this.pe=ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),i=oe();return this.ge.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Z()}}),new vl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=X_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Yk{constructor(e){this.Le=e,this.Be=new Map,this.ke=mi(),this.qe=W_(),this.Qe=new ke(de)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,i=e.me.count,s=this.Je(n);if(s){const r=s.target;if(am(r))if(i===0){const a=new Y(r.path);this.Ue(n,a,_t.newNoDocument(a,J.min()))}else ye(i===1);else{const a=this.Ye(n);if(a!==i){const l=this.Ze(e),c=l?this.Xe(l,e,a):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=Hs(i).toUint8Array()}catch(c){if(c instanceof kw)return Wr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Bp(a,s,r)}catch(c){return Wr(c instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,r,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((r,a)=>{const l=this.Je(a);if(l){if(r.current&&am(l.target)){const c=new Y(l.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,_t.newNoDocument(c,e))}r.be&&(n.set(a,r.ve()),r.Ce())}});let i=oe();this.qe.forEach((r,a)=>{let l=!0;a.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.ke.forEach((r,a)=>a.setReadTime(e));const s=new gh(e,n,this.Qe,this.ke,i);return this.ke=mi(),this.qe=W_(),this.Qe=new ke(de),s}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Q_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ut(de),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Q_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function W_(){return new ke(Y.comparator)}function X_(){return new ke(Y.comparator)}const Qk={asc:"ASCENDING",desc:"DESCENDING"},Wk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xk={and:"AND",or:"OR"};class Zk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lm(t,e){return t.useProto3Json||ch(e)?e:{value:e}}function Ru(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Jk(t,e){return Ru(t,e.toTimestamp())}function Mn(t){return ye(!!t),J.fromTimestamp(function(n){const i=ns(n);return new Qe(i.seconds,i.nanos)}(t))}function qp(t,e){return cm(t,e).canonicalString()}function cm(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iS(t){const e=Ae.fromString(t);return ye(lS(e)),e}function um(t,e){return qp(t.databaseId,e.path)}function Bd(t,e){const n=iS(e);if(n.get(1)!==t.databaseId.projectId)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(rS(n))}function sS(t,e){return qp(t.databaseId,e)}function e2(t){const e=iS(t);return e.length===4?Ae.emptyPath():rS(e)}function hm(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rS(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Z_(t,e,n){return{name:um(t,e),fields:n.value.mapValue.fields}}function t2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(h,f){return h.useProto3Json?(ye(f===void 0||typeof f=="string"),ht.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ht.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?U.UNKNOWN:Jw(h.code);return new G(f,h.message||"")}(a);n=new tS(i,s,r,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Bd(t,i.document.name),r=Mn(i.document.updateTime),a=i.document.createTime?Mn(i.document.createTime):J.min(),l=new Ot({mapValue:{fields:i.document.fields}}),c=_t.newFoundDocument(s,r,a,l),h=i.targetIds||[],f=i.removedTargetIds||[];n=new Vc(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Bd(t,i.document),r=i.readTime?Mn(i.readTime):J.min(),a=_t.newNoDocument(s,r),l=i.removedTargetIds||[];n=new Vc([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Bd(t,i.document),r=i.removedTargetIds||[];n=new Vc([],r,s,null)}else{if(!("filter"in e))return Z();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new Fk(s,r),l=i.targetId;n=new eS(l,a)}}return n}function n2(t,e){let n;if(e instanceof yl)n={update:Z_(t,e.key,e.value)};else if(e instanceof ph)n={delete:um(t,e.key)};else if(e instanceof cs)n={update:Z_(t,e.key,e.data),updateMask:h2(e.fieldMask)};else{if(!(e instanceof Bk))return Z();n={verify:um(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof Au)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Go)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nu)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Z()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:Jk(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Z()}(t,e.precondition)),n}function i2(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,r){let a=s.updateTime?Mn(s.updateTime):Mn(r);return a.isEqual(J.min())&&(a=Mn(r)),new Uk(a,s.transformResults||[])}(n,e))):[]}function s2(t,e){return{documents:[sS(t,e.path)]}}function r2(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=sS(t,s);const r=function(h){if(h.length!==0)return oS(vn.create(h,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(f=>function(m){return{field:dr(m.field),direction:l2(m.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=lm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function a2(t){let e=e2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){ye(i===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let r=[];n.where&&(r=function(p){const m=aS(p);return m instanceof vn&&Pw(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(w){return new Ho(fr(w.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,ch(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,v=p.values||[];return new wu(v,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,v=p.values||[];return new wu(v,m)}(n.endAt)),Ak(e,s,a,r,l,"F",c,h)}function o2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fr(n.unaryFilter.field);return Ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=fr(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=fr(n.unaryFilter.field);return Ge.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=fr(n.unaryFilter.field);return Ge.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(fr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vn.create(n.compositeFilter.filters.map(i=>aS(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function l2(t){return Qk[t]}function c2(t){return Wk[t]}function u2(t){return Xk[t]}function dr(t){return{fieldPath:t.canonicalString()}}function fr(t){return lt.fromServerFormat(t.fieldPath)}function oS(t){return t instanceof Ge?function(n){if(n.op==="=="){if(U_(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NAN"}};if(V_(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(U_(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NOT_NAN"}};if(V_(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dr(n.field),op:c2(n.op),value:n.value}}}(t):t instanceof vn?function(n){const i=n.getFilters().map(s=>oS(s));return i.length===1?i[0]:{compositeFilter:{op:u2(n.op),filters:i}}}(t):Z()}function h2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n,i,s,r=J.min(),a=J.min(),l=ht.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Li(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.ct=e}}function f2(t){const e=a2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Su(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.un=new p2}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ts.min())}updateCollectionGroup(e,n,i){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class p2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new ut(Ae.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ut(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ea(0)}static kn(){return new ea(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.changes=new pa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&yo(i.mutation,s,Kt.empty(),Qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,oe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=oe()){const s=As();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let a=Ya();return r.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=As();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,oe()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,s){let r=mi();const a=go(),l=function(){return go()}();return n.forEach((c,h)=>{const f=i.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof cs)?r=r.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),yo(f.mutation,h,f.mutation.getFieldMask(),Qe.now())):a.set(h.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,r).next(c=>(c.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>{var p;return l.set(h,new y2(f,(p=a.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const i=go();let s=new ke((a,l)=>a-l),r=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let f=i.get(c)||Kt.empty();f=l.applyToLocalView(h,f),i.set(c,f);const p=(s.get(l.batchId)||oe()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,p=Gw();f.forEach(m=>{if(!r.has(m)){const v=Xw(n.get(m),i.get(m));v!==null&&p.set(m,v),r=r.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,p))}return z.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):z.resolve(As());let l=-1,c=r;return a.next(h=>z.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),r.get(f)?z.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,h,r)).next(()=>this.computeViews(e,c,h,oe())).next(f=>({batchId:l,changes:Fw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(i=>{let s=Ya();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let a=Ya();return this.indexManager.getCollectionParents(e,r).next(l=>z.forEach(l,c=>{const h=function(p,m){return new ma(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next(f=>{f.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(a=>{r.forEach((c,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,_t.newInvalidDocument(f)))});let l=Ya();return a.forEach((c,h)=>{const f=r.get(c);f!==void 0&&yo(f.mutation,h,Kt.empty(),Qe.now()),dh(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Mn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:f2(s.bundledQuery),readTime:Mn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.overlays=new ke(Y.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=As();return z.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.ht(e,n,r)}),z.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Ir.delete(i)),z.resolve()}getOverlaysForCollection(e,n,i){const s=As(),r=n.length+1,a=new Y(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&c.largestBatchId>i&&s.set(c.getKey(),c)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new ke((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let f=r.get(h.largestBatchId);f===null&&(f=As(),r=r.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=As(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return z.resolve(l)}ht(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Hk(n,i));let r=this.Ir.get(n);r===void 0&&(r=oe(),this.Ir.set(n,r)),this.Ir.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.Tr=new ut(Xe.Er),this.dr=new ut(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Xe(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Xe(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Y(new Ae([])),i=new Xe(n,e),s=new Xe(n,e+1),r=[];return this.dr.forEachInRange([i,s],a=>{this.Vr(a),r.push(a.key)}),r}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new Ae([])),i=new Xe(n,e),s=new Xe(n,e+1);let r=oe();return this.dr.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new Xe(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Xe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||de(e.wr,n.wr)}static Ar(e,n){return de(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ut(Xe.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new qk(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new Xe(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.vr(i),r=s<0?0:s;return z.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([i,s],a=>{const l=this.Dr(a.wr);r.push(l)}),z.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ut(de);return n.forEach(s=>{const r=new Xe(s,0),a=new Xe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([r,a],l=>{i=i.add(l.wr)})}),z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;Y.isDocumentKey(r)||(r=r.child(""));const a=new Xe(new Y(r),0);let l=new ut(de);return this.br.forEachWhile(c=>{const h=c.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.wr)),!0)},a),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return z.forEach(n.mutations,s=>{const r=new Xe(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Xe(n,0),s=this.br.firstAfterOrEqual(i);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.Mr=e,this.docs=function(){return new ke(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return z.resolve(i?i.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let i=mi();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():_t.newInvalidDocument(s))}),z.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=mi();const a=n.path,l=new Y(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||ak(rk(f),i)<=0||(s.has(f.key)||dh(n,f))&&(r=r.insert(f.key,f.mutableCopy()))}return z.resolve(r)}getAllFromCollectionGroup(e,n,i,s){Z()}Or(e,n){return z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new S2(this)}getSize(e){return z.resolve(this.size)}}class S2 extends g2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.persistence=e,this.Nr=new pa(n=>Vp(n),Up),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hp,this.targetCount=0,this.kr=ea.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ea(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.Nr.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(r).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return z.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),z.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(e,a))}),z.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return z.resolve(i)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jp(0),this.Kr=!1,this.Kr=!0,this.$r=new T2,this.referenceDelegate=e(this),this.Ur=new A2(this),this.indexManager=new m2,this.remoteDocumentCache=function(s){return new w2(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new d2(n),this.Gr=new _2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new E2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new b2(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){$("MemoryPersistence","Starting transaction:",e);const s=new R2(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(r=>this.referenceDelegate.jr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Hr(e,n){return z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class R2 extends lk{constructor(e){super(),this.currentSequenceNumber=e}}class Fp{constructor(e){this.persistence=e,this.Jr=new Hp,this.Yr=null}static Zr(e){return new Fp(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),z.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.Xr.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,i=>{const s=Y.fromPath(i);return this.ei(e,s).next(r=>{r||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(e,n){let i=oe(),s=oe();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Gp(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return m1()?8:ck(wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.Yi(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.Zi(e,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new I2;return this.Xi(e,n,a).next(l=>{if(r.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>r.result)}es(e,n,i,s){return i.documentReadCount<this.ji?(Ua()<=le.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",hr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Ua()<=le.DEBUG&&$("QueryEngine","Query:",hr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(Ua()<=le.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",hr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):z.resolve())}Yi(e,n){if(q_(n))return z.resolve(null);let i=jn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Su(n,null,"F"),i=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const a=oe(...r);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(c=>{const h=this.ts(n,l);return this.ns(n,h,a,c.readTime)?this.Yi(e,Su(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,i,s){return q_(n)||s.isEqual(J.min())?z.resolve(null):this.Ji.getDocuments(e,i).next(r=>{const a=this.ts(n,r);return this.ns(n,a,i,s)?z.resolve(null):(Ua()<=le.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hr(n)),this.rs(e,a,n,sk(s,-1)).next(l=>l))})}ts(e,n){let i=new ut(qw(e));return n.forEach((s,r)=>{dh(e,r)&&(i=i.add(r))}),i}ns(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Xi(e,n,i){return Ua()<=le.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",hr(n)),this.Ji.getDocumentsMatchingQuery(e,n,ts.min(),i)}rs(e,n,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,i,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ke(de),this._s=new pa(r=>Vp(r),Up),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function x2(t,e,n,i){return new D2(t,e,n,i)}async function cS(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let c=oe();for(const h of s){a.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of r){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(i,c).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function k2(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,f){const p=h.batch,m=p.keys();let v=z.resolve();return m.forEach(w=>{v=v.next(()=>f.getEntry(c,w)).next(I=>{const N=h.docVersions.get(w);ye(N!==null),I.version.compareTo(N)<0&&(p.applyToRemoteDocument(I,h),I.isValidDocument()&&(I.setReadTime(h.commitVersion),f.addEntry(I)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let c=oe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function uS(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function j2(t,e){const n=ee(t),i=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const m=s.get(p);if(!m)return;l.push(n.Ur.removeMatchingKeys(r,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(r,f.addedDocuments,p)));let v=m.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(ht.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,i)),s=s.insert(p,v),function(I,N,y){return I.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,v,f)&&l.push(n.Ur.updateTargetData(r,v))});let c=mi(),h=oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,f))}),l.push(M2(r,a,e.documentUpdates).next(f=>{c=f.Ps,h=f.Is})),!i.isEqual(J.min())){const f=n.Ur.getLastRemoteSnapshotVersion(r).next(p=>n.Ur.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(f)}return z.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,c,h)).next(()=>c)}).then(r=>(n.os=s,r))}function M2(t,e,n){let i=oe(),s=oe();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let a=mi();return n.forEach((l,c)=>{const h=r.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):$("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:a,Is:s}})}function O2(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function P2(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,e).next(r=>r?(s=r,z.resolve(s)):n.Ur.allocateTargetId(i).next(a=>(s=new Li(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function dm(t,e,n){const i=ee(t),s=i.os.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!gl(a))throw a;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function J_(t,e,n){const i=ee(t);let s=J.min(),r=oe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,f){const p=ee(c),m=p._s.get(f);return m!==void 0?z.resolve(p.os.get(m)):p.Ur.getTargetData(h,f)}(i,a,jn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,l.targetId).next(c=>{r=c})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,n?s:J.min(),n?r:oe())).next(l=>(V2(i,Rk(e),l),{documents:l,Ts:r})))}function V2(t,e,n){let i=t.us.get(e)||J.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.us.set(e,i)}class e0{constructor(){this.activeTargetIds=jk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U2{constructor(){this.so=new e0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new e0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=null;function qd(){return hc===null?hc=function(){return 268435456+Math.round(2147483648*Math.random())}():hc++,"0x"+hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection";class q2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${r}`}get Fo(){return!1}Mo(n,i,s,r,a){const l=qd(),c=this.xo(n,i.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,r,a),this.No(n,c,h,s).then(f=>($("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Wr("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",c,"request:",s),f})}Lo(n,i,s,r,a,l){return this.Mo(n,i,s,r,a)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((r,a)=>n[a]=r),s&&s.headers.forEach((r,a)=>n[a]=r)}xo(n,i){const s=z2[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,s){const r=qd();return new Promise((a,l)=>{const c=new Sw;c.setWithCredentials(!0),c.listenOnce(Aw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Mc.NO_ERROR:const f=c.getResponseJson();$(yt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(f)),a(f);break;case Mc.TIMEOUT:$(yt,`RPC '${e}' ${r} timed out`),l(new G(U.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:const p=c.getStatus();if($(yt,`RPC '${e}' ${r} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const w=function(N){const y=N.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(y)>=0?y:U.UNKNOWN}(v.status);l(new G(w,v.message))}else l(new G(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new G(U.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{$(yt,`RPC '${e}' ${r} completed.`)}});const h=JSON.stringify(s);$(yt,`RPC '${e}' ${r} sending request:`,s),c.send(n,"POST",h,i,15)})}Bo(e,n,i){const s=qd(),r=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Iw(),l=Rw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const f=r.join("");$(yt,`Creating RPC '${e}' stream ${s}: ${f}`,c);const p=a.createWebChannel(f,c);let m=!1,v=!1;const w=new B2({Io:N=>{v?$(yt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(m||($(yt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),$(yt,`RPC '${e}' stream ${s} sending:`,N),p.send(N))},To:()=>p.close()}),I=(N,y,_)=>{N.listen(y,b=>{try{_(b)}catch(x){setTimeout(()=>{throw x},0)}})};return I(p,$a.EventType.OPEN,()=>{v||($(yt,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),I(p,$a.EventType.CLOSE,()=>{v||(v=!0,$(yt,`RPC '${e}' stream ${s} transport closed`),w.So())}),I(p,$a.EventType.ERROR,N=>{v||(v=!0,Wr(yt,`RPC '${e}' stream ${s} transport errored:`,N),w.So(new G(U.UNAVAILABLE,"The operation could not be completed")))}),I(p,$a.EventType.MESSAGE,N=>{var y;if(!v){const _=N.data[0];ye(!!_);const b=_,x=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(x){$(yt,`RPC '${e}' stream ${s} received error:`,x);const P=x.status;let V=function(R){const C=qe[R];if(C!==void 0)return Jw(C)}(P),S=x.message;V===void 0&&(V=U.INTERNAL,S="Unknown error status: "+P+" with message "+x.message),v=!0,w.So(new G(V,S)),p.close()}else $(yt,`RPC '${e}' stream ${s} received:`,_),w.bo(_)}}),I(l,Nw.STAT_EVENT,N=>{N.stat===nm.PROXY?$(yt,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===nm.NOPROXY&&$(yt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t){return new Zk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,i=1e3,s=1.5,r=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n,i,s,r,a,l,c){this.ui=e,this.Ho=i,this.Jo=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(fi(n.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{e(()=>{const s=new G(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class H2 extends dS{constructor(e,n,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=t2(this.serializer,e),i=function(r){if(!("targetChange"in r))return J.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?Mn(a.readTime):J.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=hm(this.serializer),n.addTarget=function(r,a){let l;const c=a.target;if(l=am(c)?{documents:s2(r,c)}:{query:r2(r,c)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=nS(r,a.resumeToken);const h=lm(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(J.min())>0){l.readTime=Ru(r,a.snapshotVersion.toTimestamp());const h=lm(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const i=o2(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=hm(this.serializer),n.removeTarget=e,this.a_(n)}}class F2 extends dS{constructor(e,n,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=i2(e.writeResults,e.commitTime),i=Mn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=hm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>n2(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2 extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Mo(e,cm(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new G(U.UNKNOWN,r.toString())})}Lo(e,n,i,s,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,cm(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(U.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class K2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fi(n),this.D_=!1):$("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o(a=>{i.enqueueAndForget(async()=>{er(this)&&($("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=ee(c);h.L_.add(4),await _l(h),h.q_.set("Unknown"),h.L_.delete(4),await vh(h)}(this))})}),this.q_=new K2(i,s)}}async function vh(t){if(er(t))for(const e of t.B_)await e(!0)}async function _l(t){for(const e of t.B_)await e(!1)}function fS(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Qp(n)?Yp(n):ga(n).r_()&&$p(n,e))}function Kp(t,e){const n=ee(t),i=ga(n);n.N_.delete(e),i.r_()&&mS(n,e),n.N_.size===0&&(i.r_()?i.o_():er(n)&&n.q_.set("Unknown"))}function $p(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ga(t).A_(e)}function mS(t,e){t.Q_.xe(e),ga(t).R_(e)}function Yp(t){t.Q_=new Yk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ga(t).start(),t.q_.v_()}function Qp(t){return er(t)&&!ga(t).n_()&&t.N_.size>0}function er(t){return ee(t).L_.size===0}function pS(t){t.Q_=void 0}async function Y2(t){t.q_.set("Online")}async function Q2(t){t.N_.forEach((e,n)=>{$p(t,e)})}async function W2(t,e){pS(t),Qp(t)?(t.q_.M_(e),Yp(t)):t.q_.set("Unknown")}async function X2(t,e,n){if(t.q_.set("Online"),e instanceof tS&&e.state===2&&e.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(i){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Iu(t,i)}else if(e instanceof Vc?t.Q_.Ke(e):e instanceof eS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const i=await uS(t.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Q_.rt(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=r.N_.get(h);f&&r.N_.set(h,f.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const f=r.N_.get(c);if(!f)return;r.N_.set(c,f.withResumeToken(ht.EMPTY_BYTE_STRING,f.snapshotVersion)),mS(r,c);const p=new Li(f.target,c,h,f.sequenceNumber);$p(r,p)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){$("RemoteStore","Failed to raise snapshot:",i),await Iu(t,i)}}async function Iu(t,e,n){if(!gl(e))throw e;t.L_.add(1),await _l(t),t.q_.set("Offline"),n||(n=()=>uS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vh(t)})}function gS(t,e){return e().catch(n=>Iu(t,n,e))}async function _h(t){const e=ee(t),n=is(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Z2(e);)try{const s=await O2(e.localStore,i);if(s===null){e.O_.length===0&&n.o_();break}i=s.batchId,J2(e,s)}catch(s){await Iu(e,s)}yS(e)&&vS(e)}function Z2(t){return er(t)&&t.O_.length<10}function J2(t,e){t.O_.push(e);const n=is(t);n.r_()&&n.V_&&n.m_(e.mutations)}function yS(t){return er(t)&&!is(t).n_()&&t.O_.length>0}function vS(t){is(t).start()}async function ej(t){is(t).p_()}async function tj(t){const e=is(t);for(const n of t.O_)e.m_(n.mutations)}async function nj(t,e,n){const i=t.O_.shift(),s=zp.from(i,e,n);await gS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await _h(t)}async function ij(t,e){e&&is(t).V_&&await async function(i,s){if(function(a){return Gk(a)&&a!==U.ABORTED}(s.code)){const r=i.O_.shift();is(i).s_(),await gS(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await _h(i)}}(t,e),yS(t)&&vS(t)}async function n0(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");const i=er(n);n.L_.add(3),await _l(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vh(n)}async function sj(t,e){const n=ee(t);e?(n.L_.delete(2),await vh(n)):e||(n.L_.add(2),await _l(n),n.q_.set("Unknown"))}function ga(t){return t.K_||(t.K_=function(n,i,s){const r=ee(n);return r.w_(),new H2(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Y2.bind(null,t),Ro:Q2.bind(null,t),mo:W2.bind(null,t),d_:X2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Qp(t)?Yp(t):t.q_.set("Unknown")):(await t.K_.stop(),pS(t))})),t.K_}function is(t){return t.U_||(t.U_=function(n,i,s){const r=ee(n);return r.w_(),new F2(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ej.bind(null,t),mo:ij.bind(null,t),f_:tj.bind(null,t),g_:nj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await _h(t)):(await t.U_.stop(),t.O_.length>0&&($("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const a=Date.now()+i,l=new Wp(e,n,a,s,r);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(t,e){if(fi("AsyncQueue",`${e}: ${t}`),gl(t))return new G(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Y.comparator(n.key,i.key):(n,i)=>Y.comparator(n.key,i.key),this.keyedMap=Ya(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new Ur(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ur)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ur;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(){this.W_=new ke(Y.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class ta{constructor(e,n,i,s,r,a,l,c,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ta(e,n,Ur.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class aj{constructor(){this.queries=s0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=ee(n),r=s.queries;s.queries=s0(),r.forEach((a,l)=>{for(const c of l.j_)c.onError(i)})})(this,new G(U.ABORTED,"Firestore shutting down"))}}function s0(){return new pa(t=>Bw(t),hh)}async function Zp(t,e){const n=ee(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.H_()&&e.J_()&&(i=2):(r=new rj,i=e.J_()?0:1);try{switch(i){case 0:r.z_=await n.onListen(s,!0);break;case 1:r.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Xp(a,`Initialization of query '${hr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,r),r.j_.push(e),e.Z_(n.onlineState),r.z_&&e.X_(r.z_)&&eg(n)}async function Jp(t,e){const n=ee(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const a=r.j_.indexOf(e);a>=0&&(r.j_.splice(a,1),r.j_.length===0?s=e.J_()?0:1:!r.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function oj(t,e){const n=ee(t);let i=!1;for(const s of e){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.j_)l.X_(s)&&(i=!0);a.z_=s}}i&&eg(n)}function lj(t,e,n){const i=ee(t),s=i.queries.get(e);if(s)for(const r of s.j_)r.onError(n);i.queries.delete(e)}function eg(t){t.Y_.forEach(e=>{e.next()})}var fm,r0;(r0=fm||(fm={})).ea="default",r0.Cache="cache";class tg{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ta(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.key=e}}class ES{constructor(e){this.key=e}}class cj{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=qw(e),this.Ra=new Ur(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new i0,s=n?n.Ra:this.Ra;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const m=s.get(f),v=dh(this.query,p)?p:null,w=!!m&&this.mutatedKeys.has(m.key),I=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let N=!1;m&&v?m.data.isEqual(v.data)?w!==I&&(i.track({type:3,doc:v}),N=!0):this.ga(m,v)||(i.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||h&&this.Aa(v,h)<0)&&(l=!0)):!m&&v?(i.track({type:0,doc:v}),N=!0):m&&!v&&(i.track({type:1,doc:m}),N=!0,(c||h)&&(l=!0)),N&&(v?(a=a.add(v),r=I?r.add(f):r.delete(f)):(a=a.delete(f),r=r.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),r=r.delete(f.key),i.track({type:1,doc:f})}return{Ra:a,fa:i,ns:l,mutatedKeys:r}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,p)=>function(v,w){const I=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return I(v)-I(w)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(i),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,a.length!==0||h?{snapshot:new ta(this.query,e.Ra,r,a,e.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new i0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new ES(i))}),this.da.forEach(i=>{e.has(i)||n.push(new _S(i))}),n}ba(e){this.Ta=e.Ts,this.da=oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ta.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uj{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class hj{constructor(e){this.key=e,this.va=!1}}class dj{constructor(e,n,i,s,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new pa(l=>Bw(l),hh),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(Y.comparator),this.Na=new Map,this.La=new Hp,this.Ba={},this.ka=new Map,this.qa=ea.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fj(t,e,n=!0){const i=NS(t);let s;const r=i.Fa.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Da()):s=await TS(i,e,n,!0),s}async function mj(t,e){const n=NS(t);await TS(n,e,!0,!1)}async function TS(t,e,n,i){const s=await P2(t.localStore,jn(e)),r=s.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await pj(t,e,r,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&fS(t.remoteStore,s),l}async function pj(t,e,n,i,s){t.Ka=(p,m,v)=>async function(I,N,y,_){let b=N.view.ma(y);b.ns&&(b=await J_(I.localStore,N.query,!1).then(({documents:S})=>N.view.ma(S,b)));const x=_&&_.targetChanges.get(N.targetId),P=_&&_.targetMismatches.get(N.targetId)!=null,V=N.view.applyChanges(b,I.isPrimaryClient,x,P);return o0(I,N.targetId,V.wa),V.snapshot}(t,p,m,v);const r=await J_(t.localStore,e,!0),a=new cj(e,r.Ts),l=a.ma(r.documents),c=vl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,c);o0(t,n,h.wa);const f=new uj(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function gj(t,e,n){const i=ee(t),s=i.Fa.get(e),r=i.Ma.get(s.targetId);if(r.length>1)return i.Ma.set(s.targetId,r.filter(a=>!hh(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await dm(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Kp(i.remoteStore,s.targetId),mm(i,s.targetId)}).catch(pl)):(mm(i,s.targetId),await dm(i.localStore,s.targetId,!0))}async function yj(t,e){const n=ee(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Kp(n.remoteStore,i.targetId))}async function vj(t,e,n){const i=Aj(t);try{const s=await function(a,l){const c=ee(a),h=Qe.now(),f=l.reduce((v,w)=>v.add(w.key),oe());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=mi(),I=oe();return c.cs.getEntries(v,f).next(N=>{w=N,w.forEach((y,_)=>{_.isValidDocument()||(I=I.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(N=>{p=N;const y=[];for(const _ of l){const b=zk(_,p.get(_.key).overlayedDocument);b!=null&&y.push(new cs(_.key,b,jw(b.value.mapValue),Ct.exists(!0)))}return c.mutationQueue.addMutationBatch(v,h,y,l)}).next(N=>{m=N;const y=N.applyToLocalDocumentSet(p,I);return c.documentOverlayCache.saveOverlays(v,N.batchId,y)})}).then(()=>({batchId:m.batchId,changes:Fw(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let h=a.Ba[a.currentUser.toKey()];h||(h=new ke(de)),h=h.insert(l,c),a.Ba[a.currentUser.toKey()]=h}(i,s.batchId,n),await El(i,s.changes),await _h(i.remoteStore)}catch(s){const r=Xp(s,"Failed to persist write");n.reject(r)}}async function bS(t,e){const n=ee(t);try{const i=await j2(n.localStore,e);e.targetChanges.forEach((s,r)=>{const a=n.Na.get(r);a&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?ye(a.va):s.removedDocuments.size>0&&(ye(a.va),a.va=!1))}),await El(n,i,e)}catch(i){await pl(i)}}function a0(t,e,n){const i=ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((r,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=ee(a);c.onlineState=l;let h=!1;c.queries.forEach((f,p)=>{for(const m of p.j_)m.Z_(l)&&(h=!0)}),h&&eg(c)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _j(t,e,n){const i=ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Na.get(e),r=s&&s.key;if(r){let a=new ke(Y.comparator);a=a.insert(r,_t.newNoDocument(r,J.min()));const l=oe().add(r),c=new gh(J.min(),new Map,new ke(de),a,l);await bS(i,c),i.Oa=i.Oa.remove(r),i.Na.delete(e),ng(i)}else await dm(i.localStore,e,!1).then(()=>mm(i,e,n)).catch(pl)}async function Ej(t,e){const n=ee(t),i=e.batch.batchId;try{const s=await k2(n.localStore,e);SS(n,i,null),wS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await El(n,s)}catch(s){await pl(s)}}async function Tj(t,e,n){const i=ee(t);try{const s=await function(a,l){const c=ee(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next(p=>(ye(p!==null),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(i.localStore,e);SS(i,e,n),wS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await El(i,s)}catch(s){await pl(s)}}function wS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function SS(t,e,n){const i=ee(t);let s=i.Ba[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function mm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||AS(t,i)})}function AS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Kp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ng(t))}function o0(t,e,n){for(const i of n)i instanceof _S?(t.La.addReference(i.key,e),bj(t,i)):i instanceof ES?($("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||AS(t,i.key)):Z()}function bj(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||($("SyncEngine","New document in limbo: "+n),t.xa.add(i),ng(t))}function ng(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(Ae.fromString(e)),i=t.qa.next();t.Na.set(i,new hj(n)),t.Oa=t.Oa.insert(n,i),fS(t.remoteStore,new Li(jn(uh(n.path)),i,"TargetPurposeLimboResolution",jp.oe))}}async function El(t,e,n){const i=ee(t),s=[],r=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((l,c)=>{a.push(i.Ka(c,e,n).then(h=>{var f;if((h||n)&&i.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Gp.Wi(c.targetId,h);r.push(p)}}))}),await Promise.all(a),i.Ca.d_(s),await async function(c,h){const f=ee(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>z.forEach(h,m=>z.forEach(m.$i,v=>f.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>z.forEach(m.Ui,v=>f.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!gl(p))throw p;$("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const v=f.os.get(m),w=v.snapshotVersion,I=v.withLastLimboFreeSnapshotVersion(w);f.os=f.os.insert(m,I)}}}(i.localStore,r))}async function wj(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());const i=await cS(n.localStore,e);n.currentUser=e,function(r,a){r.ka.forEach(l=>{l.forEach(c=>{c.reject(new G(U.CANCELLED,a))})}),r.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await El(n,i.hs)}}function Sj(t,e){const n=ee(t),i=n.Na.get(e);if(i&&i.va)return oe().add(i.key);{let s=oe();const r=n.Ma.get(e);if(!r)return s;for(const a of r){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function NS(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_j.bind(null,e),e.Ca.d_=oj.bind(null,e.eventManager),e.Ca.$a=lj.bind(null,e.eventManager),e}function Aj(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ej.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tj.bind(null,e),e}class Cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return x2(this.persistence,new C2,e.initialUser,this.serializer)}Ga(e){return new N2(Fp.Zr,this.serializer)}Wa(e){return new U2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cu.provider={build:()=>new Cu};class pm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>a0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=wj.bind(null,this.syncEngine),await sj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aj}()}createDatastore(e){const n=yh(e.databaseInfo.databaseId),i=function(r){return new q2(r)}(e.databaseInfo);return function(r,a,l,c){return new G2(r,a,l,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,a,l){return new $2(i,s,r,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>a0(this.syncEngine,n,0),function(){return t0.D()?new t0:new L2}())}createSyncEngine(e,n){return function(s,r,a,l,c,h,f){const p=new dj(s,r,a,l,c,h);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=ee(s);$("RemoteStore","RemoteStore shutting down."),r.L_.add(5),await _l(r),r.k_.shutdown(),r.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pm.provider={build:()=>new pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=vt.UNAUTHENTICATED,this.clientId=Dw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{$("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>($("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Xp(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Fd(t,e){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await cS(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function l0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Rj(t);$("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>n0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>n0(e.remoteStore,s)),t._onlineComponents=e}async function Rj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Wr("Error using user provided cache. Falling back to memory cache: "+n),await Fd(t,new Cu)}}else $("FirestoreClient","Using default OfflineComponentProvider"),await Fd(t,new Cu);return t._offlineComponents}async function RS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),await l0(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),await l0(t,new pm))),t._onlineComponents}function Ij(t){return RS(t).then(e=>e.syncEngine)}async function Du(t){const e=await RS(t),n=e.eventManager;return n.onListen=fj.bind(null,e.syncEngine),n.onUnlisten=gj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yj.bind(null,e.syncEngine),n}function Cj(t,e,n={}){const i=new ai;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,c,h){const f=new ig({next:m=>{f.Za(),a.enqueueAndForget(()=>Jp(r,p));const v=m.docs.has(l);!v&&m.fromCache?h.reject(new G(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?h.reject(new G(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new tg(uh(l.path),f,{includeMetadataChanges:!0,_a:!0});return Zp(r,p)}(await Du(t),t.asyncQueue,e,n,i)),i.promise}function Dj(t,e,n={}){const i=new ai;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,c,h){const f=new ig({next:m=>{f.Za(),a.enqueueAndForget(()=>Jp(r,p)),m.fromCache&&c.source==="server"?h.reject(new G(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new tg(l,f,{includeMetadataChanges:!0,_a:!0});return Zp(r,p)}(await Du(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t,e,n){if(!n)throw new G(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xj(t,e,n,i){if(e===!0&&i===!0)throw new G(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function u0(t){if(!Y.isDocumentKey(t))throw new G(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function h0(t){if(Y.isDocumentKey(t))throw new G(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Eh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Dt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Eh(t);throw new G(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function kj(t,e){if(e<=0)throw new G(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Th{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Qx;switch(i.type){case"firstParty":return new Jx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=c0.get(n);i&&($("ComponentProvider","Removing Datastore"),c0.delete(n),i.terminate())}(this),Promise.resolve()}}function jj(t,e,n,i={}){var s;const r=(t=Dt(t,Th))._getSettings(),a=`${e}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==a&&Wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:a,ssl:!1})),i.mockUserToken){let l,c;if(typeof i.mockUserToken=="string")l=i.mockUserToken,c=vt.MOCK_USER;else{l=l1(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new G(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new vt(h)}t._authCredentials=new Wx(new Cw(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class bt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class Xi extends gi{constructor(e,n,i){super(e,n,uh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new Y(e))}withConverter(e){return new Xi(this.firestore,e,this._path)}}function at(t,e,...n){if(t=xe(t),CS("collection","path",e),t instanceof Th){const i=Ae.fromString(e,...n);return h0(i),new Xi(t,null,i)}{if(!(t instanceof bt||t instanceof Xi))throw new G(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return h0(i),new Xi(t.firestore,null,i)}}function He(t,e,...n){if(t=xe(t),arguments.length===1&&(e=Dw.newId()),CS("doc","path",e),t instanceof Th){const i=Ae.fromString(e,...n);return u0(i),new bt(t,null,new Y(i))}{if(!(t instanceof bt||t instanceof Xi))throw new G(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return u0(i),new bt(t.firestore,t instanceof Xi?t.converter:null,new Y(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hS(this,"async_queue_retry"),this.Vu=()=>{const i=Hd();i&&$("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Hd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ai;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!gl(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw fi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Wp.createAndSchedule(this,e,n,i,r=>this.yu(r));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function m0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Vn extends Th{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new f0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f0(e),this._firestoreClient=void 0,await e}}}function Mj(t,e){const n=typeof t=="object"?t:Ep(),i=typeof t=="string"?t:"(default)",s=Zs(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=a1("firestore");r&&jj(s,...r)}return s}function Tl(t){if(t._terminated)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Oj(t),t._firestoreClient}function Oj(t){var e,n,i;const s=t._freezeSettings(),r=function(l,c,h,f){return new dk(l,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,IS(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Nj(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new na(ht.fromBase64String(e))}catch(n){throw new G(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new na(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=/^__.*__$/;class Vj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new yl(e,this.data,n,this.fieldTransforms)}}class DS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class og{constructor(e,n,i,s,r,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.vu(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new og(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xS(this.Cu)&&Pj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Uj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||yh(e)}Qu(e,n,i,s=!1){return new og({Cu:e,methodName:n,qu:i,path:lt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wl(t){const e=t._freezeSettings(),n=yh(t._databaseId);return new Uj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lg(t,e,n,i,s,r={}){const a=t.Qu(r.merge||r.mergeFields?2:0,e,n,s);cg("Data must be an object, but it was:",a,i);const l=MS(i,a);let c,h;if(r.merge)c=new Kt(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const f=[];for(const p of r.mergeFields){const m=gm(e,p,n);if(!a.contains(m))throw new G(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);PS(f,m)||f.push(m)}c=new Kt(f),h=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=a.fieldTransforms;return new Vj(new Ot(l),c,h)}class bh extends sg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}function kS(t,e,n,i){const s=t.Qu(1,e,n);cg("Data must be an object, but it was:",s,i);const r=[],a=Ot.empty();Js(i,(c,h)=>{const f=ug(e,c,n);h=xe(h);const p=s.Nu(f);if(h instanceof bh)r.push(f);else{const m=Sl(h,p);m!=null&&(r.push(f),a.set(f,m))}});const l=new Kt(r);return new DS(a,l,s.fieldTransforms)}function jS(t,e,n,i,s,r){const a=t.Qu(1,e,n),l=[gm(e,i,n)],c=[s];if(r.length%2!=0)throw new G(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<r.length;m+=2)l.push(gm(e,r[m])),c.push(r[m+1]);const h=[],f=Ot.empty();for(let m=l.length-1;m>=0;--m)if(!PS(h,l[m])){const v=l[m];let w=c[m];w=xe(w);const I=a.Nu(v);if(w instanceof bh)h.push(v);else{const N=Sl(w,I);N!=null&&(h.push(v),f.set(v,N))}}const p=new Kt(h);return new DS(f,p,a.fieldTransforms)}function Lj(t,e,n,i=!1){return Sl(n,t.Qu(i?4:3,e))}function Sl(t,e){if(OS(t=xe(t)))return cg("Unsupported field value:",e,t),MS(t,e);if(t instanceof sg)return function(i,s){if(!xS(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let c=Sl(l,s.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),a++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=xe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Mk(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Qe.fromDate(i);return{timestampValue:Ru(s.serializer,r)}}if(i instanceof Qe){const r=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ru(s.serializer,r)}}if(i instanceof rg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof na)return{bytesValue:nS(s.serializer,i._byteString)};if(i instanceof bt){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:qp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof ag)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Lp(l.serializer,c)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${Eh(i)}`)}(t,e)}function MS(t,e){const n={};return xw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,(i,s)=>{const r=Sl(s,e.Mu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function OS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof rg||t instanceof na||t instanceof bt||t instanceof sg||t instanceof ag)}function cg(t,e,n){if(!OS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=Eh(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function gm(t,e,n){if((e=xe(e))instanceof bl)return e._internalPath;if(typeof e=="string")return ug(t,e);throw xu("Field path arguments must be of type string or ",t,!1,void 0,n)}const zj=new RegExp("[~\\*/\\[\\]]");function ug(t,e,n){if(e.search(zj)>=0)throw xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bl(...e.split("."))._internalPath}catch{throw xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xu(t,e,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(r||a)&&(c+=" (found",r&&(c+=` in field ${i}`),a&&(c+=` in document ${s}`),c+=")"),new G(U.INVALID_ARGUMENT,l+t+c)}function PS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Bj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Bj extends VS{data(){return super.data()}}function wh(t,e){return typeof e=="string"?ug(t,e):e instanceof bl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hg{}class dg extends hg{}function Ht(t,e,...n){let i=[];e instanceof hg&&i.push(e),i=i.concat(n),function(r){const a=r.filter(c=>c instanceof fg).length,l=r.filter(c=>c instanceof Sh).length;if(a>1||a>0&&l>0)throw new G(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Sh extends dg{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Sh(e,n,i)}_apply(e){const n=this._parse(e);return LS(e._query,n),new gi(e.firestore,e.converter,om(e._query,n))}_parse(e){const n=wl(e.firestore);return function(r,a,l,c,h,f,p){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){g0(p,f);const v=[];for(const w of p)v.push(p0(c,r,w));m={arrayValue:{values:v}}}else m=p0(c,r,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||g0(p,f),m=Lj(l,a,p,f==="in"||f==="not-in");return Ge.create(h,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ft(t,e,n){const i=e,s=wh("where",t);return Sh._create(s,i,n)}class fg extends hg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:vn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const c of l)LS(a,c),a=om(a,c)}(e._query,n),new gi(e.firestore,e.converter,om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mg extends dg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mg(e,n)}_apply(e){const n=function(s,r,a){if(s.startAt!==null)throw new G(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ho(r,a)}(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new ma(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function vo(t,e="asc"){const n=e,i=wh("orderBy",t);return mg._create(i,n)}class pg extends dg{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new pg(e,n,i)}_apply(e){return new gi(e.firestore,e.converter,Su(e._query,this._limit,this._limitType))}}function dc(t){return kj("limit",t),pg._create("limit",t,"F")}function p0(t,e,n){if(typeof(n=xe(n))=="string"){if(n==="")throw new G(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zw(e)&&n.indexOf("/")!==-1)throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ae.fromString(n));if(!Y.isDocumentKey(i))throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return P_(t,new Y(i))}if(n instanceof bt)return P_(t,n._key);throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eh(n)}.`)}function g0(t,e){if(!Array.isArray(t)||t.length===0)throw new G(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LS(t,e){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qj{convertValue(e,n="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Js(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var n,i,s;const r=(s=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>Le(a.doubleValue));return new ag(r)}convertGeoPoint(e){return new rg(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Op(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(zo(e));default:return null}}convertTimestamp(e){const n=ns(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ae.fromString(e);ye(lS(i));const s=new Bo(i.get(1),i.get(3)),r=new Y(i.popFirst(5));return s.isEqual(n)||fi(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zS extends VS{constructor(e,n,i,s,r,a){super(e,n,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(wh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Uc extends zS{data(e={}){return super.data(e)}}class BS{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Wa(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Uc(this._firestore,this._userDataWriter,i.key,i,new Wa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Uc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Wa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const c=new Uc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Wa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:Hj(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Hj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t){t=Dt(t,bt);const e=Dt(t.firestore,Vn);return Cj(Tl(e),t._key).then(n=>qS(e,t,n))}class yg extends qj{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function zi(t){t=Dt(t,gi);const e=Dt(t.firestore,Vn),n=Tl(e),i=new yg(e);return US(t._query),Dj(n,t._query).then(s=>new BS(e,i,t,s))}function Fj(t,e,n){t=Dt(t,bt);const i=Dt(t.firestore,Vn),s=gg(t.converter,e,n);return Al(i,[lg(wl(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ct.none())])}function Nn(t,e,n,...i){t=Dt(t,bt);const s=Dt(t.firestore,Vn),r=wl(s);let a;return a=typeof(e=xe(e))=="string"||e instanceof bl?jS(r,"updateDoc",t._key,e,n,i):kS(r,"updateDoc",t._key,e),Al(s,[a.toMutation(t._key,Ct.exists(!0))])}function ku(t){return Al(Dt(t.firestore,Vn),[new ph(t._key,Ct.none())])}function ju(t,e){const n=Dt(t.firestore,Vn),i=He(t),s=gg(t.converter,e);return Al(n,[lg(wl(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Ct.exists(!1))]).then(()=>i)}function _o(t,...e){var n,i,s;t=xe(t);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||m0(e[a])||(r=e[a],a++);const l={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(m0(e[a])){const p=e[a];e[a]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[a+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),e[a+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let c,h,f;if(t instanceof bt)h=Dt(t.firestore,Vn),f=uh(t._key.path),c={next:p=>{e[a]&&e[a](qS(h,t,p))},error:e[a+1],complete:e[a+2]};else{const p=Dt(t,gi);h=Dt(p.firestore,Vn),f=p._query;const m=new yg(h);c={next:v=>{e[a]&&e[a](new BS(h,m,p,v))},error:e[a+1],complete:e[a+2]},US(t._query)}return function(m,v,w,I){const N=new ig(I),y=new tg(v,N,w);return m.asyncQueue.enqueueAndForget(async()=>Zp(await Du(m),y)),()=>{N.Za(),m.asyncQueue.enqueueAndForget(async()=>Jp(await Du(m),y))}}(Tl(h),f,l,c)}function Al(t,e){return function(i,s){const r=new ai;return i.asyncQueue.enqueueAndForget(async()=>vj(await Ij(i),s,r)),r.promise}(Tl(t),e)}function qS(t,e,n){const i=n.docs.get(e._key),s=new yg(t);return new zS(t,s,e._key,i,new Wa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wl(e)}set(e,n,i){this._verifyNotCommitted();const s=Gd(e,this._firestore),r=gg(s.converter,n,i),a=lg(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,Ct.none())),this}update(e,n,i,...s){this._verifyNotCommitted();const r=Gd(e,this._firestore);let a;return a=typeof(n=xe(n))=="string"||n instanceof bl?jS(this._dataReader,"WriteBatch.update",r._key,n,i,s):kS(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(a.toMutation(r._key,Ct.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Gd(e,this._firestore);return this._mutations=this._mutations.concat(new ph(n._key,Ct.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gd(t,e){if((t=xe(t)).firestore!==e)throw new G(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t){return Tl(t=Dt(t,Vn)),new Gj(t,e=>Al(t,e))}(function(e,n=!0){(function(s){fa=s})(ha),On(new yn("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new Vn(new Xx(i.getProvider("auth-internal")),new tk(i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new G(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bo(h.options.projectId,f)}(a,s),a);return r=Object.assign({useFetchStreams:n},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),on(x_,"4.7.3",e),on(x_,"4.7.3","esm2017")})();const HS="@firebase/installations",vg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=1e4,GS=`w:${vg}`,KS="FIS_v2",Kj="https://firebaseinstallations.googleapis.com/v1",$j=60*60*1e3,Yj="installations",Qj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Gs=new Xs(Yj,Qj,Wj);function $S(t){return t instanceof En&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS({projectId:t}){return`${Kj}/projects/${t}/installations`}function QS(t){return{token:t.token,requestStatus:2,expiresIn:Zj(t.expiresIn),creationTime:Date.now()}}async function WS(t,e){const i=(await e.json()).error;return Gs.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function XS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Xj(t,{refreshToken:e}){const n=XS(t);return n.append("Authorization",Jj(e)),n}async function ZS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Zj(t){return Number(t.replace("s","000"))}function Jj(t){return`${KS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=YS(t),s=XS(t),r=e.getImmediate({optional:!0});if(r){const h=await r.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={fid:n,authVersion:KS,appId:t.appId,sdkVersion:GS},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await ZS(()=>fetch(i,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:QS(h.authToken)}}else throw await WS("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=/^[cdef][\w-]{21}$/,vm="";function iM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=sM(t);return nM.test(n)?n:vm}catch{return vm}}function sM(t){return tM(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=new Map;function tA(t,e){const n=Ah(t);nA(n,e),rM(n,e)}function nA(t,e){const n=eA.get(t);if(n)for(const i of n)i(e)}function rM(t,e){const n=aM();n&&n.postMessage({key:t,fid:e}),oM()}let Ns=null;function aM(){return!Ns&&"BroadcastChannel"in self&&(Ns=new BroadcastChannel("[Firebase] FID Change"),Ns.onmessage=t=>{nA(t.data.key,t.data.fid)}),Ns}function oM(){eA.size===0&&Ns&&(Ns.close(),Ns=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="firebase-installations-database",cM=1,Ks="firebase-installations-store";let Kd=null;function _g(){return Kd||(Kd=zb(lM,cM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ks)}}})),Kd}async function Mu(t,e){const n=Ah(t),s=(await _g()).transaction(Ks,"readwrite"),r=s.objectStore(Ks),a=await r.get(n);return await r.put(e,n),await s.done,(!a||a.fid!==e.fid)&&tA(t,e.fid),e}async function iA(t){const e=Ah(t),i=(await _g()).transaction(Ks,"readwrite");await i.objectStore(Ks).delete(e),await i.done}async function Nh(t,e){const n=Ah(t),s=(await _g()).transaction(Ks,"readwrite"),r=s.objectStore(Ks),a=await r.get(n),l=e(a);return l===void 0?await r.delete(n):await r.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&tA(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eg(t){let e;const n=await Nh(t.appConfig,i=>{const s=uM(i),r=hM(t,s);return e=r.registrationPromise,r.installationEntry});return n.fid===vm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function uM(t){const e=t||{fid:iM(),registrationStatus:0};return sA(e)}function hM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Gs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=dM(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:fM(t)}:{installationEntry:e}}async function dM(t,e){try{const n=await eM(t,e);return Mu(t.appConfig,n)}catch(n){throw $S(n)&&n.customData.serverCode===409?await iA(t.appConfig):await Mu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function fM(t){let e=await y0(t.appConfig);for(;e.registrationStatus===1;)await JS(100),e=await y0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Eg(t);return i||n}return e}function y0(t){return Nh(t,e=>{if(!e)throw Gs.create("installation-not-found");return sA(e)})}function sA(t){return mM(t)?{fid:t.fid,registrationStatus:0}:t}function mM(t){return t.registrationStatus===1&&t.registrationTime+FS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM({appConfig:t,heartbeatServiceProvider:e},n){const i=gM(t,n),s=Xj(t,n),r=e.getImmediate({optional:!0});if(r){const h=await r.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={installation:{sdkVersion:GS,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await ZS(()=>fetch(i,l));if(c.ok){const h=await c.json();return QS(h)}else throw await WS("Generate Auth Token",c)}function gM(t,{fid:e}){return`${YS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tg(t,e=!1){let n;const i=await Nh(t.appConfig,r=>{if(!rA(r))throw Gs.create("not-registered");const a=r.authToken;if(!e&&_M(a))return r;if(a.requestStatus===1)return n=yM(t,e),r;{if(!navigator.onLine)throw Gs.create("app-offline");const l=TM(r);return n=vM(t,l),l}});return n?await n:i.authToken}async function yM(t,e){let n=await v0(t.appConfig);for(;n.authToken.requestStatus===1;)await JS(100),n=await v0(t.appConfig);const i=n.authToken;return i.requestStatus===0?Tg(t,e):i}function v0(t){return Nh(t,e=>{if(!rA(e))throw Gs.create("not-registered");const n=e.authToken;return bM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function vM(t,e){try{const n=await pM(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Mu(t.appConfig,i),n}catch(n){if($S(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await iA(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Mu(t.appConfig,i)}throw n}}function rA(t){return t!==void 0&&t.registrationStatus===2}function _M(t){return t.requestStatus===2&&!EM(t)}function EM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+$j}function TM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function bM(t){return t.requestStatus===1&&t.requestTime+FS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(t){const e=t,{installationEntry:n,registrationPromise:i}=await Eg(e);return i?i.catch(console.error):Tg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SM(t,e=!1){const n=t;return await AM(n),(await Tg(n,e)).token}async function AM(t){const{registrationPromise:e}=await Eg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){if(!t||!t.options)throw $d("App Configuration");if(!t.name)throw $d("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw $d(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function $d(t){return Gs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="installations",RM="installations-internal",IM=t=>{const e=t.getProvider("app").getImmediate(),n=NM(e),i=Zs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},CM=t=>{const e=t.getProvider("app").getImmediate(),n=Zs(e,aA).getImmediate();return{getId:()=>wM(n),getToken:s=>SM(n,s)}};function DM(){On(new yn(aA,IM,"PUBLIC")),On(new yn(RM,CM,"PRIVATE"))}DM();on(HS,vg);on(HS,vg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou="analytics",xM="firebase_id",kM="origin",jM=60*1e3,MM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt=new rh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xt=new Xs("analytics","Analytics",OM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t){if(!t.startsWith(bg)){const e=Xt.create("invalid-gtag-resource",{gtagURL:t});return Pt.warn(e.message),""}return t}function oA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function VM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function UM(t,e){const n=VM("firebase-js-sdk-policy",{createScriptURL:PM}),i=document.createElement("script"),s=`${bg}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function LM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function zM(t,e,n,i,s,r){const a=i[s];try{if(a)await e[a];else{const c=(await oA(n)).find(h=>h.measurementId===s);c&&await e[c.appId]}}catch(l){Pt.error(l)}t("config",s,r)}async function BM(t,e,n,i,s){try{let r=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await oA(n);for(const c of a){const h=l.find(p=>p.measurementId===c),f=h&&e[h.appId];if(f)r.push(f);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),t("event",i,s||{})}catch(r){Pt.error(r)}}function qM(t,e,n,i){async function s(r,...a){try{if(r==="event"){const[l,c]=a;await BM(t,e,n,l,c)}else if(r==="config"){const[l,c]=a;await zM(t,e,n,i,l,c)}else if(r==="consent"){const[l,c]=a;t("consent",l,c)}else if(r==="get"){const[l,c,h]=a;t("get",l,c,h)}else if(r==="set"){const[l]=a;t("set",l)}else t(r,...a)}catch(l){Pt.error(l)}}return s}function HM(t,e,n,i,s){let r=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=qM(r,t,e,n),{gtagCore:r,wrappedGtag:window[s]}}function FM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(bg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=30,KM=1e3;class $M{constructor(e={},n=KM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const lA=new $M;function YM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function QM(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:YM(i)},r=MM.replace("{app-id}",n),a=await fetch(r,s);if(a.status!==200&&a.status!==304){let l="";try{const c=await a.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw Xt.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function WM(t,e=lA,n){const{appId:i,apiKey:s,measurementId:r}=t.options;if(!i)throw Xt.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw Xt.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new JM;return setTimeout(async()=>{l.abort()},jM),cA({appId:i,apiKey:s,measurementId:r},a,l,e)}async function cA(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=lA){var r;const{appId:a,measurementId:l}=t;try{await XM(i,e)}catch(c){if(l)return Pt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:l};throw c}try{const c=await QM(t);return s.deleteThrottleMetadata(a),c}catch(c){const h=c;if(!ZM(h)){if(s.deleteThrottleMetadata(a),l)return Pt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:l};throw c}const f=Number((r=h==null?void 0:h.customData)===null||r===void 0?void 0:r.httpStatus)===503?n_(n,s.intervalMillis,GM):n_(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,p),Pt.debug(`Calling attemptFetch again in ${f} millis`),cA(t,p,i,s)}}function XM(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(r),i(Xt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ZM(t){if(!(t instanceof En)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class JM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function eO(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const r=await e,a=Object.assign(Object.assign({},i),{send_to:r});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(){if(Pb())try{await Vb()}catch(t){return Pt.warn(Xt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Pt.warn(Xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function nO(t,e,n,i,s,r,a){var l;const c=WM(t);c.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&Pt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Pt.error(v)),e.push(c);const h=tO().then(v=>{if(v)return i.getId()}),[f,p]=await Promise.all([c,h]);FM(r)||UM(r,f.measurementId),s("js",new Date);const m=(l=a==null?void 0:a.config)!==null&&l!==void 0?l:{};return m[kM]="firebase",m.update=!0,p!=null&&(m[xM]=p),s("config",f.measurementId,m),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.app=e}_delete(){return delete Eo[this.app.options.appId],Promise.resolve()}}let Eo={},_0=[];const E0={};let Yd="dataLayer",sO="gtag",T0,uA,b0=!1;function rO(){const t=[];if(Ob()&&t.push("This is a browser extension environment."),p1()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=Xt.create("invalid-analytics-context",{errorInfo:e});Pt.warn(n.message)}}function aO(t,e,n){rO();const i=t.options.appId;if(!i)throw Xt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Pt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xt.create("no-api-key");if(Eo[i]!=null)throw Xt.create("already-exists",{id:i});if(!b0){LM(Yd);const{wrappedGtag:r,gtagCore:a}=HM(Eo,_0,E0,Yd,sO);uA=r,T0=a,b0=!0}return Eo[i]=nO(t,_0,E0,e,T0,Yd,n),new iO(t)}function oO(t=Ep()){t=xe(t);const e=Zs(t,Ou);return e.isInitialized()?e.getImmediate():lO(t)}function lO(t,e={}){const n=Zs(t,Ou);if(n.isInitialized()){const s=n.getImmediate();if(Oo(e,n.getOptions()))return s;throw Xt.create("already-initialized")}return n.initialize({options:e})}function cO(t,e,n,i){t=xe(t),eO(uA,Eo[t.app.options.appId],e,n,i).catch(s=>Pt.error(s))}const w0="@firebase/analytics",S0="0.10.8";function uO(){On(new yn(Ou,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return aO(i,s,n)},"PUBLIC")),On(new yn("analytics-internal",t,"PRIVATE")),on(w0,S0),on(w0,S0,"esm2017");function t(e){try{const n=e.getProvider(Ou).getImmediate();return{logEvent:(i,s,r)=>cO(n,i,s,r)}}catch(n){throw Xt.create("interop-component-reg-failed",{reason:n})}}}uO();const hO={apiKey:"AIzaSyDe3twpHJjf4-f-kPYO9_3CKYa83MY7Qoc",authDomain:"iotuyapp.firebaseapp.com",projectId:"iotuyapp",storageBucket:"iotuyapp.firebasestorage.app",messagingSenderId:"375880123616",appId:"1:375880123616:web:439082786411401f407c85",measurementId:"G-K84V8W30GP"},wg=Bb(hO),La=Gx(wg),se=Mj(wg);typeof window<"u"&&oO(wg);const hA=M.createContext({}),Nl=()=>{const t=M.useContext(hA);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},dO=({children:t})=>{const[e,n]=M.useState(null),[i,s]=M.useState(!0),r=async(f,p)=>{try{await DD(La,f,p)}catch(m){throw console.error("Login error:",m),m}},a=async(f,p)=>{try{await CD(La,f,p)}catch(m){throw console.error("Register error:",m),m}},l=async()=>{try{const f=new Yn;await ex(La,f)}catch(f){throw console.error("Google login error:",f),f}},c=async()=>{try{await MD(La)}catch(f){throw console.error("Logout error:",f),f}};M.useEffect(()=>jD(La,p=>{if(p){const m={uid:p.uid,email:p.email||"",displayName:p.displayName||void 0,photoURL:p.photoURL||void 0};n(m)}else n(null);s(!1)}),[]);const h={currentUser:e,loading:i,login:r,register:a,loginWithGoogle:l,logout:c};return u.jsx(hA.Provider,{value:h,children:t})};class fO{async getUserSettings(e){try{const n=He(se,"userSettings",e),i=await Nr(n);return i.exists()?{id:i.id,...i.data()}:null}catch(n){throw console.error("Error getting user settings:",n),new Error("Nepodařilo se načíst uživatelská nastavení")}}async createUserSettings(e){try{const n=He(se,"userSettings",e.uid);await Fj(n,e)}catch(n){throw console.error("Error creating user settings:",n),n}}async updateUserSettings(e,n){try{const i=He(se,"userSettings",e);await Nn(i,{...n,updatedAt:Date.now()})}catch(i){throw console.error("Error updating user settings:",i),new Error("Nepodařilo se aktualizovat nastavení")}}async subscribeToUserRooms(e,n){try{const i=at(se,"rooms"),s=Ht(i,Ft("userId","==",e),vo("createddAt","desc"));return _o(s,r=>{const a=r.docs.map(l=>({id:l.id,...l.data()}));n(a)})}catch(i){throw console.error("Error subscribing to rooms:",i),i}}async getUserRooms(e){try{const n=at(se,"rooms"),i=Ht(n,Ft("userId","==",e),vo("createdAt","desc"));return(await zi(i)).docs.map(r=>({id:r.id,...r.data()}))}catch(n){throw console.error("Error getting user rooms:",n),new Error("Nepodařilo se načíst místnosti")}}async createRoom(e,n){try{const i=at(se,"rooms");return(await ju(i,{...n,userId:e,createdAt:Date.now(),updatedAt:Date.now()})).id}catch(i){throw console.error("Error creating room:",i),new Error("Nepodařilo se vytvořit místnost")}}async updateRoom(e,n){try{const i=He(se,"rooms",e);await Nn(i,{...n,updatedAt:Date.now()})}catch(i){throw console.error("Error updating room:",i),new Error("Nepodařilo se aktualizovat místnost")}}async deleteRoom(e){try{const n=He(se,"rooms",e),i=await Nr(n);if(i.exists()&&i.data().isDefault)throw new Error("Nelze smazat výchozí místnost");await ku(n)}catch(n){throw console.error("Error deleting room:",n),n instanceof Error?n:new Error("Nepodařilo se smazat místnost")}}async addDeviceToRoom(e,n){try{const i=He(se,"rooms",e),s=await Nr(i);if(!s.exists())throw new Error("Místnost neexistuje");const a=[...s.data().devices||[]];a.includes(n)||(a.push(n),await Nn(i,{devices:a,updatedAt:Date.now()}))}catch(i){throw console.error("Error adding device to room:",i),new Error("Nepodařilo se přidat zařízení do místnosti")}}async removeDeviceFromRoom(e,n){try{const i=He(se,"rooms",e),s=await Nr(i);if(!s.exists())throw new Error("Místnost neexistuje");const a=(s.data().devices||[]).filter(l=>l!==n);await Nn(i,{devices:a,updatedAt:Date.now()})}catch(i){throw console.error("Error removing device from room:",i),new Error("Nepodařilo se odebrat zařízení z místnosti")}}async subscribeToUserDevices(e,n){try{const i=at(se,"devices"),s=Ht(i,Ft("userId","==",e));return _o(s,r=>{const a=r.docs.map(l=>({id:l.id,...l.data()}));n(a)})}catch(i){throw console.error("Error subscribing to user devices:",i),i}}async getUserDevices(e){try{const n=at(se,"devices"),i=Ht(n,Ft("userId","==",e)),s=await zi(i),r=[];return s.forEach(a=>{r.push({id:a.id,...a.data()})}),r}catch(n){throw console.error("Error getting user devices:",n),new Error("Nepodařilo se načíst zařízení")}}async saveUserDevices(e,n){try{const i=ym(se),s=at(se,"devices"),r=Ht(s,Ft("userId","==",e));(await zi(r)).forEach(l=>{i.delete(l.ref)}),n.forEach(l=>{const c=He(s,l.id);i.set(c,{...l,userId:e,lastUpdated:Date.now()})}),await i.commit()}catch(i){throw console.error("Error saving user devices:",i),new Error("Nepodařilo se uložit zařízení")}}async updateDevice(e,n){try{const i=He(se,"devices",e);await Nn(i,{...n,lastUpdated:Date.now()})}catch(i){throw console.error("Error updating device:",i),new Error("Nepodařilo se aktualizovat zařízení")}}async updateDevicePosition(e,n){try{const i=He(se,"devices",e);await Nn(i,{position:n,updatedAt:Date.now()})}catch(i){throw console.error("FirestoreService error:",i),new Error("Failed to update device position.")}}async updateDeviceCustomization(e,n){try{const i=He(se,"devices",e);await Nn(i,{...n,lastUpdated:Date.now()})}catch(i){throw console.error("Error updating device customization:",i),new Error("Nepodařilo se aktualizovat vlastní nastavení zařízení")}}getDeviceCategories(){return[{id:"switch",name:"switch",displayName:"Spínače a Zásuvky",icon:"🔌",color:"#007bff",description:"Chytré spínače, zásuvky a relé",defaultCommands:["switch_1","switch_led"]},{id:"light",name:"light",displayName:"Osvětlení",icon:"💡",color:"#ffc107",description:"LED žárovky, pásky a osvětlení",defaultCommands:["switch_led","bright_value","colour_data"]},{id:"sensor",name:"sensor",displayName:"Senzory",icon:"📡",color:"#28a745",description:"Teplotní, vlhkostní a pohybové senzory",defaultCommands:["temp_current","humidity_value"]},{id:"climate",name:"climate",displayName:"Klimatizace",icon:"❄️",color:"#17a2b8",description:"Klimatizace, ventilátory a topení",defaultCommands:["switch","temp_set","mode"]},{id:"security",name:"security",displayName:"Zabezpečení",icon:"🔒",color:"#dc3545",description:"Kamery, alarmy a bezpečnostní senzory",defaultCommands:["switch","alarm_switch"]},{id:"cover",name:"cover",displayName:"Žaluzie a Rolety",icon:"🪟",color:"#6f42c1",description:"Motorové žaluzie, rolety a markýzy",defaultCommands:["control","position"]},{id:"garden",name:"garden",displayName:"Zahrada",icon:"🌱",color:"#20c997",description:"Zavlažování, čerpadla a zahradní technika",defaultCommands:["switch_1","timer_1"]},{id:"other",name:"other",displayName:"Ostatní",icon:"⚙️",color:"#6c757d",description:"Ostatní chytrá zařízení",defaultCommands:["switch"]}]}async subscribeToFamilyMembers(e,n){try{const i=at(se,"familyMembers"),s=Ht(i,Ft("userId","==",e),vo("createdAt","asc"));return _o(s,r=>{const a=r.docs.map(l=>({id:l.id,...l.data()}));n(a)})}catch(i){throw console.error("Error subscribing to family members:",i),i}}async addFamilyMember(e,n){try{const i=at(se,"familyMembers");return(await ju(i,{...n,userId:e,createdAt:Date.now()})).id}catch(i){throw console.error("Error creating family member:",i),new Error("Nepodařilo se vytvořit člena rodiny")}}async updateFamilyMember(e,n){try{const i=He(se,"familyMembers",e);await Nn(i,n)}catch(i){throw console.error("Error updating family member:",i),new Error("Nepodařilo se aktualizovat člena rodiny")}}async deleteFamilyMember(e){try{const n=He(se,"familyMembers",e);await ku(n)}catch(n){throw console.error("Error deleting family member:",n),new Error("Nepodařilo se smazat člena rodiny")}}}const bs=new fO,fc={async subscribeToEvents(t,e){try{const n=at(se,"calendarEvents"),i=Ht(n,Ft("userId","==",t));return _o(i,s=>{const r=s.docs.map(a=>({id:a.id,...a.data()}));e(r)})}catch(n){throw console.error("Error subscribing to events:",n),n}},async getEvents(t){const e=at(se,"calendarEvents"),n=Ht(e,Ft("userId","==",t));return(await zi(n)).docs.map(s=>({id:s.id,...s.data()}))},async addEvent(t,e){const n=at(se,"calendarEvents"),i={...e,userId:t,createdAt:Date.now(),updatedAt:Date.now()};return(await ju(n,i)).id},async updateEvent(t,e){const n=He(se,"calendarEvents",t);await Nn(n,{...e,updatedAt:Date.now()})},async deleteEvent(t){const e=He(se,"calendarEvents",t);await ku(e)}},dA=()=>{const{currentUser:t}=Nl(),[e,n]=M.useState([]),[i,s]=M.useState(null),[r,a]=M.useState([]),[l,c]=M.useState(!0),[h,f]=M.useState(null);return M.useEffect(()=>{if(!t){n([]),s(null),a([]),c(!1);return}let v=null,w=null;return(async()=>{try{c(!0),f(null);const N=await bs.getUserSettings(t.uid);s(N),v=await bs.subscribeToUserDevices(t.uid,n),w=await bs.subscribeToFamilyMembers(t.uid,y=>{console.log("KROK 1: Data členů přímo z Firestore:",y),a(y)}),c(!1)}catch(N){console.error("Error loading user data:",N),f(N.message||"Nepodařilo se načíst data"),c(!1)}})(),()=>{v==null||v(),w==null||w()}},[t]),{devices:e,userSettings:i,familyMembers:r,loading:l,error:h,updateSettings:async v=>{if(!(!t||!i))try{await bs.updateUserSettings(t.uid,v),s({...i,...v,updatedAt:Date.now()})}catch(w){throw f(w.message),w}},syncDevices:async v=>{if(!t)throw new Error("Not authenticated");try{await bs.saveUserDevices(t.uid,v)}catch(w){throw f(w.message),w}}}},mO=()=>{const[t,e]=M.useState(""),[n,i]=M.useState(""),[s,r]=M.useState(!1),[a,l]=M.useState(!1),[c,h]=M.useState(""),{login:f,register:p,loginWithGoogle:m}=Nl(),v=async I=>{if(I.preventDefault(),!t||!n){h("Vyplňte všechna pole");return}h(""),l(!0);try{s?await p(t,n):await f(t,n)}catch(N){const y=N.code||"";y.includes("auth/invalid-credential")?h("Nesprávné přihlašovací údaje."):y.includes("auth/email-already-in-use")?h("Tento email je již registrován."):h("Došlo k chybě. Zkuste to prosím znovu.")}finally{l(!1)}},w=async()=>{h(""),l(!0);try{await m()}catch{h("Došlo k chybě při přihlašování přes Google.")}finally{l(!1)}};return u.jsx("div",{className:"login-container",children:u.jsxs("div",{className:"login-card",children:[u.jsxs("div",{className:"login-header",children:[u.jsx("h1",{className:"login-title",children:"IoTuyApp"}),u.jsx("p",{className:"login-subtitle",children:"Správa vašich chytrých zařízení"})]}),u.jsxs("div",{className:"login-toggle",children:[u.jsx("button",{type:"button",onClick:()=>r(!1),className:`toggle-btn ${s?"":"active"}`,children:"Přihlášení"}),u.jsx("button",{type:"button",onClick:()=>r(!0),className:`toggle-btn ${s?"active":""}`,children:"Registrace"})]}),c&&u.jsx("div",{className:"error-message",children:c}),u.jsxs("form",{onSubmit:v,className:"login-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Email"}),u.jsx("input",{type:"email",value:t,onChange:I=>e(I.target.value),placeholder:"vas@email.com",required:!0,className:"form-input"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Heslo"}),u.jsx("input",{type:"password",value:n,onChange:I=>i(I.target.value),placeholder:"••••••••",required:!0,className:"form-input"})]}),u.jsx("button",{type:"submit",disabled:a,className:"submit-btn",children:a?"Zpracovávám...":s?"Vytvořit účet":"Přihlásit se"})]}),u.jsxs("div",{className:"separator",children:[u.jsx("div",{className:"separator-line"}),u.jsx("span",{className:"separator-text",children:"nebo"}),u.jsx("div",{className:"separator-line"})]}),u.jsxs("button",{onClick:w,disabled:a,className:"google-btn",children:[u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Pokračovat s Google"]})]})})},pO=async t=>{const n=new Date(t,1,29).getMonth()===1?366:365,i=`https://svatkyapi.cz/api/day/${t}-01-01/interval/${n}`;try{const s=await fetch(i);if(!s.ok)throw new Error(`API svatkyapi.cz vrátilo chybu: ${s.status}`);const r=await s.json(),a=[],l=[];return r.forEach(c=>{const h=new Date(c.date);if(c.isHoliday&&c.holidayName&&a.push({id:`holiday-${c.date}`,name:c.holidayName,date:h,type:"national",isPublic:!0}),c.name){const f=c.name.split(/, | a /);l.push({id:`nameday-${c.date}`,name:c.name,date:h,names:f})}}),{holidays:a,namedays:l}}catch(s){return console.error("Nepodařilo se načíst data z svatkyapi.cz:",s),{holidays:[],namedays:[]}}};function dt(){return dt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dt.apply(this,arguments)}function Tn(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var gO=Rh(function(t){return typeof t=="string"?t:null}),yi=function(e){return e!=null};function Rh(t){return function(e){return yi(t(e))}}var yO=function(e){return e.length>0},zn=function(e){return Object.keys(e).reduce(function(n,i){var s,r=e[i];return dt({},n,yi(r)?(s={},s[i]=r,s):{})},{})};function Sg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.length-1;return function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];for(var l=e[0].apply(this,r),c=1;c<=i;c++)l=e[c].call(this,l);return l}}var vO=Rh(function(t){return yi(t)&&typeof t=="object"&&!Array.isArray(t)?t:null}),_O=Rh(function(t){return Array.isArray(t)&&t.every(gO)&&yO(t)?t:null}),EO=Rh(function(t){return vO(t)&&"errors"in t&&_O(t.errors)?{errors:t.errors}:null}),TO=function(e){return EO(e)?{errors:e.errors,source:"api"}:{errors:["Responded with a status code outside the 2xx range, and the response body is not recognisable."],source:"decoding"}},Ko=function(e){this.message=e},bO=function(e){return/application\/[^+]*[+]?(json);?.*/.test(e)},wO=function(e){var n=e.headers.get("content-type");return yi(n)&&bO(n)},fA=function(e){if(wO(e))return e.json().catch(function(n){throw new Ko("unable to parse JSON response.")});throw new Ko("expected JSON response from server.")},SO=function(e){return function(n){return(n.ok?e({response:n}).then(function(i){return{type:"success",status:n.status,response:i,originalResponse:n}}):fA(n).then(function(i){return dt({type:"error",status:n.status},TO(i),{originalResponse:n})})).catch(function(i){if(i instanceof Ko)return{type:"error",source:"decoding",status:n.status,originalResponse:n,errors:[i.message]};throw i})}},hn=function(){return function(e){var n=e.response;return fA(n)}},AO=function(e){return function(n){Object.keys(e).forEach(function(i){return n.searchParams.set(i,e[i].toString())})}},NO=function(e){return function(n){n.pathname==="/"?n.pathname=e:n.pathname+=e}},RO=function(e){var n=e.pathname,i=e.query;return function(s){var r=new URL(s);return NO(n)(r),AO(i)(r),r.toString()}},IO=function(e){var n={};return e.forEach(function(i,s){n[s]=i}),n},CO=function(e){var n=new URL(e),i=n.pathname,s=n.searchParams,r=IO(s);return{query:r,pathname:i==="/"?void 0:i}},St=function(e){return function(n,i){i===void 0&&(i={});var s=e(n),r=s.headers,a=s.query,l=Tn(s,["headers","query"]);return dt({},l,i,{query:a,headers:dt({},r,i.headers)})}},nt=function(e){return e},DO=function(e){var n=e.accessKey,i=e.apiVersion,s=i===void 0?"v1":i,r=e.apiUrl,a=r===void 0?"https://api.unsplash.com":r,l=e.headers,c=e.fetch,h=Tn(e,["accessKey","apiVersion","apiUrl","headers","fetch"]);return function(f){var p=f.handleResponse,m=f.handleRequest;return Sg(m,function(v){var w=v.pathname,I=v.query,N=v.method,y=N===void 0?"GET":N,_=v.headers,b=v.body,x=v.signal,P=RO({pathname:w,query:I})(a),V=dt({method:y,headers:dt({},l,_,{"Accept-Version":s},yi(n)?{Authorization:"Client-ID "+n}:{}),body:b,signal:x},h),S=c??fetch;return S(P,V).then(SO(p))})}},Qd="x-total",xO=function(e){var n=e.headers.get(Qd);if(yi(n)){var i=parseInt(n);if(Number.isInteger(i))return i;throw new Ko("expected "+Qd+" header to be valid integer.")}else throw new Ko("expected "+Qd+" header to exist.")},us=function(){return function(e){var n=e.response;return hn()({response:n}).then(function(i){return{results:i,total:xO(n)}})}},mA=function(e){return yi(e)?{collections:e.join()}:{}},kO=function(e){return yi(e)?{topics:e.join()}:{}},bn=function(e){var n=e.page,i=e.perPage,s=e.orderBy;return zn({per_page:i,order_by:s,page:n})},Ih="/collections",jO=function(){var t=function(n){var i=n.collectionId;return Ih+"/"+i+"/photos"};return nt({getPathname:t,handleRequest:St(function(e){var n=e.collectionId,i=e.orientation,s=Tn(e,["collectionId","orientation"]);return{pathname:t({collectionId:n}),query:zn(dt({},bn(s),{orientation:i}))}}),handleResponse:us()})}(),MO=function(){var t=function(n){var i=n.collectionId;return Ih+"/"+i};return nt({getPathname:t,handleRequest:St(function(e){var n=e.collectionId;return{pathname:t({collectionId:n}),query:{}}}),handleResponse:hn()})}(),OO=function(){var t=function(){return Ih};return nt({getPathname:t,handleRequest:St(function(e){return e===void 0&&(e={}),{pathname:t(),query:bn(e)}}),handleResponse:us()})}(),PO=function(){var t=function(n){var i=n.collectionId;return Ih+"/"+i+"/related"};return nt({getPathname:t,handleRequest:St(function(e){var n=e.collectionId;return{pathname:t({collectionId:n}),query:{}}}),handleResponse:hn()})}(),$o="/photos",VO=function(){var t=function(){return $o};return nt({getPathname:function(n){return t()},handleRequest:St(function(e){return e===void 0&&(e={}),{pathname:$o,query:zn(bn(e))}}),handleResponse:us()})}(),UO=function(){var t=function(n){var i=n.photoId;return $o+"/"+i};return nt({getPathname:t,handleRequest:St(function(e){var n=e.photoId;return{pathname:t({photoId:n}),query:{}}}),handleResponse:hn()})}(),LO=function(){var t=function(n){var i=n.photoId;return $o+"/"+i+"/statistics"};return nt({getPathname:t,handleRequest:St(function(e){var n=e.photoId;return{pathname:t({photoId:n}),query:{}}}),handleResponse:hn()})}(),zO=function(){var t=function(){return $o+"/random"};return nt({getPathname:t,handleRequest:St(function(e){var n=e===void 0?{}:e,i=n.collectionIds,s=n.contentFilter,r=n.topicIds,a=Tn(n,["collectionIds","contentFilter","topicIds"]);return{pathname:t(),query:zn(dt({},a,{content_filter:s},mA(i),kO(r))),headers:{"cache-control":"no-cache"}}}),handleResponse:hn()})}(),BO={handleRequest:St(function(t){var e=t.downloadLocation,n=CO(e),i=n.pathname,s=n.query;if(!yi(i))throw new Error("Could not parse pathname from url.");return{pathname:i,query:zn(s)}}),handleResponse:hn()},Ag="/search",qO=function(){var t=function(){return Ag+"/photos"};return nt({getPathname:function(n){return t()},handleRequest:St(function(e){var n=e.query,i=e.page,s=e.perPage,r=e.orderBy,a=e.collectionIds,l=e.lang,c=e.contentFilter,h=Tn(e,["query","page","perPage","orderBy","collectionIds","lang","contentFilter"]);return{pathname:t(),query:zn(dt({query:n,content_filter:c,lang:l,order_by:r},bn({page:i,perPage:s}),mA(a),h))}}),handleResponse:hn()})}(),HO=function(){var t=function(){return Ag+"/collections"};return nt({getPathname:function(n){return t()},handleRequest:St(function(e){var n=e.query,i=Tn(e,["query"]);return{pathname:t(),query:dt({query:n},bn(i))}}),handleResponse:hn()})}(),FO=function(){var t=function(){return Ag+"/users"};return nt({getPathname:function(n){return t()},handleRequest:St(function(e){var n=e.query,i=Tn(e,["query"]);return{pathname:t(),query:dt({query:n},bn(i))}}),handleResponse:hn()})}(),Ch="/users",GO=function(){var t=function(n){var i=n.username;return Ch+"/"+i};return nt({getPathname:t,handleRequest:St(function(e){var n=e.username;return{pathname:t({username:n}),query:{}}}),handleResponse:hn()})}(),KO=function(){var t=function(n){var i=n.username;return Ch+"/"+i+"/photos"};return nt({getPathname:t,handleRequest:St(function(e){var n=e.username,i=e.stats,s=e.orientation,r=Tn(e,["username","stats","orientation"]);return{pathname:t({username:n}),query:zn(dt({},bn(r),{orientation:s,stats:i}))}}),handleResponse:us()})}(),$O=function(){var t=function(n){var i=n.username;return Ch+"/"+i+"/likes"};return nt({getPathname:t,handleRequest:St(function(e){var n=e.username,i=e.orientation,s=Tn(e,["username","orientation"]);return{pathname:t({username:n}),query:zn(dt({},bn(s),{orientation:i}))}}),handleResponse:us()})}(),YO=function(){var t=function(n){var i=n.username;return Ch+"/"+i+"/collections"};return nt({getPathname:t,handleRequest:St(function(e){var n=e.username,i=Tn(e,["username"]);return{pathname:t({username:n}),query:bn(i)}}),handleResponse:us()})}(),pA="/topics",Pu=function(e){var n=e.topicIdOrSlug;return pA+"/"+n},QO=nt({getPathname:Pu,handleRequest:function(e){var n=e.page,i=e.perPage,s=e.orderBy,r=e.topicIdsOrSlugs;return{pathname:pA,query:zn(dt({},bn({page:n,perPage:i}),{ids:r==null?void 0:r.join(","),order_by:s}))}},handleResponse:us()}),WO=nt({getPathname:Pu,handleRequest:function(e){var n=e.topicIdOrSlug;return{pathname:Pu({topicIdOrSlug:n}),query:{}}},handleResponse:hn()}),XO=function(){var t=Sg(Pu,function(e){return e+"/photos"});return nt({getPathname:t,handleRequest:function(n){var i=n.topicIdOrSlug,s=n.orientation,r=Tn(n,["topicIdOrSlug","orientation"]);return{pathname:t({topicIdOrSlug:i}),query:zn(dt({},bn(r),{orientation:s}))}},handleResponse:us()})}(),A0;(function(t){t.Afrikaans="af",t.Amharic="am",t.Arabic="ar",t.Azerbaijani="az",t.Belarusian="be",t.Bulgarian="bg",t.Bengali="bn",t.Bosnian="bs",t.Catalan="ca",t.Cebuano="ceb",t.Corsican="co",t.Czech="cs",t.Welsh="cy",t.Danish="da",t.German="de",t.Greek="el",t.English="en",t.Esperanto="eo",t.Spanish="es",t.Estonian="et",t.Basque="eu",t.Persian="fa",t.Finnish="fi",t.French="fr",t.Frisian="fy",t.Irish="ga",t.ScotsGaelic="gd",t.Galician="gl",t.Gujarati="gu",t.Hausa="ha",t.Hawaiian="haw",t.Hindi="hi",t.Hmong="hmn",t.Croatian="hr",t.HaitianCreole="ht",t.Hungarian="hu",t.Armenian="hy",t.Indonesian="id",t.Igbo="ig",t.Icelandic="is",t.Italian="it",t.Hebrew="iw",t.Japanese="ja",t.Javanese="jw",t.Georgian="ka",t.Kazakh="kk",t.Khmer="km",t.Kannada="kn",t.Korean="ko",t.Kurdish="ku",t.Kyrgyz="ky",t.Latin="la",t.Luxembourgish="lb",t.Lao="lo",t.Lithuanian="lt",t.Latvian="lv",t.Malagasy="mg",t.Maori="mi",t.Macedonian="mk",t.Malayalam="ml",t.Mongolian="mn",t.Marathi="mr",t.Malay="ms",t.Maltese="mt",t.Myanmar="my",t.Nepali="ne",t.Dutch="nl",t.Norwegian="no",t.Nyanja="ny",t.Oriya="or",t.Punjabi="pa",t.Polish="pl",t.Pashto="ps",t.Portuguese="pt",t.Romanian="ro",t.Russian="ru",t.Kinyarwanda="rw",t.Sindhi="sd",t.Sinhala="si",t.Slovak="sk",t.Slovenian="sl",t.Samoan="sm",t.Shona="sn",t.Somali="so",t.Albanian="sq",t.Serbian="sr",t.Sesotho="st",t.Sundanese="su",t.Swedish="sv",t.Swahili="sw",t.Tamil="ta",t.Telugu="te",t.Tajik="tg",t.Thai="th",t.Turkmen="tk",t.Filipino="tl",t.Turkish="tr",t.Tatar="tt",t.Uighur="ug",t.Ukrainian="uk",t.Urdu="ur",t.Uzbek="uz",t.Vietnamese="vi",t.Xhosa="xh",t.Yiddish="yi",t.Yoruba="yo",t.ChineseSimplified="zh",t.ChineseTraditional="zh-TW",t.Zulu="zu"})(A0||(A0={}));var N0;(function(t){t.LATEST="latest",t.POPULAR="popular",t.VIEWS="views",t.DOWNLOADS="downloads",t.OLDEST="oldest"})(N0||(N0={}));var ZO=Sg(DO,function(t){return{photos:{get:t(UO),list:t(VO),getStats:t(LO),getRandom:t(zO),trackDownload:t(BO)},users:{getPhotos:t(KO),getCollections:t(YO),getLikes:t($O),get:t(GO)},search:{getCollections:t(HO),getPhotos:t(qO),getUsers:t(FO)},collections:{getPhotos:t(jO),get:t(MO),list:t(OO),getRelated:t(PO)},topics:{list:t(QO),get:t(WO),getPhotos:t(XO)}}});class JO{constructor(){gt(this,"config",null);gt(this,"loadPromise",null)}async loadConfig(){if(this.config)return this.config;if(this.loadPromise)return this.loadPromise;this.loadPromise=this._fetchConfig();try{return this.config=await this.loadPromise,this.config}finally{this.loadPromise=null}}async _fetchConfig(){try{console.log("🔑 Načítám API klíče z Firebase...");const[e,n]=await Promise.all([Nr(He(se,"appConfig","apiKeys")),Nr(He(se,"appConfig","features"))]);if(!e.exists()||!n.exists())throw new Error("❌ Konfigurace není v Firebase! Nahraj ji přes Firebase Console.");const i=e.data(),s=n.data(),r={apiKeys:{weather:i.weather||"",unsplash:i.unsplash||"",bakalari_username:i.bakalari_username||"",bakalari_password:i.bakalari_password||"",bakalari_server:i.bakalari_server||""},features:{useMockData:s.useMockData??!1,useMockTransport:s.useMockTransport??!1},environment:i.environment||"development"};return console.log("✅ Konfigurace načtena:",{environment:r.environment,hasWeatherKey:!!r.apiKeys.weather,hasUnsplashKey:!!r.apiKeys.unsplash,hasBakalariCreds:!!r.apiKeys.bakalari_username,useMockData:r.features.useMockData}),r}catch(e){throw console.error("❌ Chyba při načítání konfigurace:",e),e}}async getApiKey(e){const i=(await this.loadConfig()).apiKeys[e];return i||console.warn(`⚠️ API klíč "${e}" není nastaven!`),i}async getFeature(e){return(await this.loadConfig()).features[e]}async getEnvironment(){return(await this.loadConfig()).environment}clearCache(){this.config=null,this.loadPromise=null,console.log("🔄 Config cache vymazána")}getCachedConfig(){return this.config}}const ia=new JO;let mc=null;async function eP(){if(mc)return mc;try{const t=await ia.getApiKey("unsplash");if(!t)throw new Error("Unsplash API klíč není dostupný");return mc=ZO({accessKey:t}),mc}catch(t){throw console.error("❌ Nepodařilo se inicializovat Unsplash klienta:",t),t}}const Ng=async t=>{try{const n=await(await eP()).search.getPhotos({query:t,page:1,perPage:5,orientation:"landscape"});if(n.response&&n.response.results.length>0){const i=Math.floor(Math.random()*n.response.results.length);return n.response.results[i].urls.regular}return null}catch(e){return console.error("Chyba při načítání obrázku z Unsplash:",e),null}},pc=[{month:1,name:"Zimní klid",backgroundImage:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",primaryColor:"#667eea",secondaryColor:"#764ba2",textColor:"#ffffff"},{month:2,name:"Sněhové království",backgroundImage:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",primaryColor:"#f093fb",secondaryColor:"#f5576c",textColor:"#ffffff"},{month:3,name:"Jarní probuzení",backgroundImage:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",primaryColor:"#4facfe",secondaryColor:"#00f2fe",textColor:"#ffffff"},{month:4,name:"Květinové louky",backgroundImage:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",primaryColor:"#43e97b",secondaryColor:"#38f9d7",textColor:"#ffffff"},{month:5,name:"Májová zeleň",backgroundImage:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",primaryColor:"#fa709a",secondaryColor:"#fee140",textColor:"#ffffff"},{month:6,name:"Letní začátek",backgroundImage:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)",primaryColor:"#a8edea",secondaryColor:"#fed6e3",textColor:"#333333"},{month:7,name:"Slunečné prázdniny",backgroundImage:"linear-gradient(135deg, #ffd89b 0%, #19547b 100%)",primaryColor:"#ffd89b",secondaryColor:"#19547b",textColor:"#333333"},{month:8,name:"Léto v plném proudu",backgroundImage:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",primaryColor:"#667eea",secondaryColor:"#764ba2",textColor:"#ffffff"},{month:9,name:"Podzimní barvy",backgroundImage:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",primaryColor:"#f093fb",secondaryColor:"#f5576c",textColor:"#ffffff"},{month:10,name:"Zlatý říjen",backgroundImage:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",primaryColor:"#4facfe",secondaryColor:"#00f2fe",textColor:"#ffffff"},{month:11,name:"Mlhavý listopad",backgroundImage:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",primaryColor:"#43e97b",secondaryColor:"#38f9d7",textColor:"#ffffff"},{month:12,name:"Vánoční čas",backgroundImage:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",primaryColor:"#fa709a",secondaryColor:"#fee140",textColor:"#ffffff"}],gA=M.createContext(void 0),hs=()=>{const t=M.useContext(gA);if(!t)throw new Error("useCalendar must be used within a CalendarProvider");return t},tP=({children:t})=>{const{currentUser:e}=Nl(),[n,i]=M.useState(new Date),[s,r]=M.useState("month"),[a,l]=M.useState([]),[c,h]=M.useState([]),[f,p]=M.useState([]),[m,v]=M.useState(null),[w,I]=M.useState({theme:"light",firstDayOfWeek:1,timeFormat:"24h",showWeekNumbers:!1,showHolidays:!0,showNamedays:!0,defaultView:"month",reminderSettings:{email:!0,push:!0,defaultTime:"15min"},familyView:!0}),N=M.useRef(new Map);M.useEffect(()=>{(async()=>{try{const Q=n.getFullYear();if(N.current.has(Q)){const q=N.current.get(Q);l(q.holidays),h(q.namedays);return}const{holidays:F,namedays:B}=await pO(Q);N.current.set(Q,{holidays:F,namedays:B}),l(F),h(B)}catch(Q){console.error("Chyba při načítání dat svátků a jmenin:",Q)}})()},[n.getFullYear()]),M.useEffect(()=>{if(!e){p([]);return}let A=()=>{};return(async()=>{try{A=await fc.subscribeToEvents(e.uid,F=>{p(F)})}catch(F){console.error("Error setting up Firebase event listener:",F)}})(),()=>{A()}},[e]),M.useEffect(()=>{(async()=>{const Q=n.getMonth(),F=pc[Q],B=`${F.name} ${F.month}`,q=await Ng(B);v(q||F.backgroundImage)})()},[n.getMonth()]);const y=M.useCallback(async A=>{if(e)try{await fc.addEvent(e.uid,A)}catch(Q){console.error("Error adding event:",Q)}},[e]),_=M.useCallback(async(A,Q)=>{if(e)try{await fc.updateEvent(A,Q)}catch(F){console.error("Error updating event:",F)}},[e]),b=M.useCallback(async A=>{if(e)try{await fc.deleteEvent(A)}catch(Q){console.error("Error deleting event:",Q)}},[e]),x=M.useCallback((A,Q)=>{const F=new Date(A);return F.getDate()===Q.getDate()&&F.getMonth()===Q.getMonth()&&F.getFullYear()===Q.getFullYear()},[]),P=M.useCallback(A=>f.filter(Q=>x(Q.date,A)),[f,x]),V=M.useCallback(A=>a.find(Q=>x(Q.date,A))||null,[a,x]),S=M.useCallback(A=>c.find(Q=>x(Q.date,A))||null,[c,x]),k={currentDate:n,setCurrentDate:i,currentView:s,setCurrentView:r,events:f,addEvent:y,updateEvent:_,deleteEvent:b,getEventsByDate:P,holidays:a,namedays:c,getHolidayByDate:V,getNamedayByDate:S,headerImage:m,settings:w,updateSettings:A=>{I(Q=>({...Q,...A}))},monthThemes:pc,getCurrentMonthTheme:()=>{const A=n.getMonth();return pc[A]||pc[0]},isToday:A=>x(A,new Date),isSameDay:x,formatDate:(A,Q="DD.MM.YYYY")=>{const F=A.getDate().toString().padStart(2,"0"),B=(A.getMonth()+1).toString().padStart(2,"0"),q=A.getFullYear(),K=A.toLocaleDateString("cs-CZ",{weekday:"long"});switch(Q){case"DD.MM.YYYY":return`${F}.${B}.${q}`;case"DD.MM":return`${F}.${B}`;case"WEEKDAY":return K;case"FULL":return`${K} ${F}.${B}.${q}`;case"MONTH":return A.toLocaleDateString("cs-CZ",{month:"long"});default:return A.toLocaleDateString("cs-CZ")}}};return u.jsx(gA.Provider,{value:k,children:t})};class nP{constructor(){gt(this,"BASE_URL","https://api.weatherapi.com/v1");gt(this,"apiKey",null);this.loadApiKey()}async loadApiKey(){try{this.apiKey=await ia.getApiKey("weather")}catch(e){console.error("❌ Nepodařilo se načíst Weather API klíč:",e)}}async ensureApiKey(){if(this.apiKey||(this.apiKey=await ia.getApiKey("weather")),!this.apiKey)throw new Error("Weather API klíč není dostupný");return this.apiKey}async getWeatherByCity(e,n=7){try{const i=await this.ensureApiKey(),s=await fetch(`${this.BASE_URL}/forecast.json?key=${i}&q=${encodeURIComponent(e)}&days=${n}&aqi=no&alerts=yes`);if(!s.ok)throw new Error(`Weather API Error: ${s.status}`);const r=await s.json();return this.transformWeatherData(r,e)}catch(i){throw console.error("Error fetching weather by city:",i),i}}async getWeatherByCoordinates(e,n,i=7){try{const s=await this.ensureApiKey(),r=await fetch(`${this.BASE_URL}/forecast.json?key=${s}&q=${e},${n}&days=${i}&aqi=no&alerts=yes`);if(!r.ok)throw new Error(`Weather API Error: ${r.status}`);const a=await r.json();return this.transformWeatherData(a,`GPS: ${e.toFixed(2)}, ${n.toFixed(2)}`)}catch(s){throw console.error("Error fetching weather by coordinates:",s),s}}async searchLocations(e){try{const n=await this.ensureApiKey(),i=await fetch(`${this.BASE_URL}/search.json?key=${n}&q=${encodeURIComponent(e)}`);if(!i.ok)throw new Error(`Location search error: ${i.status}`);return(await i.json()).map(r=>({name:r.name,country:r.country,lat:r.lat,lon:r.lon}))}catch(n){return console.error("Error searching locations:",n),[]}}async getCurrentLocation(){return new Promise((e,n)=>{if(!navigator.geolocation){n(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(i=>{e({lat:i.coords.latitude,lon:i.coords.longitude})},i=>{n(i)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}transformWeatherData(e,n){var r,a,l,c;const i=e.current,s=e.forecast;return{location:{name:((r=e.location)==null?void 0:r.name)||n,country:((a=e.location)==null?void 0:a.country)||"CZ",lat:((l=e.location)==null?void 0:l.lat)||0,lon:((c=e.location)==null?void 0:c.lon)||0},current:{temperature:Math.round(i.temp_c),condition:i.condition.text,conditionCode:i.condition.code,humidity:i.humidity,windSpeed:Math.round(i.wind_kph),feelsLike:Math.round(i.feelslike_c),uvIndex:i.uv,visibility:Math.round(i.vis_km),iconUrl:i.condition.icon},hourly:s.forecastday[0].hour.map(h=>({time:h.time,temperature:Math.round(h.temp_c),condition:h.condition.text,conditionCode:h.condition.code,chanceOfRain:h.chance_of_rain,humidity:h.humidity,windSpeed:Math.round(h.wind_kph),iconUrl:h.condition.icon})),daily:s.forecastday.map(h=>({date:h.date,maxTemp:Math.round(h.day.maxtemp_c),minTemp:Math.round(h.day.mintemp_c),condition:h.day.condition.text,conditionCode:h.day.condition.code,chanceOfRain:h.day.chance_of_rain,chanceOfSnow:h.day.chance_of_snow,iconUrl:h.day.condition.icon}))}}getPlayfulComment(e,n){const i={sunny:["☀️ Nádherný den! Jdi si užít sluníčko!","😎 Prima počasí na venkovní aktivity!","🌞 Slunce svítí! Nezapomeň na sluneční brýle!","🏖️ Ideální den na výlet!"],cloudy:["☁️ Trochu zataženo, ale pořád fajn!","🌥️ Pěkný den i bez sluníčka!","⛅ Mraky přinesou trochu klidu!"],rainy:["🌧️ Prší! Nezapomeň deštník!","☔ Perfektní počasí na povídání u kávy!","💧 Déšť je dobrý pro zahrádku!","🌂 Doma je teď nejlíp!"],snowy:["❄️ Sněží! Čas na sněhuláka!","⛄ Perfektní počasí na zimní radovánky!","🛷 Nezapomeň na teplé oblečení!","🧣 Oblíkni si čepici a rukavice!"],stormy:["⛈️ Bouřka! Zůstaň raději doma!","🌩️ Počkej, až bouřka přejde!","🏠 Ideální čas na hraní her doma!"],hot:["🔥 Horko! Nezapomeň pít hodně vody!","🌡️ Hledej stín a zůstaň v chládku!","🏊‍♂️ Prima počasí na koupání!","🍦 Čas na zmrzlinu!"],cold:["🥶 Zima! Oblíkni si teplé oblečení!","🧥 Nezapomeň na bundu!","☕ Čas na horký čaj!","🏠 Zůstaň v teple!"]};return n>=25?i.hot[Math.floor(Math.random()*i.hot.length)]:n<=5?i.cold[Math.floor(Math.random()*i.cold.length)]:e>=1e3&&e<=1003?i.sunny[Math.floor(Math.random()*i.sunny.length)]:e>=1006&&e<=1030?i.cloudy[Math.floor(Math.random()*i.cloudy.length)]:e>=1063&&e<=1201?i.rainy[Math.floor(Math.random()*i.rainy.length)]:e>=1204&&e<=1282?i.snowy[Math.floor(Math.random()*i.snowy.length)]:e>=1273&&e<=1282?i.stormy[Math.floor(Math.random()*i.stormy.length)]:i.sunny[0]}}const Si=new nP,iP={1e3:{name:"Jasno",emoji:"☀️",gradient:["#FFD700","#FFA500"],animation:"sun"},1003:{name:"Polojasno",emoji:"🌤️",gradient:["#87CEEB","#FFD700"],animation:"sun"},1006:{name:"Oblačno",emoji:"☁️",gradient:["#87CEEB","#B0C4DE"],animation:"clouds"},1009:{name:"Zamračeno",emoji:"☁️",gradient:["#696969","#A9A9A9"],animation:"clouds"},1030:{name:"Mlha",emoji:"🌫️",gradient:["#E6E6FA","#D3D3D3"],animation:"fog"},1063:{name:"Přeháňky",emoji:"🌦️",gradient:["#4682B4","#87CEEB"],animation:"rain"},1180:{name:"Mírný déšť",emoji:"🌧️",gradient:["#4169E1","#87CEEB"],animation:"rain"},1183:{name:"Déšť",emoji:"🌧️",gradient:["#000080","#4169E1"],animation:"rain"},1186:{name:"Silný déšť",emoji:"🌧️",gradient:["#191970","#000080"],animation:"rain"},1210:{name:"Sněžení",emoji:"🌨️",gradient:["#E6E6FA","#F0F8FF"],animation:"snow"},1213:{name:"Mírné sněžení",emoji:"🌨️",gradient:["#F0F8FF","#E6E6FA"],animation:"snow"},1216:{name:"Sněžení",emoji:"❄️",gradient:["#B0E0E6","#E6E6FA"],animation:"snow"},1273:{name:"Bouře",emoji:"⛈️",gradient:["#2F4F4F","#696969"],animation:"storm"},1276:{name:"Silná bouře",emoji:"⛈️",gradient:["#000000","#2F4F4F"],animation:"storm"}},sP={isEnabled:!0,refreshInterval:15,primaryLocation:{type:"gps",value:"",displayName:"Aktuální poloha"},showHourlyForecast:!0,showWeeklyForecast:!0,enableAnimations:!0,temperatureUnit:"celsius",windUnit:"kmh",showPlayfulComments:!0,showAlerts:!0,backgroundEffects:!0};class rP{constructor(){gt(this,"BASE_URL","https://api.weatherapi.com/v1");gt(this,"apiKey",null);gt(this,"searchLocations",async e=>{if(!e||e.length<2)return[];try{const n=await this.ensureApiKey(),i=await fetch(`${this.BASE_URL}/search.json?key=${n}&q=${encodeURIComponent(e)}`);if(!i.ok)throw new Error(`Chyba při komunikaci s API: ${i.status}`);const s=await i.json();return Array.isArray(s)?s.map(r=>({name:r.name,country:r.country,lat:r.lat,lon:r.lon})):(console.error("API pro vyhledávání měst nevrátilo platná data:",s),[])}catch(n){return console.error("Došlo k chybě ve funkci searchLocations:",n),[]}});this.loadApiKey()}async loadApiKey(){try{this.apiKey=await ia.getApiKey("weather")}catch(e){console.error("❌ Nepodařilo se načíst Weather API klíč:",e)}}async ensureApiKey(){if(this.apiKey||(this.apiKey=await ia.getApiKey("weather")),!this.apiKey)throw new Error("Weather API klíč není dostupný");return this.apiKey}}const aP=new rP,Rg=t=>{const[e,n]=M.useState({isLoading:!0,error:null,lastUpdate:null,locations:[],currentWeather:{},settings:{...sP,...t}}),[i,s]=M.useState(null),r=M.useCallback(async m=>{try{return m.isGPS?await Si.getWeatherByCoordinates(m.lat,m.lon):await Si.getWeatherByCity(m.name)}catch(v){return console.error(`Chyba při načítání počasí pro ${m.name}:`,v),null}},[]),a=M.useCallback(async()=>{n(m=>({...m,isLoading:!0,error:null}));try{const{primaryLocation:m}=e.settings;let v,w=!1;if(m.type==="gps")try{const N=await Si.getCurrentLocation();v=await Si.getWeatherByCoordinates(N.lat,N.lon),w=!0}catch(N){console.warn("GPS se nepodařilo načíst, používá se záložní lokace (Krnov).",N),v=await Si.getWeatherByCity("Krnov")}else v=await Si.getWeatherByCity(m.value||"Krnov");if(!v)throw new Error("Nepodařilo se načíst data o počasí pro výchozí lokaci.");const I={id:w?"gps":v.location.name.toLowerCase(),name:v.location.name,country:v.location.country,lat:v.location.lat,lon:v.location.lon,isPrimary:!0,isGPS:w};n(N=>({...N,locations:[I],currentWeather:{[I.id]:v},lastUpdate:Date.now(),isLoading:!1}))}catch(m){const v=m instanceof Error?m.message:"Neznámá chyba při inicializaci.";console.error("Chyba při inicializaci useWeather:",v),n(w=>({...w,isLoading:!1,error:"Nepodařilo se načíst výchozí lokaci."}))}},[e.settings]),l=M.useCallback(async m=>{if(!(e.locations.length>=2)){n(v=>({...v,isLoading:!0}));try{const v=await Si.getWeatherByCity(m),w={id:`loc-${Date.now()}`,name:v.location.name,country:v.location.country,lat:v.location.lat,lon:v.location.lon,isPrimary:!1,isGPS:!1};n(I=>({...I,locations:[...I.locations,w],currentWeather:{...I.currentWeather,[w.id]:v}}))}catch(v){console.error("Chyba při přidávání lokace:",v)}finally{n(v=>({...v,isLoading:!1,lastUpdate:Date.now()}))}}},[e.locations]),c=M.useCallback(()=>{e.locations.length<2||n(m=>({...m,locations:m.locations.map(v=>({...v,isPrimary:!v.isPrimary})).reverse()}))},[e.locations.length]),h=M.useCallback(()=>{n(m=>({...m,locations:m.locations.filter(v=>v.isPrimary),currentWeather:Object.fromEntries(Object.entries(m.currentWeather).filter(([v])=>{var w;return v===((w=m.locations.find(I=>I.isPrimary))==null?void 0:w.id)}))}))},[]),f=M.useCallback(async()=>{if(!e.locations.length)return;n(I=>({...I,isLoading:!0}));const m=e.locations.map(I=>r(I)),v=await Promise.all(m),w={};e.locations.forEach((I,N)=>{v[N]&&(w[I.id]=v[N])}),n(I=>({...I,currentWeather:w,isLoading:!1,lastUpdate:Date.now()}))},[e.locations,r]),p=M.useCallback(m=>{const v=e.currentWeather[m];return!v||!e.settings.showPlayfulComments?"":Si.getPlayfulComment(v.current.conditionCode,v.current.temperature)},[e.currentWeather,e.settings.showPlayfulComments]);return M.useEffect(()=>{e.settings.isEnabled&&e.locations.length===0&&a()},[e.settings.isEnabled,a]),M.useEffect(()=>{if(i&&clearInterval(i),e.settings.isEnabled&&e.settings.refreshInterval>0){const m=setInterval(f,e.settings.refreshInterval*60*1e3);s(m)}return()=>{i&&clearInterval(i)}},[e.settings.isEnabled,e.settings.refreshInterval,f]),{isLoading:e.isLoading,error:e.error,currentWeather:e.currentWeather,settings:e.settings,lastUpdate:e.lastUpdate,refreshWeather:f,addLocation:l,swapLocations:c,removeSecondaryLocation:h,searchCities:aP.searchLocations,primaryLocation:e.locations.find(m=>m.isPrimary),secondaryLocation:e.locations.find(m=>!m.isPrimary),getPlayfulComment:p}};class Me{static convertTemperature(e,n){return Math.round(n==="fahrenheit"?e*9/5+32:e)}static convertWindSpeed(e,n){return Math.round(n==="mph"?e*.621371:e)}static formatTemperature(e,n){return`${this.convertTemperature(e,n)}${n==="celsius"?"°C":"°F"}`}static formatWindSpeed(e,n){return`${this.convertWindSpeed(e,n)} ${n==="kmh"?"km/h":"mph"}`}static getWeatherCondition(e){return iP[e]||{name:"Neznámé počasí",emoji:"🌈",gradient:["#87CEEB","#E0E0E0"],animation:"clouds"}}static getWeatherGradient(e,n="day"){const i=this.getWeatherCondition(e);return n==="night"?i.gradient.map(s=>this.darkenColor(s,.4)):i.gradient}static darkenColor(e,n){const i=this.hexToRgb(e);return i?`rgb(${Math.floor(i.r*(1-n))}, ${Math.floor(i.g*(1-n))}, ${Math.floor(i.b*(1-n))})`:e}static hexToRgb(e){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}static getTimeOfDay(e){return e>=6&&e<=18?"day":"night"}static formatTime(e,n=!0){const i=new Date(e);return n?i.toLocaleTimeString("cs-CZ",{hour:"2-digit",minute:"2-digit"}):i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}static formatDate(e){const n=new Date(e),i=new Date,s=new Date(i);return s.setDate(s.getDate()+1),n.toDateString()===i.toDateString()?"Dnes":n.toDateString()===s.toDateString()?"Zítra":n.toLocaleDateString("cs-CZ",{weekday:"short",day:"numeric",month:"short"})}static getRelativeTime(e){const i=Date.now()-e,s=Math.floor(i/(1e3*60)),r=Math.floor(s/60);return s<1?"Právě teď":s<60?`Před ${s} min`:r<24?`Před ${r} hod`:`Před ${Math.floor(r/24)} dny`}static getUVDescription(e){return e<=2?{level:"Nízký",color:"#4CAF50",description:"Minimální riziko"}:e<=5?{level:"Střední",color:"#FF9800",description:"Používej opalovací krém"}:e<=7?{level:"Vysoký",color:"#FF5722",description:"Opatrnost na slunci"}:e<=10?{level:"Velmi vysoký",color:"#F44336",description:"Vyhýbej se slunci"}:{level:"Extrémní",color:"#9C27B0",description:"Nebezpečné!"}}static getHumidityDescription(e){return e<30?"Velmi sucho":e<50?"Sucho":e<70?"Příjemně":e<85?"Vlhko":"Velmi vlhko"}static getWeatherAnimation(e,n="medium"){const i=this.getWeatherCondition(e),s={sun:{type:"sun",intensity:n,particles:20,speed:.5},clouds:{type:"clouds",intensity:n,particles:15,speed:.3},rain:{type:"rain",intensity:n,particles:n==="light"?50:n==="medium"?100:200,speed:n==="light"?2:n==="medium"?4:6},snow:{type:"snow",intensity:n,particles:n==="light"?30:n==="medium"?60:100,speed:n==="light"?1:n==="medium"?2:3},storm:{type:"storm",intensity:n,particles:150,speed:8},fog:{type:"fog",intensity:n,particles:40,speed:.2}};return s[i.animation]||s.clouds}static getActivityRecommendation(e,n,i){return n>=1273||n===1186?{outdoor:!1,activity:"Zůstaň doma",reason:"Nebezpečné počasí"}:e>35?{outdoor:!1,activity:"Zůstaň v chládku",reason:"Příliš horko"}:e<-10?{outdoor:!1,activity:"Zahřej se uvnitř",reason:"Mrzne"}:n>=1180&&n<=1183?{outdoor:!0,activity:"Nezapomeň deštník",reason:"Lehký déšť"}:n>=1210&&n<=1225?{outdoor:!0,activity:"Oblíkni se teplo",reason:"Sněží"}:i>30?{outdoor:!1,activity:"Pozor na vítr",reason:"Větrno"}:e>=15&&e<=25&&n<=1003?{outdoor:!0,activity:"Perfektní na procházku!",reason:"Krásné počasí"}:{outdoor:!0,activity:"Běž ven a užij si to!",reason:"Docela fajn počasí"}}static getClothingRecommendation(e,n){const i=[];let s="👕";return e<0?(i.push("Zimní bunda","Čepice","Rukavice","Šála","Teplé boty"),s="🧥"):e<10?(i.push("Bunda","Svetr","Dlouhé kalhoty"),s="🧥"):e<20?(i.push("Mikina","Dlouhé kalhoty"),s="👔"):e<25?(i.push("Tričko","Lehká bunda"),s="👕"):(i.push("Tričko","Kraťasy"),s="👕"),n>=1180&&i.push("Deštník","Nepromokavá bunda"),n>=1210&&i.push("Voděodolné boty"),{items:i,emoji:s}}}const R0=t=>({Clear:"Jasno",Sunny:"Slunečno",Fair:"Příjemné počasí","Partly cloudy":"Polojasno","Partly Cloudy":"Polojasno","Mostly cloudy":"Převážně oblačno","Mostly Cloudy":"Převážně oblačno",Cloudy:"Oblačno",Overcast:"Zataženo","Light rain":"Slabý déšť","Light Rain":"Slabý déšť",Rain:"Déšť","Heavy rain":"Silný déšť","Heavy Rain":"Silný déšť",Drizzle:"Mrholení",Showers:"Přeháňky","Light drizzle":"Slabé mrholení",Snow:"Sníh","Light snow":"Slabé sněžení","Heavy snow":"Silné sněžení",Sleet:"Déšť se sněhem","Freezing rain":"Mrznoucí déšť",Thunderstorm:"Bouřka",Thunder:"Bouřka",Storm:"Bouře",Fog:"Mlha",Mist:"Opar",Haze:"Lehká mlha",Windy:"Větrno",Breezy:"Mírný vítr",Hot:"Horko",Cold:"Zima",Humid:"Vlhko",Dry:"Sucho"})[t]||t,oP=({isOpen:t,onClose:e})=>{const{isLoading:n,currentWeather:i,swapLocations:s,primaryLocation:r,secondaryLocation:a,settings:l,getPlayfulComment:c,refreshWeather:h,lastUpdate:f,searchCities:p,addLocation:m,removeSecondaryLocation:v}=Rg(),[w,I]=M.useState("current"),[N,y]=M.useState(null),[_,b]=M.useState(""),[x,P]=M.useState([]),[V,S]=M.useState(!1),[T,R]=M.useState("");_!==T&&R(_);const C=q=>{q.key==="Enter"&&x.length>0&&(m(x[0].name),b(""),P([]))},D=r?i[r.id]:null,k=a?i[a.id]:null;if(M.useEffect(()=>{D&&l.backgroundEffects&&t&&(async()=>{try{const K=Me.getWeatherCondition(D.current.conditionCode);let ie="";switch(K.animation){case"sun":ie="beautiful sunny day landscape mountains";break;case"rain":ie="rain city windows cozy atmosphere";break;case"snow":ie="winter snow landscape peaceful nature";break;case"storm":ie="dramatic storm clouds lightning sky";break;case"fog":ie="misty fog forest mysterious atmosphere";break;default:ie="beautiful cloudy sky nature landscape"}const Ee=await Ng(ie);y(Ee)}catch(K){console.error("Error loading background image:",K)}})()},[D==null?void 0:D.current.conditionCode,l.backgroundEffects,t]),M.useEffect(()=>{const q=setTimeout(async()=>{if(_.length>=2){console.log("Starting search for:",_),S(!0);try{const K=await p(_);console.log("Search results received:",K),P(K.slice(0,5))}catch(K){console.error("Search error:",K),P([])}finally{S(!1)}}else P([]),S(!1)},300);return()=>clearTimeout(q)},[_]),M.useEffect(()=>{const q=K=>{K.key==="Escape"&&t&&e()};return t?(document.addEventListener("keydown",q),document.body.style.overflow="hidden"):(b(""),P([]),S(!1)),()=>{document.removeEventListener("keydown",q),document.body.style.overflow="unset"}},[t,e]),!t)return null;const A=D?Me.getWeatherCondition(D.current.conditionCode):null,Q=r?c(r.id):"",F=A?Me.getWeatherGradient(D.current.conditionCode):["#667eea","#764ba2"],B=`linear-gradient(135deg, ${F[0]}, ${F[1]})`;return u.jsx("div",{className:"weather-modal-overlay",onClick:e,children:u.jsxs("div",{className:"weather-modal",onClick:q=>q.stopPropagation(),style:{backgroundImage:N?`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), url(${N})`:B,backgroundColor:F[0],backgroundSize:"cover",backgroundPosition:"center"},children:[u.jsx("button",{className:"weather-modal-close",onClick:e,title:"Zavřít",children:u.jsx("span",{className:"close-icon",children:"✕"})}),u.jsxs("div",{className:"weather-modal-header",children:[u.jsxs("div",{className:"header-top-row",children:[u.jsxs("h1",{className:"modal-title",children:[(A==null?void 0:A.emoji)||"🌤️"," Počasí"]}),u.jsxs("div",{className:"header-controls",children:[u.jsx("button",{className:"refresh-btn-modal",onClick:h,disabled:n,title:"Obnovit počasí",children:u.jsx("span",{className:`refresh-icon ${n?"spinning":""}`,children:"🔄"})}),u.jsx("div",{className:"view-switcher",children:["current","weekly"].map(q=>u.jsxs("button",{className:`view-btn ${w===q?"active":""}`,onClick:()=>I(q),children:[q==="current"&&"Aktuální",q==="weekly"&&"Týdenní"]},q))})]})]}),u.jsxs("div",{className:"primary-location-container",children:[u.jsxs("div",{className:"primary-location-info",children:[(r==null?void 0:r.isGPS)&&u.jsx("span",{className:"gps-indicator",title:"Poloha zjištěna pomocí GPS",children:"📍"}),u.jsx("span",{className:"primary-location-name",children:r==null?void 0:r.name})]}),Q&&u.jsx("div",{className:"playful-comment-text",style:{fontSize:"1rem",fontStyle:"italic",opacity:.9,marginTop:"4px"},children:Q})]}),u.jsx("div",{}),u.jsx("div",{className:"secondary-location-container",children:a&&k?u.jsxs("div",{className:"secondary-location-full",children:[u.jsxs("button",{className:"secondary-location-widget",onClick:s,title:`Přepnout na ${a.name}`,style:{fontSize:"0.9rem",padding:"6px 10px"},children:[u.jsx("span",{className:"secondary-location-name",children:a.name}),u.jsxs("div",{className:"secondary-weather-info",children:[u.jsx("img",{src:k.current.iconUrl,alt:k.current.condition,className:"secondary-weather-icon",style:{width:"24px",height:"24px"}}),u.jsxs("span",{className:"secondary-weather-temp",children:[k.current.temperature,"°"]})]})]}),u.jsx("button",{className:"remove-secondary-btn",onClick:v,title:"Odstranit druhé město",style:{width:"24px",height:"24px",fontSize:"12px"},children:"✕"})]}):u.jsxs("div",{className:"search-container",children:[u.jsx("input",{type:"text",placeholder:"Přidat město...",value:_,onChange:q=>b(q.target.value),onKeyDown:C,className:"city-search-input",style:{width:"160px",fontSize:"0.85rem"}}),V&&u.jsx("div",{className:"search-spinner",children:"⟲"}),x.length>0&&u.jsx("div",{className:"search-results",children:x.map((q,K)=>u.jsxs("button",{className:"search-result",onClick:()=>{m(q.name),b(""),P([])},children:[q.name,u.jsx("span",{className:"add-icon",children:"+"})]},K))})]})})]}),u.jsxs("div",{className:"weather-modal-content",children:[w==="current"&&u.jsxs("div",{className:"weather-main-compact",children:[u.jsxs("div",{className:"current-weather-left",children:[u.jsxs("div",{className:"temp-and-icon",children:[u.jsxs("div",{className:"temperature-section",children:[u.jsx("span",{className:"temp-huge",children:D?Me.formatTemperature(D.current.temperature,l.temperatureUnit):"--°"}),u.jsxs("div",{className:"condition-section",children:[u.jsx("span",{className:"condition-text",children:D?R0(D.current.condition):"Načítám..."}),u.jsxs("span",{className:"feels-like-text",children:["Pocitově"," ",D?Me.formatTemperature(D.current.feelsLike,l.temperatureUnit):"--°"]})]})]}),u.jsx("div",{className:"weather-icon-section",children:D&&u.jsx("img",{src:D.current.iconUrl,alt:D.current.condition,className:"weather-icon-huge"})})]}),u.jsx("div",{className:"weather-details-grid",children:D&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-card",children:[u.jsx("div",{className:"detail-icon",children:"💨"}),u.jsxs("div",{className:"detail-content",children:[u.jsx("span",{className:"detail-label",children:"Vítr"}),u.jsx("span",{className:"detail-value",children:Me.formatWindSpeed(D.current.windSpeed,l.windUnit)})]})]}),u.jsxs("div",{className:"detail-card",children:[u.jsx("div",{className:"detail-icon",children:"💧"}),u.jsxs("div",{className:"detail-content",children:[u.jsx("span",{className:"detail-label",children:"Vlhkost"}),u.jsxs("span",{className:"detail-value",children:[D.current.humidity,"%"]})]})]}),u.jsxs("div",{className:"detail-card",children:[u.jsx("div",{className:"detail-icon",children:"👁️"}),u.jsxs("div",{className:"detail-content",children:[u.jsx("span",{className:"detail-label",children:"Viditelnost"}),u.jsxs("span",{className:"detail-value",children:[D.current.visibility,"km"]})]})]}),u.jsxs("div",{className:"detail-card",children:[u.jsx("div",{className:"detail-icon",children:"☀️"}),u.jsxs("div",{className:"detail-content",children:[u.jsx("span",{className:"detail-label",children:"UV Index"}),u.jsx("span",{className:"detail-value",children:D.current.uvIndex})]})]})]})})]}),u.jsx("div",{className:"weather-right-view-content",children:u.jsxs("div",{className:"hourly-forecast-right",children:[u.jsx("h3",{className:"forecast-title",children:"Nejbližší hodiny"}),u.jsx("div",{className:"hourly-compact-list",children:D==null?void 0:D.hourly.filter(q=>new Date(q.time)>=new Date).slice(0,8).map((q,K)=>u.jsxs("div",{className:"hourly-compact-item",children:[u.jsx("span",{className:"hour-time-compact",children:Me.formatTime(q.time)}),u.jsx("img",{src:q.iconUrl,alt:q.condition,className:"hour-icon-compact"}),u.jsxs("span",{className:"hour-temp-compact",children:[q.temperature,"°"]}),u.jsxs("span",{className:"hour-rain-compact",children:["☔ ",q.chanceOfRain,"%"]})]},K))})]})})]}),w==="weekly"&&u.jsx("div",{className:"weekly-view-fullwidth",children:u.jsx("div",{className:"weekly-list",children:D==null?void 0:D.daily.map((q,K)=>u.jsxs("div",{className:"daily-card",children:[u.jsx("div",{className:"daily-date",children:u.jsx("span",{className:"daily-day",children:Me.formatDate(q.date)})}),u.jsx("div",{className:"daily-icon",children:u.jsx("img",{src:q.iconUrl,alt:q.condition})}),u.jsx("div",{className:"daily-condition",children:u.jsx("span",{children:R0(q.condition)})}),u.jsxs("div",{className:"daily-temps",children:[u.jsxs("span",{className:"daily-high",children:[q.maxTemp,"°"]}),u.jsxs("span",{className:"daily-low",children:[q.minTemp,"°"]})]}),u.jsx("div",{className:"daily-rain",children:u.jsxs("span",{children:["☔ ",q.chanceOfRain,"%"]})})]},K))})})]}),u.jsx("div",{className:"weather-modal-footer",children:f&&u.jsxs("span",{className:"last-updated-modal",children:["Aktualizováno ",Me.getRelativeTime(f)]})})]})})},lP=({isOpen:t,onClose:e})=>{const{isLoading:n,currentWeather:i,primaryLocation:s,settings:r,getPlayfulComment:a,refreshWeather:l,lastUpdate:c}=Rg(),h=s?i[s.id]:null;if(!t)return null;const f=h?Me.getWeatherCondition(h.current.conditionCode):null,p=s?a(s.id):"",m=h==null?void 0:h.daily[0],v=h==null?void 0:h.daily[1],w=f?Me.getWeatherGradient(h.current.conditionCode):["#667eea","#764ba2"],I=`linear-gradient(135deg, ${w[0]}, ${w[1]})`;return u.jsx("div",{className:"weather-modal-mobile-overlay",onClick:e,children:u.jsxs("div",{className:"weather-modal-mobile",onClick:N=>N.stopPropagation(),style:{background:I},children:[u.jsx("button",{className:"weather-modal-mobile-close",onClick:e,children:u.jsx("span",{className:"close-icon-mobile",children:"✕"})}),u.jsxs("div",{className:"weather-mobile-header",children:[u.jsxs("h1",{className:"mobile-title",children:[(f==null?void 0:f.emoji)||"🌤️"," ",s==null?void 0:s.name]}),(s==null?void 0:s.isGPS)&&u.jsx("span",{className:"gps-mobile",children:"📍 GPS"})]}),u.jsxs("div",{className:"mobile-main-weather",children:[u.jsxs("div",{className:"mobile-temp-section",children:[u.jsx("span",{className:"mobile-temp",children:h?Me.formatTemperature(h.current.temperature,r.temperatureUnit):"--°"}),u.jsxs("div",{className:"mobile-condition",children:[u.jsx("span",{className:"mobile-condition-text",children:(h==null?void 0:h.current.condition)||"Načítám..."}),u.jsxs("span",{className:"mobile-feels-like",children:["Pocitově ",h?Me.formatTemperature(h.current.feelsLike,r.temperatureUnit):"--°"]})]})]}),u.jsx("div",{className:"mobile-icon",children:h&&u.jsx("img",{src:h.current.iconUrl,alt:h.current.condition,className:"mobile-weather-icon"})})]}),u.jsxs("div",{className:"mobile-forecast-comparison",children:[u.jsxs("div",{className:"mobile-day today",children:[u.jsx("span",{className:"mobile-day-label",children:"Dnes"}),u.jsxs("div",{className:"mobile-day-temps",children:[u.jsxs("span",{className:"mobile-temp-high",children:[m==null?void 0:m.maxTemp,"°"]}),u.jsxs("span",{className:"mobile-temp-low",children:[m==null?void 0:m.minTemp,"°"]})]}),u.jsxs("span",{className:"mobile-rain",children:["☔ ",m==null?void 0:m.chanceOfRain,"%"]})]}),u.jsx("div",{className:"mobile-separator"}),u.jsxs("div",{className:"mobile-day tomorrow",children:[u.jsx("span",{className:"mobile-day-label",children:"Zítra"}),u.jsxs("div",{className:"mobile-day-temps",children:[u.jsxs("span",{className:"mobile-temp-high",children:[v==null?void 0:v.maxTemp,"°"]}),u.jsxs("span",{className:"mobile-temp-low",children:[v==null?void 0:v.minTemp,"°"]})]}),u.jsxs("span",{className:"mobile-rain",children:["☔ ",v==null?void 0:v.chanceOfRain,"%"]})]})]}),p&&u.jsx("div",{className:"mobile-playful-comment",children:u.jsx("span",{className:"mobile-comment-text",children:p})}),u.jsx("div",{className:"mobile-stats",children:h&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"mobile-stat",children:[u.jsx("span",{className:"mobile-stat-icon",children:"💨"}),u.jsx("span",{className:"mobile-stat-label",children:"Vítr"}),u.jsx("span",{className:"mobile-stat-value",children:Me.formatWindSpeed(h.current.windSpeed,r.windUnit)})]}),u.jsxs("div",{className:"mobile-stat",children:[u.jsx("span",{className:"mobile-stat-icon",children:"💧"}),u.jsx("span",{className:"mobile-stat-label",children:"Vlhkost"}),u.jsxs("span",{className:"mobile-stat-value",children:[h.current.humidity,"%"]})]}),u.jsxs("div",{className:"mobile-stat",children:[u.jsx("span",{className:"mobile-stat-icon",children:"👁️"}),u.jsx("span",{className:"mobile-stat-label",children:"Viditelnost"}),u.jsxs("span",{className:"mobile-stat-value",children:[h.current.visibility,"km"]})]}),u.jsxs("div",{className:"mobile-stat",children:[u.jsx("span",{className:"mobile-stat-icon",children:"☀️"}),u.jsx("span",{className:"mobile-stat-label",children:"UV Index"}),u.jsx("span",{className:"mobile-stat-value",children:h.current.uvIndex})]})]})}),u.jsxs("div",{className:"mobile-footer",children:[u.jsxs("button",{className:"mobile-refresh-btn",onClick:l,disabled:n,title:"Obnovit počasí",children:[u.jsx("span",{className:`mobile-refresh-icon ${n?"spinning":""}`,children:"🔄"}),"Obnovit"]}),c&&u.jsx("span",{className:"mobile-last-updated",children:Me.getRelativeTime(c)})]})]})})},cP=({className:t="",onExpand:e,isVisible:n=!0})=>{const{isLoading:i,error:s,currentWeather:r,primaryLocation:a,settings:l,getPlayfulComment:c,refreshWeather:h,lastUpdate:f}=Rg(),[p,m]=M.useState(null),[v,w]=M.useState(!1),[I,N]=M.useState(window.innerWidth<=768);M.useEffect(()=>{const D=()=>{const k=window.innerWidth<=768;N(k)};return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]);const y=a?r[a.id]:null;if(M.useEffect(()=>{y&&l.backgroundEffects&&(async()=>{try{const k=Me.getWeatherCondition(y.current.conditionCode);let A="";switch(k.animation){case"sun":A="sunny day nature blue sky";break;case"rain":A="rain drops window cozy";break;case"snow":A="snow winter landscape";break;case"storm":A="storm clouds dramatic sky";break;case"fog":A="fog misty morning nature";break;default:A="cloudy sky nature peaceful"}const Q=await Ng(A);m(Q)}catch(k){console.error("Error loading background image:",k)}})()},[y==null?void 0:y.current.conditionCode,l.backgroundEffects]),!l.isEnabled||!n)return null;const _=()=>{w(!0),e==null||e()},b=D=>{D.stopPropagation(),h()};if(i&&!y)return u.jsxs("div",{className:`weather-mini-widget weather-loading ${t}`,children:[u.jsx("div",{className:"weather-mini-header",children:u.jsx("h3",{className:"widget-title",children:"🌤️ Počasí"})}),u.jsxs("div",{className:"loading-content",children:[u.jsx("div",{className:"weather-spinner"}),u.jsx("p",{children:"Načítám počasí..."})]})]});if(s||!y)return u.jsxs("div",{className:`weather-mini-widget weather-error ${t}`,children:[u.jsxs("div",{className:"weather-mini-header",children:[u.jsx("h3",{className:"widget-title",children:"🌤️ Počasí"}),u.jsx("button",{className:"refresh-btn",onClick:b,title:"Obnovit",children:"🔄"})]}),u.jsxs("div",{className:"error-content",children:[u.jsx("p",{className:"error-message",children:s||"Nepodařilo se načíst počasí"}),u.jsx("button",{className:"retry-btn",onClick:b,children:"Zkusit znovu"})]})]});const x=Me.getWeatherCondition(y.current.conditionCode),P=c(a.id),V=y.daily[0],S=y.daily[1],T=Me.getWeatherGradient(y.current.conditionCode),R=`linear-gradient(135deg, ${T[0]}, ${T[1]})`,C=document.getElementById("modal-root");return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`weather-mini-widget ${t}`,onClick:_,style:{backgroundImage:p?`linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.5)), url(${p})`:R,backgroundColor:T[0],backgroundSize:"cover",backgroundPosition:"center"},children:[u.jsxs("div",{className:"weather-mini-header",children:[u.jsxs("div",{className:"widget-title-section",children:[u.jsxs("h3",{className:"widget-title",children:[x.emoji," Počasí"]}),u.jsx("span",{className:"location-name",children:a==null?void 0:a.name})]}),u.jsxs("div",{className:"widget-controls",children:[u.jsx("button",{className:"refresh-btn",onClick:b,title:"Obnovit",children:u.jsx("span",{className:`refresh-icon ${i?"spinning":""}`,children:"🔄"})}),u.jsxs("div",{className:"close-widget-btn",title:"Rozšířit",onClick:D=>{D.stopPropagation(),_()},children:[u.jsx("div",{className:"mickey-ear mickey-ear-left"}),u.jsx("div",{className:"mickey-ear mickey-ear-right"}),u.jsx("span",{className:"expand-icon",children:"⚏"})]})]})]}),u.jsxs("div",{className:"current-weather-section",children:[u.jsxs("div",{className:"current-temp-container",children:[u.jsx("span",{className:"current-temp",children:Me.formatTemperature(y.current.temperature,l.temperatureUnit)}),u.jsxs("div",{className:"current-details",children:[u.jsx("span",{className:"condition-text",children:y.current.condition}),u.jsxs("span",{className:"feels-like",children:["Pocitově ",Me.formatTemperature(y.current.feelsLike,l.temperatureUnit)]})]})]}),u.jsx("div",{className:"weather-icon-container",children:u.jsx("img",{src:y.current.iconUrl,alt:y.current.condition,className:"weather-icon"})})]}),u.jsxs("div",{className:"forecast-comparison",children:[u.jsxs("div",{className:"forecast-day today",children:[u.jsx("span",{className:"day-label",children:"Dnes"}),u.jsxs("div",{className:"day-temps",children:[u.jsxs("span",{className:"temp-high",children:[V==null?void 0:V.maxTemp,"°"]}),u.jsxs("span",{className:"temp-low",children:[V==null?void 0:V.minTemp,"°"]})]}),u.jsxs("div",{className:"rain-chance",children:[u.jsx("span",{className:"rain-icon",children:"☔"}),u.jsxs("span",{className:"rain-percentage",children:[V==null?void 0:V.chanceOfRain,"%"]})]})]}),u.jsx("div",{className:"forecast-separator"}),u.jsxs("div",{className:"forecast-day tomorrow",children:[u.jsx("span",{className:"day-label",children:"Zítra"}),u.jsxs("div",{className:"day-temps",children:[u.jsxs("span",{className:"temp-high",children:[S==null?void 0:S.maxTemp,"°"]}),u.jsxs("span",{className:"temp-low",children:[S==null?void 0:S.minTemp,"°"]})]}),u.jsxs("div",{className:"rain-chance",children:[u.jsx("span",{className:"rain-icon",children:"☔"}),u.jsxs("span",{className:"rain-percentage",children:[S==null?void 0:S.chanceOfRain,"%"]})]})]})]}),P&&u.jsx("div",{className:"playful-comment",children:u.jsx("span",{className:"comment-text",children:P})}),u.jsxs("div",{className:"quick-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:"💨"}),u.jsx("span",{className:"stat-value",children:Me.formatWindSpeed(y.current.windSpeed,l.windUnit)})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:"💧"}),u.jsxs("span",{className:"stat-value",children:[y.current.humidity,"%"]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:"👁️"}),u.jsxs("span",{className:"stat-value",children:[y.current.visibility,"km"]})]})]}),f&&u.jsxs("div",{className:"last-updated",children:["Aktualizováno ",Me.getRelativeTime(f)]}),u.jsx("div",{className:"click-hint",children:u.jsx("span",{children:"Klikni pro detail"})})]}),v&&C&&qu.createPortal(I?u.jsx(lP,{isOpen:v,onClose:()=>w(!1)}):u.jsx(oP,{isOpen:v,onClose:()=>w(!1)}),C),l.enableAnimations&&u.jsxs("div",{className:"weather-animations",children:[x.animation==="rain"&&u.jsx("div",{className:"rain-animation",children:[...Array(30)].map((D,k)=>u.jsx("div",{className:"rain-drop",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,animationDuration:`${.5+Math.random()*.5}s`}},k))}),x.animation==="snow"&&u.jsx("div",{className:"snow-animation",children:[...Array(20)].map((D,k)=>u.jsx("div",{className:"snowflake",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*2}s`},children:"❄"},k))}),x.animation==="sun"&&u.jsx("div",{className:"sun-animation",children:u.jsx("div",{className:"sun-rays"})})]})]})},I0=[{id:"1",author:"Máma",authorEmoji:"👩",content:"Nezapomeňte vyvenčit psa! 🐕",timestamp:Date.now()-36e5,color:"#ffeaa7"},{id:"2",author:"Táta",authorEmoji:"👨",content:"Večer pizza party! 🍕",timestamp:Date.now()-72e5,color:"#74b9ff"},{id:"3",author:"Jareček",authorEmoji:"👦",content:"Chci zmrzlinu! 🍦",timestamp:Date.now()-18e5,color:"#a29bfe"}],uP=({selectedMember:t})=>{const[e,n]=M.useState(()=>{const m=localStorage.getItem("sticky-notes");if(m)try{return JSON.parse(m)}catch{return I0}return I0}),[i,s]=M.useState(!1),[r,a]=M.useState("");M.useEffect(()=>{localStorage.setItem("sticky-notes",JSON.stringify(e))},[e]);const l=()=>{if(r.trim()){const m={id:Date.now().toString(),author:"Táta",authorEmoji:"👨",content:r,timestamp:Date.now(),color:h()};n([m,...e]),a(""),s(!1)}},c=m=>{n(e.filter(v=>v.id!==m))},h=()=>{const m=["#ffeaa7","#74b9ff","#a29bfe","#fd79a8","#fdcb6e"];return m[Math.floor(Math.random()*m.length)]},f=m=>{const v=Date.now()-m,w=Math.floor(v/6e4),I=Math.floor(v/36e5),N=Math.floor(v/864e5);return N>0?`před ${N}d`:I>0?`před ${I}h`:w>0?`před ${w}m`:"právě teď"},p=t?e.filter(m=>m.author===t):e;return u.jsxs("div",{className:"sticky-notes-widget",children:[u.jsxs("div",{className:"sticky-notes-header",children:[u.jsxs("div",{className:"sticky-notes-title",children:[u.jsx("span",{className:"sticky-notes-icon",children:"📝"}),u.jsx("span",{children:"Rodinné vzkazy"})]}),u.jsx("button",{className:"add-note-icon-btn",onClick:()=>s(!i),title:"Přidat vzkaz",children:i?"✕":"➕"})]}),i&&u.jsxs("div",{className:"add-note-form",children:[u.jsx("textarea",{className:"note-textarea",placeholder:"Napiš něco rodině...",value:r,onChange:m=>a(m.target.value),autoFocus:!0,maxLength:200}),u.jsxs("div",{className:"note-form-actions",children:[u.jsx("button",{className:"note-save-btn",onClick:l,children:"Přidat"}),u.jsx("button",{className:"note-cancel-btn",onClick:()=>{s(!1),a("")},children:"Zrušit"})]})]}),u.jsx("div",{className:"sticky-notes-container",children:p.length===0?u.jsxs("div",{className:"no-notes-placeholder",children:[u.jsx("div",{className:"no-notes-icon",children:"📭"}),u.jsx("p",{children:"Zatím žádné vzkazy"}),u.jsx("button",{className:"add-first-note-btn",onClick:()=>s(!0),children:"Přidat první vzkaz"})]}):p.map((m,v)=>u.jsxs("div",{className:`sticky-note sticky-note-${v%3}`,style:{backgroundColor:m.color},children:[u.jsxs("div",{className:"note-header",children:[u.jsxs("div",{className:"note-author",children:[u.jsx("span",{className:"note-author-emoji",children:m.authorEmoji}),u.jsx("span",{className:"note-author-name",children:m.author})]}),u.jsx("button",{className:"note-delete-btn",onClick:()=>c(m.id),title:"Smazat vzkaz",children:"✕"})]}),u.jsx("div",{className:"note-content",children:m.content}),u.jsx("div",{className:"note-footer",children:u.jsx("span",{className:"note-timestamp",children:f(m.timestamp)})})]},m.id))})]})},hP=[{date:"2025-10-01",dayOfWeek:1,dayDescription:"Pondělí",lessons:[{subjecttext:"Matematika",teacher:"Nov",room:"U12",begintime:"08:00",endtime:"08:45",theme:"Kvadratické rovnice"},{subjecttext:"Čeština",teacher:"Svo",room:"U15",begintime:"09:00",endtime:"09:45",theme:"Literární romantismus"},{subjecttext:"Přestávka",teacher:"",room:"",begintime:"10:00",endtime:"10:15",theme:""},{subjecttext:"Angličtina",teacher:"Dvo",room:"U8",begintime:"10:15",endtime:"11:00",theme:"Present Perfect"},{subjecttext:"Tělocvik",teacher:"Krá",room:"Těl",begintime:"11:15",endtime:"12:00",theme:"Basketbal"}]},{date:"2025-10-02",dayOfWeek:2,dayDescription:"Úterý",lessons:[{subjecttext:"Přírodopis",teacher:"Hor",room:"U23",begintime:"08:00",endtime:"08:45",theme:"Ekosystémy"},{subjecttext:"Dějepis",teacher:"Mal",room:"U17",begintime:"09:00",endtime:"09:45",theme:"1. světová válka"},{subjecttext:"Matematika",teacher:"Nov",room:"U12",begintime:"10:00",endtime:"10:45",theme:"Rovnice"},{subjecttext:"Informatika",teacher:"Bla",room:"U5",begintime:"11:00",endtime:"11:45",theme:"Python základy"}]},{date:"2025-10-03",dayOfWeek:3,dayDescription:"Středa",lessons:[{subjecttext:"Čeština",teacher:"Svo",room:"U15",begintime:"08:00",endtime:"08:45",theme:"Skladba"},{subjecttext:"Fyzika",teacher:"Hor",room:"U23",begintime:"09:00",endtime:"09:45",theme:"Newtonovy zákony"},{subjecttext:"Chemie",teacher:"Kub",room:"U20",begintime:"10:00",endtime:"10:45",theme:"Kyseliny a zásady"},{subjecttext:"Výtvarka",teacher:"Bar",room:"U18",begintime:"11:00",endtime:"11:45",theme:"Krajina"}]},{date:"2025-10-04",dayOfWeek:4,dayDescription:"Čtvrtek",lessons:[{subjecttext:"Angličtina",teacher:"Dvo",room:"U8",begintime:"08:00",endtime:"08:45",theme:"Reading comprehension"},{subjecttext:"Matematika",teacher:"Nov",room:"U12",begintime:"09:00",endtime:"09:45",theme:"Geometrie"},{subjecttext:"Hudební výchova",teacher:"Mus",room:"U25",begintime:"10:00",endtime:"10:45",theme:"Hudební nástroje"},{subjecttext:"Zeměpis",teacher:"Zem",room:"U16",begintime:"11:00",endtime:"11:45",theme:"Kontinenty"}]},{date:"2025-10-05",dayOfWeek:5,dayDescription:"Pátek",lessons:[{subjecttext:"Čeština",teacher:"Svo",room:"U15",begintime:"08:00",endtime:"08:45",theme:"Sloh"},{subjecttext:"Fyzika",teacher:"Hor",room:"U23",begintime:"09:00",endtime:"09:45",theme:"Energie"},{subjecttext:"Tělocvik",teacher:"Krá",room:"Těl",begintime:"10:00",endtime:"10:45",theme:"Volejbal"},{subjecttext:"Občanská výchova",teacher:"Čer",room:"U14",begintime:"11:00",endtime:"11:45",theme:"Demokracie"}]}];class dP{constructor(){gt(this,"accessToken",null);gt(this,"tokenExpiry",0);gt(this,"serverUrl",null);gt(this,"username",null);gt(this,"password",null);gt(this,"useMockData",!1);this.loadConfig()}async loadConfig(){try{const e=await ia.loadConfig();this.serverUrl=e.apiKeys.bakalari_server,this.username=e.apiKeys.bakalari_username,this.password=e.apiKeys.bakalari_password,this.useMockData=e.features.useMockData,console.log("🔧 Bakaláři API konfigurace:",this.useMockData?"MOCK DATA":"REAL API")}catch(e){console.error("❌ Nepodařilo se načíst Bakaláři konfiguraci:",e),this.useMockData=!0}}async ensureConfig(){if((!this.serverUrl||!this.username||!this.password)&&await this.loadConfig(),!this.serverUrl||!this.username||!this.password)throw new Error("Bakaláři konfigurace není dostupná")}async login(){try{await this.ensureConfig();const e=new URLSearchParams({client_id:"ANDR",grant_type:"password",username:this.username||"",password:this.password||""});console.log("🔐 Pokus o přihlášení do Bakalářů...");const n=await fetch(`${this.serverUrl}/api/login`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString()}),i=await n.text();if(!n.ok)return console.error("Bakaláři login failed:",n.status),!1;try{const s=JSON.parse(i);return this.accessToken=s.access_token,this.tokenExpiry=Date.now()+s.expires_in*1e3,console.log("✅ Bakaláři login successful"),!0}catch(s){return console.error("❌ JSON parse error:",s),!1}}catch(e){return console.error("Bakaláři login error:",e),!1}}async ensureValidToken(){return this.accessToken&&Date.now()<this.tokenExpiry-6e4?!0:await this.login()}getCachedTimetable(){try{const e=localStorage.getItem("bakalari_timetable");if(!e)return null;const{data:n,cachedAt:i}=JSON.parse(e),s=new Date().toISOString().split("T")[0];return i===s?(console.log("✅ Používám cached rozvrh"),n):(console.log("❌ Cache je stará, načítám nová data"),null)}catch(e){return console.error("Chyba při čtení cache:",e),null}}cacheTimetable(e){try{const n={data:e,cachedAt:new Date().toISOString().split("T")[0]};localStorage.setItem("bakalari_timetable",JSON.stringify(n)),console.log("💾 Rozvrh uložen do cache")}catch(n){console.error("Chyba při ukládání cache:",n)}}async getTimetable(){if(await this.ensureConfig(),this.useMockData)return console.log("📦 Používám MOCK data pro rozvrh"),new Promise(i=>{setTimeout(()=>i(hP),500)});const e=this.getCachedTimetable();if(e)return e;if(!await this.ensureValidToken())throw new Error("Login failed");try{const i=await fetch(`${this.serverUrl}/api/3/timetable/actual`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!i.ok)return console.error("Timetable fetch failed:",i.status),[];const s=await i.json(),r=this.parseTimetable(s);return this.cacheTimetable(r),r}catch(i){return console.error("Bakaláři timetable error:",i),[]}}parseTimetable(e){const n=[],i={};return e.Hours&&Array.isArray(e.Hours)&&e.Hours.forEach(s=>{i[s.Id]={beginTime:s.BeginTime,endTime:s.EndTime,caption:s.Caption}}),e.Days&&Array.isArray(e.Days)&&e.Days.forEach(s=>{const r=[];s.Atoms&&Array.isArray(s.Atoms)&&s.Atoms.forEach(a=>{const l=i[a.HourId];l&&r.push({subjecttext:a.SubjectText||"",teacher:a.TeacherAbbrev||"",room:a.RoomAbbrev||"",begintime:l.beginTime,endtime:l.endTime,theme:a.Theme||"",notice:a.Notice||"",change:a.Change||""})}),n.push({date:s.Date,dayOfWeek:s.DayOfWeek,dayDescription:s.DayDescription,lessons:r.sort((a,l)=>a.begintime.localeCompare(l.begintime))})}),n}}const yA=new dP,fP=Object.freeze(Object.defineProperty({__proto__:null,bakalariAPI:yA},Symbol.toStringTag,{value:"Module"})),C0=["Pondělí","Úterý","Středa","Čtvrtek","Pátek"],D0=[{begin:"07:30",end:"08:15"},{begin:"08:30",end:"09:15"},{begin:"09:30",end:"10:15"},{begin:"10:25",end:"11:10"},{begin:"11:20",end:"12:05"}],x0=({isOpen:t,onClose:e,onSave:n,initialSchedule:i})=>{const[s,r]=M.useState(()=>i&&i.length>0?i:C0.map((c,h)=>({date:new Date().toISOString(),dayOfWeek:h+1,dayDescription:c,lessons:D0.map(f=>({subjecttext:"",teacher:"",room:"",begintime:f.begin,endtime:f.end}))}))),a=(c,h,f)=>{const p=[...s];p[c].lessons[h].subjecttext=f,r(p)},l=()=>{n(s),e()};return t?qu.createPortal(u.jsx("div",{className:"schedule-modal-overlay",onClick:e,children:u.jsxs("div",{className:"schedule-modal-content",onClick:c=>c.stopPropagation(),children:[u.jsxs("div",{className:"schedule-modal-header",children:[u.jsx("h2",{children:"Rozvrh pro Jarečka"}),u.jsx("button",{className:"modal-close-btn",onClick:e,children:"×"})]}),u.jsxs("div",{className:"schedule-modal-grid",children:[u.jsx("div",{className:"grid-corner"}),C0.map(c=>u.jsx("div",{className:"grid-day-header",children:c},c)),D0.map((c,h)=>u.jsxs(Lu.Fragment,{children:[u.jsx("div",{className:"grid-time",children:c.begin}),s.map((f,p)=>{var m;return u.jsx("input",{type:"text",className:"grid-input",value:((m=f.lessons[h])==null?void 0:m.subjecttext)||"",onChange:v=>a(p,h,v.target.value),placeholder:"Předmět"},`${p}-${h}`)})]},h))]}),u.jsxs("div",{className:"schedule-modal-footer",children:[u.jsx("button",{className:"modal-cancel-btn",onClick:e,children:"Zrušit"}),u.jsx("button",{className:"modal-save-btn",onClick:l,children:"Uložit rozvrh"})]})]})}),document.body):null},mP=()=>{const[t,e]=M.useState("jarecek"),[n,i]=M.useState(0),[s,r]=M.useState([]),[a,l]=M.useState(()=>{const N=localStorage.getItem("jarecek_schedule");return N?JSON.parse(N):[]}),[c,h]=M.useState(!0),[f,p]=M.useState(!1);M.useEffect(()=>{(async()=>{const y=localStorage.getItem("jarecek_schedule");y&&l(JSON.parse(y)),h(!0);try{const _=await yA.getTimetable();r(_)}catch(_){console.error("Chyba při načítání dat:",_)}finally{h(!1)}})()},[]);const m=N=>{l(N),localStorage.setItem("jarecek_schedule",JSON.stringify(N))},v=N=>({Matematika:"📐",Čeština:"📖","Český jazyk":"📖",Angličtina:"🇬🇧","Anglický jazyk":"🇬🇧",Fyzika:"⚡",Chemie:"🧪",Přírodopis:"🌿",Biologie:"🌿",Dějepis:"🏛️",Zeměpis:"🌍",Tělocvik:"⚽","Tělesná výchova":"⚽",Informatika:"💻",Výtvarka:"🎨","Výtvarná výchova":"🎨","Hudební výchova":"🎵",Hudebka:"🎵","Občanská výchova":"⚖️",Přestávka:"☕"})[N]||"📚";if(c)return u.jsx("div",{className:"school-schedule-widget",children:u.jsx("div",{className:"schedule-loading",children:"Načítání rozvrhu..."})});const w=t==="johanka"?s:a;if(w.length===0)return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"school-schedule-widget",children:u.jsx("div",{className:"schedule-error",children:t==="jarecek"?u.jsxs("div",{children:[u.jsx("p",{children:"Nastavte rozvrh pro Jarečka"}),u.jsx("button",{className:"setup-button",onClick:()=>p(!0),children:"⚙️ Nastavit rozvrh"})]}):"Rozvrh není k dispozici"})}),f&&u.jsx(x0,{isOpen:f,onClose:()=>p(!1),onSave:m,initialSchedule:a})]});const I=w[n];return u.jsxs("div",{className:"school-schedule-widget",children:[u.jsxs("div",{className:"schedule-header",children:[t==="jarecek"&&u.jsx("button",{className:"edit-schedule-btn",onClick:()=>p(!0),children:"✏️ Upravit rozvrh"}),u.jsxs("div",{className:"schedule-title",children:[u.jsx("span",{className:"schedule-icon",children:"🎒"}),u.jsx("span",{children:"Školní rozvrh"})]}),u.jsxs("div",{className:"schedule-kids-tabs",children:[u.jsx("button",{className:`kid-tab ${t==="jarecek"?"active":""}`,onClick:()=>e("jarecek"),children:"Jareček"}),u.jsx("button",{className:`kid-tab ${t==="johanka"?"active":""}`,onClick:()=>e("johanka"),children:"Johanka"})]})]}),u.jsx("div",{className:"schedule-days-nav",children:w.map((N,y)=>u.jsx("button",{className:`day-nav-btn ${n===y?"active":""}`,onClick:()=>i(y),children:N.dayDescription},y))}),u.jsxs("div",{className:"schedule-content",children:[u.jsx("h3",{className:"schedule-day-title",children:I.dayDescription}),u.jsx("div",{className:"lessons-list",children:I.lessons.map((N,y)=>u.jsxs("div",{className:"lesson-item",children:[u.jsx("div",{className:"lesson-time",children:N.begintime}),u.jsxs("div",{className:"lesson-details",children:[u.jsx("span",{className:"lesson-emoji",children:v(N.subjecttext)}),u.jsx("span",{className:"lesson-subject",children:N.subjecttext})]})]},y))})]}),f&&u.jsx(x0,{isOpen:f,onClose:()=>p(!1),onSave:m,initialSchedule:a})]})};async function pP(t,e){{const{MOCK_CONNECTIONS:n}=await Cc(async()=>{const{MOCK_CONNECTIONS:s}=await import("./transportationMockData-D-O4spS_.js");return{MOCK_CONNECTIONS:s}},[]),i=t.includes("Brantice")?"Brantice-Zátor":"Krnov-Bruntál";return await new Promise(s=>setTimeout(s,500)),n[i]}}const k0={johanka:{from:"Brantice",to:"Zátor, škola"},jarecek:{from:"Krnov, aut.st.",to:"Bruntál, aut.st."}},gP=()=>{const[t,e]=M.useState("johanka"),[n,i]=M.useState(null),[s,r]=M.useState(!0),[a,l]=M.useState(null);M.useEffect(()=>{(async()=>{r(!0),l(null),i(null);const m=k0[t];try{const v=await pP(m.from,m.to);i(v)}catch(v){console.error(v),l("Nepodařilo se najít žádný spoj.")}finally{r(!1)}})()},[t]);const c=p=>{const[m,v]=p.split(":").map(Number),w=new Date;w.setHours(m,v,0,0);const I=new Date,N=w.getTime()-I.getTime();return Math.floor(N/6e4)},h=(p,m)=>`https://idos.idnes.cz/vlakyautobusy/spojeni/?${new URLSearchParams({f:p,t:m}).toString()}`,f=k0[t];return u.jsxs("div",{className:"bus-schedule-widget",children:[u.jsxs("div",{className:"bus-header",children:[u.jsxs("div",{className:"bus-title",children:[u.jsx("span",{className:"bus-icon",children:"🚌"}),u.jsx("span",{children:"Nejbližší spoj"})]}),u.jsxs("div",{className:"bus-kids-tabs",children:[u.jsx("button",{className:`bus-kid-tab ${t==="johanka"?"active":""}`,onClick:()=>e("johanka"),children:"👧 Johanka"}),u.jsx("button",{className:`bus-kid-tab ${t==="jarecek"?"active":""}`,onClick:()=>e("jarecek"),children:"👦 Jareček"})]})]}),u.jsxs("div",{className:"bus-content",children:[s?u.jsx("div",{className:"bus-loading",children:"⏳ Hledám spojení..."}):a?u.jsxs("div",{className:"bus-error",children:["⚠️ ",a]}):n?u.jsx(u.Fragment,{children:u.jsxs("div",{className:"next-bus-card",children:[u.jsx("div",{className:"next-bus-badge",children:"Nejbližší spoj"}),u.jsxs("div",{className:"bus-time-section",children:[u.jsx("div",{className:"bus-departure-time",children:n.departureTime}),u.jsx("div",{className:"bus-countdown",children:(()=>{const p=c(n.departureTime);return p<0?"Odjel":p===0?"Odjíždí!":p<5?`Za ${p} min! 🏃`:`Za ${p} minut`})()})]}),u.jsxs("div",{className:"bus-route",children:[u.jsxs("div",{className:"bus-stop",children:[u.jsx("div",{className:"stop-icon",children:"📍"}),u.jsx("div",{className:"stop-name",children:f.from})]}),u.jsx("div",{className:"bus-arrow",children:"→"}),u.jsxs("div",{className:"bus-stop",children:[u.jsx("div",{className:"stop-icon",children:"🏫"}),u.jsx("div",{className:"stop-name",children:f.to})]})]}),u.jsx("div",{className:"bus-info",children:u.jsxs("span",{className:"bus-line",children:["Linka ",n.line]})})]})}):null,u.jsx("div",{className:"idos-link-section",children:u.jsx("a",{href:h(f.from,f.to),target:"_blank",rel:"noopener noreferrer",className:"idos-link-btn",children:"🔍 Hledat jiné spojení na IDOS.cz"})})]})]})},Vu=new Map,yP=(t,e)=>{const n=t.toISOString().split("T")[0];e?Vu.set(n,!0):Vu.delete(n)},Wd=t=>{const e=t.toISOString().split("T")[0];return Vu.get(e)||!1},vP=()=>Array.from(Vu.keys()),_P=({currentDate:t,onDateClick:e,onEventClick:n,onDeleteEvent:i,familyMembers:s,onAddEventFor:r})=>{const{isToday:a,getEventsByDate:l,getHolidayByDate:c,getNamedayByDate:h,formatDate:f}=hs(),[,p]=Lu.useState({}),m=(y,_)=>{_.stopPropagation();const b=Wd(y);yP(y,!b),p({})},v=M.useRef(new Map),w=M.useRef(!1);M.useEffect(()=>{if(w.current)return;const y=setTimeout(()=>{const _=new Date,b=`${_.getFullYear()}-${_.getMonth()}-${_.getDate()}`,x=v.current.get(b);x&&(x.scrollIntoView({behavior:"smooth",block:"center"}),w.current=!0)},100);return()=>clearTimeout(y)},[]),M.useEffect(()=>{w.current=!1},[t.getMonth(),t.getFullYear()]);const I=M.useMemo(()=>{const y=t.getFullYear(),_=t.getMonth(),x=new Date(y,_+1,0).getDate(),P=[];for(let V=1;V<=x;V++)P.push(new Date(y,_,V));return P},[t]),N=M.useCallback((y,_)=>{const b=l(y),x=b.filter(P=>P.familyMemberId===_.id);return b.length>0&&(console.log(`[renderEventsInCell] Datum: ${y.toLocaleDateString()}, Člen: ${_.name}`),console.log("  Všechny události:",b),console.log("  Po filtrování:",x),console.log("  FamilyMember IDs:",b.map(P=>P.familyMemberId))),u.jsx("div",{className:"events-in-cell",children:x.map(P=>u.jsxs("div",{className:"event-wrapper",children:[u.jsx("div",{className:"family-event-item",style:{backgroundColor:_.color},onClick:V=>{V.stopPropagation(),n(P)},title:P.title,children:P.title}),u.jsx("button",{className:"quick-delete-btn",onClick:V=>{V.stopPropagation(),window.confirm(`Opravdu smazat "${P.title}"?`)&&i(P.id)},title:"Smazat událost",children:"×"})]},P.id))})},[l,n,i]);return u.jsxs("div",{className:"month-view new-family-layout",children:[u.jsxs("div",{className:"new-family-header",children:[u.jsx("div",{className:"day-info-header-cell",children:"Den"}),s.map(y=>u.jsxs("div",{className:"member-header-cell",style:{color:y.color},children:[y.icon&&u.jsx("span",{className:"member-icon",children:y.icon}),u.jsx("span",{children:y.name})]},y.id))]}),u.jsx("div",{className:"new-family-body",children:I.map(y=>{const _=c(y),b=h(y),x=s.filter(V=>V.birthday&&new Date(V.birthday).getDate()===y.getDate()&&new Date(V.birthday).getMonth()===y.getMonth()),P=`${y.getFullYear()}-${y.getMonth()}-${y.getDate()}`;return u.jsxs("div",{className:`day-row ${a(y)?"today":""}`,ref:V=>{V&&v.current.set(P,V)},children:[u.jsxs("div",{className:"day-info-cell",children:[u.jsxs("div",{className:"day-date",children:[u.jsx("span",{className:"day-number",children:y.getDate()}),u.jsx("span",{className:"day-name",children:f(y,"WEEKDAY")})]}),u.jsxs("div",{className:`day-special-events ${b&&Wd(y)?"has-marked-nameday":""}`,children:[b&&u.jsx("div",{className:`special-event nameday ${Wd(y)?"marked":""}`,onClick:V=>m(y,V),title:`Svátek: ${b.names.join(", ")} - Klikni pro označení`,children:b.name}),_&&u.jsx("div",{className:"special-event holiday",title:_.name,children:_.name}),x.map(V=>u.jsxs("div",{className:"special-event birthday",title:`Narozeniny: ${V.name}`,children:["🎈 ",V.name]},V.id))]})]}),s.map(V=>u.jsxs("div",{className:"member-day-cell",onClick:()=>e(y),children:[N(y,V),u.jsx("button",{className:"add-event-button-cell",onClick:S=>{S.stopPropagation(),r(y,V.id)}})]},V.id))]},y.toISOString())})})]})},EP=({currentDate:t,onDateClick:e,onEventClick:n,familyMembers:i})=>{const{isToday:s,getEventsByDate:r}=hs(),a=()=>{const m=new Date(t),v=m.getDay(),w=v===0?-6:1-v;m.setDate(m.getDate()+w);const I=[];for(let N=0;N<7;N++){const y=new Date(m);y.setDate(m.getDate()+N),I.push(y)}return I},l=()=>{const m=[];for(let v=6;v<=23;v++)m.push(`${v.toString().padStart(2,"0")}:00`);return m},c=a(),h=l(),f=(m,v)=>r(m).filter(I=>I.time?I.time.split(":")[0]===v.split(":")[0]:!1),p=m=>{const v=i.find(I=>I.id===m.familyMemberId),w=v?v.color:m.color||"#667eea";return u.jsxs("div",{className:"week-event",style:{background:w,color:"white"},onClick:I=>{I.stopPropagation(),n(m)},title:`${m.title}${m.description?`
${m.description}`:""}`,children:[u.jsx("div",{className:"event-time",children:m.time}),u.jsx("div",{className:"event-title",children:m.title})]},m.id)};return u.jsxs("div",{className:"week-view",children:[u.jsxs("div",{className:"week-header",children:[u.jsx("div",{className:"time-column"}),c.map(m=>u.jsxs("div",{className:`week-day-header ${s(m)?"today":""}`,onClick:()=>e(m),children:[u.jsx("div",{className:"week-day-name",children:m.toLocaleDateString("cs-CZ",{weekday:"short"})}),u.jsx("div",{className:"week-day-number",children:m.getDate()})]},m.toISOString()))]}),u.jsx("div",{className:"week-grid",children:h.map(m=>u.jsxs(Lu.Fragment,{children:[u.jsx("div",{className:"hour-label",children:m}),c.map(v=>{const w=f(v,m);return u.jsx("div",{className:"hour-slot",onClick:()=>e(v),children:w.map(p)},`${v.toISOString()}-${m}`)})]},m))})]})},TP=({currentDate:t,onEventClick:e,familyMembers:n})=>{const{getEventsByDate:i,getHolidayByDate:s,getNamedayByDate:r,formatDate:a}=hs(),l=i(t),c=s(t),h=r(t),f=l.sort((y,_)=>!y.time&&!_.time?0:y.time?_.time?y.time.localeCompare(_.time):-1:1),p=f.filter(y=>y.time),m=f.filter(y=>!y.time),w=(()=>{const y=[];for(let _=6;_<=23;_++)y.push(`${_.toString().padStart(2,"0")}:00`),y.push(`${_.toString().padStart(2,"0")}:30`);return y})(),I=y=>p.filter(_=>{if(!_.time)return!1;const b=_.time,x=y.split(":")[0],P=y.split(":")[1],V=b.split(":")[0],S=b.split(":")[1];return V===x&&Math.abs(parseInt(S)-parseInt(P))<30}),N=(y,_=!1)=>{const b=n.find(V=>V.id===y.familyMemberId),x=b?b.color:y.color||"#667eea",P=b?b.name:null;return u.jsxs("div",{className:`day-event ${_?"all-day":""}`,style:{background:`linear-gradient(135deg, ${x}, ${x}dd)`,borderLeft:`4px solid ${x}`},onClick:()=>e(y),children:[y.time&&!_&&u.jsxs("div",{className:"event-time",children:[y.time,y.endTime&&` - ${y.endTime}`]}),u.jsx("div",{className:"event-title",children:y.title}),y.description&&u.jsx("div",{className:"event-description",children:y.description}),P&&u.jsxs("div",{className:"event-member",children:["👤 ",P]}),y.attachments&&y.attachments.length>0&&u.jsxs("div",{className:"event-attachments",children:["📎 ",y.attachments.length," příloha",y.attachments.length>1?"y":""]})]},y.id)};return u.jsxs("div",{className:"day-view",children:[u.jsxs("div",{className:"day-view-header",children:[u.jsx("div",{className:"day-view-title",children:a(t,"WEEKDAY")}),u.jsx("div",{className:"day-view-date",children:a(t,"FULL")}),u.jsxs("div",{className:"day-special-events",children:[c&&u.jsxs("div",{className:"special-event holiday",children:["🎉 ",c.name]}),h&&u.jsxs("div",{className:"special-event nameday",children:["🎂 Svátek: ",h.names.join(", ")]})]})]}),m.length>0&&u.jsxs("div",{className:"all-day-events",children:[u.jsx("h3",{className:"section-title",children:"Celodenní události"}),u.jsx("div",{className:"all-day-events-list",children:m.map(y=>N(y,!0))})]}),u.jsxs("div",{className:"day-schedule",children:[u.jsx("div",{className:"day-times",children:w.map(y=>u.jsx("div",{className:"time-slot",children:y},y))}),u.jsx("div",{className:"day-events-column",children:w.map(y=>{const _=I(y);return u.jsxs("div",{className:"time-slot-events",children:[_.map(b=>N(b)),_.length===0&&y.endsWith(":00")&&u.jsx("div",{className:"empty-slot"})]},y)})})]}),u.jsx("div",{className:"day-summary",children:u.jsxs("div",{className:"day-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:l.length}),u.jsx("span",{className:"stat-label",children:"událostí"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:p.length}),u.jsx("span",{className:"stat-label",children:"s časem"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:m.length}),u.jsx("span",{className:"stat-label",children:"celodenních"})]})]})})]})},bP=({currentDate:t,currentView:e,onDateChange:n,onViewChange:i,onAddEvent:s,showMiniCalendar:r=!1})=>{const a=f=>{const p=new Date(t);switch(e){case"month":p.setMonth(p.getMonth()+(f==="next"?1:-1));break;case"week":p.setDate(p.getDate()+(f==="next"?7:-7));break;case"day":p.setDate(p.getDate()+(f==="next"?1:-1));break}n(p)},l=()=>{n(new Date)},c=()=>{const f={};switch(e){case"month":f.month="long",f.year="numeric";break;case"week":const p=new Date(t),m=p.getDay(),v=m===0?-6:1-m;p.setDate(p.getDate()+v);const w=new Date(p);return w.setDate(p.getDate()+6),p.getMonth()===w.getMonth()?`${p.getDate()}.–${w.getDate()}. ${p.toLocaleDateString("cs-CZ",{month:"long",year:"numeric"})}`:`${p.getDate()}. ${p.toLocaleDateString("cs-CZ",{month:"short"})} – ${w.getDate()}. ${w.toLocaleDateString("cs-CZ",{month:"short",year:"numeric"})}`;case"day":f.weekday="long",f.day="numeric",f.month="long",f.year="numeric";break}return t.toLocaleDateString("cs-CZ",f)},h={month:"Měsíc",week:"Týden",day:"Den"};return u.jsxs("div",{className:"calendar-header",children:[u.jsxs("div",{className:"calendar-title-section",children:[u.jsx("h2",{className:"calendar-title",children:c()}),!r&&u.jsxs("div",{className:"calendar-navigation",children:[u.jsx("button",{className:"nav-button",onClick:()=>a("prev"),title:"Předchozí",children:"◀"}),u.jsx("button",{className:"nav-button today-button",onClick:l,title:"Dnes",children:"Dnes"}),u.jsx("button",{className:"nav-button",onClick:()=>a("next"),title:"Další",children:"▶"})]})]}),!r&&u.jsxs("div",{className:"calendar-controls",children:[u.jsx("div",{className:"view-selector",children:Object.keys(h).map(f=>u.jsx("button",{className:`view-button ${e===f?"active":""}`,onClick:()=>i(f),children:h[f]},f))}),u.jsxs("button",{className:"add-event-button",onClick:s,title:"Přidat událost",children:[u.jsx("span",{children:"+"}),"Přidat událost"]})]})]})},wP=({familyMembers:t=[],onAddEvent:e,onEditEvent:n})=>{const{currentDate:i,setCurrentDate:s,currentView:r,headerImage:a,setCurrentView:l,deleteEvent:c}=hs(),h=p=>{r!=="day"&&(l("day"),s(p))},f=()=>{switch(r){case"month":return u.jsx(_P,{currentDate:i,onDateClick:h,onEventClick:n,onDeleteEvent:c,familyMembers:t,onAddEventFor:(p,m)=>e(p,m)});case"week":return u.jsx(EP,{currentDate:i,onDateClick:h,onEventClick:n,familyMembers:t});case"day":return u.jsx(TP,{currentDate:i,onEventClick:n,familyMembers:t});default:return null}};return u.jsxs("div",{className:"calendar-widget",style:{backgroundImage:a&&a.startsWith("http")?`url('${a}')`:a||""},children:[u.jsx(bP,{currentDate:i,currentView:r,onDateChange:s,onViewChange:l,onAddEvent:()=>e(i)}),u.jsx("div",{className:"calendar-content",children:f()})]})},vA=({event:t,date:e,familyMembers:n,onSave:i,onDelete:s,onClose:r,defaultMemberId:a})=>{console.log("[EventForm] Props:",{event:t==null?void 0:t.title,date:e,isToday:(e==null?void 0:e.toDateString())===new Date().toDateString()});const l=()=>{const y=new Date,_=y.getMinutes(),b=Math.ceil(_/15)*15;return b>=60?(y.setHours(y.getHours()+1),y.setMinutes(0)):y.setMinutes(b),`${y.getHours().toString().padStart(2,"0")}:${y.getMinutes().toString().padStart(2,"0")}`},c=y=>{const[_,b]=y.split(":").map(Number),x=new Date;return x.setHours(_,b+30),`${x.getHours().toString().padStart(2,"0")}:${x.getMinutes().toString().padStart(2,"0")}`},h=l(),[f,p]=M.useState({title:"",description:"",date:new Date,time:h,endTime:c(h),type:"personal",familyMemberId:a||"",color:"#667eea",reminder:"none",isAllDay:!1});M.useEffect(()=>{if(t)p({title:t.title,description:t.description||"",date:new Date(t.date),time:t.time||"",endTime:t.endTime||"",type:t.type,familyMemberId:t.familyMemberId||"",color:t.color||"#667eea",reminder:t.reminder||"none",isAllDay:t.isAllDay||!1});else{const y=new Date,_=l(),b=c(_);p(x=>({...x,date:y,time:_,endTime:b,familyMemberId:a||""}))}},[t,e,a]),M.useEffect(()=>{!t&&a&&p(y=>({...y,familyMemberId:a}))},[t,a]);const m=[{value:"personal",label:"Osobní",icon:"👤"},{value:"work",label:"Pracovní",icon:"💼"},{value:"family",label:"Rodina",icon:"👨‍👩‍👧‍👦"},{value:"birthday",label:"Narozeniny",icon:"🎂"},{value:"reminder",label:"Připomínka",icon:"⏰"}],v=[{value:"none",label:"Bez připomínky"},{value:"5min",label:"5 minut před"},{value:"15min",label:"15 minut před"},{value:"30min",label:"30 minut před"},{value:"1hour",label:"1 hodinu před"},{value:"1day",label:"1 den před"},{value:"1week",label:"1 týden před"},{value:"email",label:"Email"},{value:"push",label:"Push notifikace"}],w=["#667eea","#764ba2","#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3","#ff9f43","#8395a7","#10ac84","#ee5a24","#0abde3"],I=y=>{y.preventDefault(),f.title.trim()&&i({...f,date:f.date.toISOString().split("T")[0],time:f.isAllDay?void 0:f.time,endTime:f.isAllDay?void 0:f.endTime})},N=(y,_)=>{p(b=>({...b,[y]:_}))};return u.jsx("div",{className:"event-form-overlay",onClick:r,children:u.jsxs("div",{className:"event-form",onClick:y=>y.stopPropagation(),children:[u.jsxs("div",{className:"event-form-header",children:[u.jsx("h3",{className:"event-form-title",children:t?"Upravit událost":"Nová událost"}),u.jsx("button",{className:"close-button",onClick:r,children:"×"})]}),u.jsxs("form",{onSubmit:I,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Název události *"}),u.jsx("input",{type:"text",className:"form-input",value:f.title,onChange:y=>N("title",y.target.value),placeholder:"Zadejte název události",required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Popis"}),u.jsx("textarea",{className:"form-textarea",value:f.description,onChange:y=>N("description",y.target.value),placeholder:"Zadejte popis události",rows:3})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Datum"}),u.jsx("input",{type:"date",className:"form-input",value:f.date.toISOString().split("T")[0],onChange:y=>N("date",new Date(y.target.value))})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("input",{type:"checkbox",checked:f.isAllDay,onChange:y=>N("isAllDay",y.target.checked),style:{marginRight:"8px"}}),"Celodenní událost"]})}),!f.isAllDay&&u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Začátek"}),u.jsx("input",{type:"time",className:"form-input",value:f.time,onChange:y=>N("time",y.target.value)})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Konec"}),u.jsx("input",{type:"time",className:"form-input",value:f.endTime,onChange:y=>N("endTime",y.target.value)})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Typ události"}),u.jsx("select",{className:"form-select",value:f.type,onChange:y=>N("type",y.target.value),children:m.map(y=>u.jsxs("option",{value:y.value,children:[y.icon," ",y.label]},y.value))})]}),n.length>0&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Člen rodiny"}),u.jsxs("div",{className:"family-member-selector",children:[u.jsx("button",{type:"button",className:`family-member-option ${f.familyMemberId?"":"selected"}`,onClick:()=>N("familyMemberId",""),children:"Nikdo"}),n.map(y=>u.jsx("button",{type:"button",className:`family-member-option ${f.familyMemberId===y.id?"selected":""}`,style:{backgroundColor:f.familyMemberId===y.id?y.color:"transparent",borderColor:y.color,color:f.familyMemberId===y.id?"white":y.color},onClick:()=>N("familyMemberId",y.id),children:y.name},y.id))]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Barva"}),u.jsx("div",{className:"color-picker",children:w.map(y=>u.jsx("button",{type:"button",className:`color-option ${f.color===y?"selected":""}`,style:{backgroundColor:y},onClick:()=>N("color",y),title:y},y))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Připomínka"}),u.jsx("div",{className:"reminder-options",children:v.map(y=>u.jsx("button",{type:"button",className:`reminder-option ${f.reminder===y.value?"selected":""}`,onClick:()=>N("reminder",y.value),children:y.label},y.value))})]}),u.jsxs("div",{className:"form-actions",children:[s&&u.jsx("button",{type:"button",className:"btn btn-danger",onClick:s,children:"🗑️ Smazat"}),u.jsx("button",{type:"button",className:"btn btn-outline",onClick:r,children:"Zrušit"}),u.jsxs("button",{type:"submit",className:"btn btn-primary",children:["💾 ",t?"Uložit":"Vytvořit"]})]})]})]})})},SP=({familyMembers:t=[]})=>{const{currentDate:e,setCurrentDate:n,getEventsByDate:i,getHolidayByDate:s,getNamedayByDate:r,formatDate:a,addEvent:l,updateEvent:c,deleteEvent:h,getCurrentMonthTheme:f}=hs(),[p,m]=M.useState(new Date),[v,w]=M.useState(!1),[I,N]=M.useState(null),y=f(),_=new Date,x=(()=>{const F=e.getFullYear(),B=e.getMonth(),q=new Date(F,B,1),ie=new Date(F,B+1,0).getDate(),Ee=(q.getDay()+6)%7,wn=[];for(let ze=0;ze<Ee;ze++)wn.push(null);for(let ze=1;ze<=ie;ze++)wn.push(new Date(F,B,ze));return wn})(),P=F=>{m(F)},V=()=>{N(null),w(!0)},S=F=>{N(F),m(new Date(F.date)),w(!0)},T=F=>{if(I)c(I.id,F);else{const B=F.date?new Date(F.date):p||new Date,q={id:Date.now().toString(),userId:"",createdAt:Date.now(),updatedAt:Date.now(),title:F.title||"Nová událost",date:B.toISOString().split("T")[0],type:F.type||"personal",...F};l(q)}w(!1)},R=F=>{h(F),w(!1)},C=F=>{const B=new Date(e);B.setMonth(B.getMonth()+(F==="next"?1:-1)),n(B)},D=F=>F.getDate()===_.getDate()&&F.getMonth()===_.getMonth()&&F.getFullYear()===_.getFullYear(),k=p?i(p):[],A=p?s(p):null,Q=p?r(p):null;return u.jsxs("div",{className:"calendar-mobile",children:[u.jsx("div",{className:"calendar-mobile-header",style:{background:y.backgroundImage},children:u.jsxs("div",{className:"mobile-header-controls",children:[u.jsx("button",{className:"mobile-nav-btn",onClick:()=>C("prev"),children:"◀"}),u.jsxs("h2",{className:"mobile-month-title",style:{color:y.textColor},children:[a(e,"MONTH")," ",e.getFullYear()]}),u.jsx("button",{className:"mobile-nav-btn",onClick:()=>C("next"),children:"▶"})]})}),u.jsxs("div",{className:"calendar-mobile-grid",children:[u.jsx("div",{className:"mobile-weekdays",children:["Po","Út","St","Čt","Pá","So","Ne"].map(F=>u.jsx("div",{className:"mobile-weekday",children:F},F))}),u.jsx("div",{className:"mobile-days",children:x.map((F,B)=>{if(!F)return u.jsx("div",{className:"mobile-day empty"},`empty-${B}`);const K=i(F).length>0,ie=s(F),Ee=p&&F.getDate()===p.getDate()&&F.getMonth()===p.getMonth();return u.jsxs("div",{className:`mobile-day ${D(F)?"today":""} ${Ee?"selected":""} ${ie?"holiday":""}`,onClick:()=>P(F),children:[u.jsx("span",{className:"mobile-day-number",children:F.getDate()}),K&&u.jsx("div",{className:"mobile-event-dot"})]},F.toISOString())})})]}),p&&u.jsxs("div",{className:"mobile-day-detail",children:[u.jsxs("div",{className:"mobile-detail-header",children:[u.jsx("h3",{children:a(p,"FULL")}),u.jsx("button",{className:"mobile-add-btn",onClick:V,children:"+ Přidat"})]}),A&&u.jsxs("div",{className:"mobile-special-event holiday",children:["🎉 ",A.name]}),Q&&u.jsxs("div",{className:"mobile-special-event nameday",children:["🎂 Svátek: ",Q.names.join(", ")]}),u.jsx("div",{className:"mobile-events-list",children:k.length>0?k.map(F=>{const B=t.find(q=>q.id===F.familyMemberId);return u.jsxs("div",{className:"mobile-event-item",style:{borderLeftColor:(B==null?void 0:B.color)||F.color},onClick:()=>S(F),children:[F.time&&u.jsx("span",{className:"mobile-event-time",children:F.time}),u.jsx("span",{className:"mobile-event-title",children:F.title}),B&&u.jsx("span",{className:"mobile-event-member",children:B.name})]},F.id)}):u.jsx("p",{className:"mobile-no-events",children:"Žádné události"})})]}),v&&u.jsx(vA,{event:I,date:p,familyMembers:t,onSave:T,onDelete:I?()=>R(I.id):void 0,onClose:()=>w(!1)})]})},AP=(t=768)=>{const[e,n]=M.useState(!1);return M.useEffect(()=>{const i=()=>{n(window.innerWidth<t)};i();const s=()=>{i()};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[t]),e},NP=({isOpen:t,onClose:e,familyMembers:n=[]})=>{const{addEvent:i,updateEvent:s,deleteEvent:r}=hs(),a=AP(768),[l,c]=M.useState(!1),[h,f]=M.useState(null),[p,m]=M.useState(null),[v,w]=M.useState(void 0);if(M.useEffect(()=>{const x=P=>{P.key==="Escape"&&(l?c(!1):e())};return t&&(document.addEventListener("keydown",x),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",x),document.body.style.overflow="unset"}},[t,e,l]),!t)return null;const I=(x,P)=>{f(null),m(x),w(P),c(!0)},N=x=>{f(x),m(new Date(x.date)),w(x.familyMemberId),c(!0)},y=x=>{if(h)s(h.id,x);else{const P=x.date?new Date(x.date):p||new Date,V={title:x.title||"Nová událost",date:P.toISOString().split("T")[0],type:"personal",...x};i(V)}c(!1)},_=x=>{r(x),c(!1)},b=document.getElementById("modal-root");return!t||!b?null:qu.createPortal(u.jsxs("div",{className:"calendar-modal-overlay",onClick:e,children:[u.jsx("div",{className:`calendar-modal-content ${a?"mobile":""}`,onClick:x=>x.stopPropagation(),children:a?u.jsx(SP,{familyMembers:n}):u.jsx(wP,{familyMembers:n,onAddEvent:I,onEditEvent:N})}),!a&&l&&u.jsx(vA,{event:h,date:p,familyMembers:n,onSave:y,onDelete:h?()=>_(h.id):void 0,onClose:()=>c(!1),defaultMemberId:v})]}),b)},RP=({daysAhead:t=7,maxEvents:e=5,familyMembers:n=[]})=>{const{getEventsByDate:i,formatDate:s,isToday:r}=hs(),[a,l]=M.useState([]),[c,h]=M.useState(!1);M.useEffect(()=>{(()=>{const I=new Date,N=[];i(I).forEach(b=>{N.push({...b,displayDate:I})});for(let b=1;b<=t;b++){const x=new Date;x.setDate(I.getDate()+b),i(x).forEach(V=>{N.push({...V,displayDate:x})})}const _=N.sort((b,x)=>b.displayDate.getTime()-x.displayDate.getTime()).slice(0,e);l(_)})()},[i,t,e]);const f=w=>{switch(w){case"birthday":return"🎂";case"holiday":return"🎉";case"school":return"🎒";case"family":return"👨‍👩‍👧‍👦";case"work":return"💼";case"personal":return"📌";default:return"📅"}},p=w=>{switch(w){case"birthday":return"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)";case"holiday":return"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)";case"school":return"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)";case"family":return"linear-gradient(135deg, #fa709a 0%, #fee140 100%)";case"work":return"linear-gradient(135deg, #30cfd0 0%, #330867 100%)";default:return"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)"}},m=a.filter(w=>r(w.displayDate)),v=m.length>0;return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"upcoming-events-widget",onClick:()=>h(!0),children:[u.jsxs("div",{className:"widget-header",children:[u.jsx("h3",{className:"widget-title",children:"📅 Co nás čeká?"}),u.jsxs("span",{className:"event-count",children:[a.length," událostí"]})]}),u.jsx("div",{className:"events-container",children:a.length===0?u.jsxs("div",{className:"no-events-message",children:[u.jsx("div",{className:"celebration-icon",children:"🎊"}),u.jsx("h4",{className:"no-events-title",children:"Hurá!"}),u.jsx("p",{className:"no-events-text",children:"Dnes nemáme žádný úkol!"}),u.jsx("div",{className:"happy-emoji",children:"😎"})]}):u.jsxs(u.Fragment,{children:[v&&u.jsxs("div",{className:"today-section",children:[u.jsx("h4",{className:"section-title",children:"🌟 Dnes"}),m.map((w,I)=>u.jsxs("div",{className:"event-card today-event",style:{background:p(w.type),animationDelay:`${I*.1}s`},children:[u.jsx("div",{className:"event-icon",children:f(w.type)}),u.jsxs("div",{className:"event-details",children:[u.jsx("h5",{className:"event-title",children:w.title}),w.time&&u.jsxs("span",{className:"event-time",children:["⏰ ",w.time]})]}),u.jsx("div",{className:"event-badge",children:"Dnes!"})]},w.id))]}),a.filter(w=>!r(w.displayDate)).length>0&&u.jsxs("div",{className:"upcoming-section",children:[u.jsx("h4",{className:"section-title",children:"🔜 Brzy"}),a.filter(w=>!r(w.displayDate)).map((w,I)=>u.jsxs("div",{className:"event-card upcoming-event",style:{background:p(w.type),animationDelay:`${(m.length+I)*.1}s`},children:[u.jsx("div",{className:"event-icon",children:f(w.type)}),u.jsxs("div",{className:"event-details",children:[u.jsx("h5",{className:"event-title",children:w.title}),u.jsxs("span",{className:"event-date",children:[s(w.displayDate,"DD.MM")," -"," ",s(w.displayDate,"WEEKDAY")]}),w.time&&u.jsxs("span",{className:"event-time",children:["⏰ ",w.time]})]})]},w.id))]})]})}),u.jsx("div",{className:"click-hint-events",children:u.jsx("span",{children:"👆 Klikni pro celý kalendář"})})]}),c&&u.jsx(NP,{isOpen:c,onClose:()=>h(!1),familyMembers:n})]})},ws=class ws{constructor(){gt(this,"registration",null)}static getInstance(){return ws.instance||(ws.instance=new ws),ws.instance}isSupported(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}getPermission(){return this.isSupported()?Notification.permission:"denied"}async requestPermission(){if(!this.isSupported())return console.warn("Push notifications are not supported"),!1;if(Notification.permission==="granted")return!0;if(Notification.permission==="denied")return console.warn("Notification permission denied"),!1;try{return await Notification.requestPermission()==="granted"}catch(e){return console.error("Error requesting notification permission:",e),!1}}async registerServiceWorker(){if(!this.isSupported())return null;try{const e=await navigator.serviceWorker.register("/sw.js");return this.registration=e,console.log("Service Worker registered:",e),e}catch(e){return console.error("Service Worker registration failed:",e),null}}async showNotification(e,n){if(!this.isSupported()||Notification.permission!=="granted"){console.warn("Cannot show notification - permission not granted");return}try{this.registration?await this.registration.showNotification(e,{...n,icon:n.icon||"/icon-192x192.png",badge:n.badge||"/badge-72x72.png"}):new Notification(e,n)}catch(i){console.error("Error showing notification:",i)}}async showFamilyMessage(e,n,i=!1){const s=i?`🚨 ${e}`:`💬 ${e}`;await this.showNotification(s,{body:n,tag:i?"urgent-message":"family-message",requireInteraction:i,silent:!1,vibrate:i?[200,100,200,100,200]:[200],data:{type:"family-message",urgent:i,timestamp:Date.now()}})}async closeAllNotifications(){if(!this.registration)return;(await this.registration.getNotifications()).forEach(n=>n.close())}};gt(ws,"instance");let _m=ws;const za=_m.getInstance(),Os=[{id:"all",name:"Celá rodina",members:["dad","mom","jarecek","johanka"],icon:"👨‍👩‍👧‍👦",color:"#667eea"},{id:"parents",name:"Rodiče",members:["dad","mom"],icon:"👫",color:"#ff6b6b"},{id:"children",name:"Děti",members:["jarecek","johanka"],icon:"👦👧",color:"#96ceb4"}],_A={shopping:"Jedu do obchodu, zavolejte jestli něco chcete",call_down:"Potřebuju vás dolů",dinner_ready:"Oběd/Večeře je hotová",leaving_soon:"Za chvíli odjíždím",custom:""};class IP{async sendMessage(e,n,i,s,r,a=!1){try{const l=at(se,"familyMessages"),c={senderId:e,senderName:n,recipients:i,message:s,...r&&{template:r},urgent:a,timestamp:Date.now(),readBy:[e],delivered:!0};return(await ju(l,c)).id}catch{throw new Error("Nepodařilo se poslat zprávu")}}async markAsRead(e,n){try{const i=He(se,"familyMessages",e),s=await zi(Ht(at(se,"familyMessages"),Ft("__name__","==",e)));if(!s.empty){const a=[...s.docs[0].data().readBy];a.includes(n)||(a.push(n),await Nn(i,{readBy:a}))}}catch(i){console.error("Error marking message as read:",i)}}async deleteMessage(e){try{const n=He(se,"familyMessages",e);await ku(n)}catch(n){throw console.error("Error deleting message:",n),new Error("Nepodařilo se smazat zprávu")}}async deleteReadMessages(e){try{const n=at(se,"familyMessages"),i=Ht(n,Ft("recipients","array-contains",e),dc(100)),s=await zi(i);if(s.empty)return 0;const r=s.docs.filter(l=>l.data().readBy.includes(e));if(r.length===0)return 0;const a=ym(se);return r.forEach(l=>{a.delete(l.ref)}),await a.commit(),r.length}catch(n){throw console.error("Error deleting read messages:",n),new Error("Nepodařilo se smazat zprávy")}}async getMessagesForUser(e,n=50){try{const i=at(se,"familyMessages"),s=Ht(i,Ft("recipients","array-contains",e),vo("timestamp","desc"),dc(n));return(await zi(s)).docs.map(a=>({id:a.id,...a.data()}))}catch(i){return console.error("Error getting messages:",i),[]}}subscribeToMessages(e,n){const i=at(se,"familyMessages"),s=Ht(i,Ft("recipients","array-contains",e),vo("timestamp","desc"),dc(50));return _o(s,r=>{const a=r.docs.map(l=>({id:l.id,...l.data()}));n(a)})}expandRecipients(e){const n=new Set;return e.forEach(i=>{const s=Os.find(r=>r.id===i);s?s.members.forEach(r=>n.add(r)):n.add(i)}),Array.from(n)}getGroup(e){return Os.find(n=>n.id===e)}getAllGroups(){return Os}async deleteOldMessages(e=7){try{const n=at(se,"familyMessages"),i=Date.now()-e*24*60*60*1e3,s=Ht(n,Ft("timestamp","<",i),dc(100)),r=await zi(s);if(r.empty)return 0;const a=ym(se);return r.docs.forEach(l=>{a.delete(l.ref)}),await a.commit(),r.docs.length}catch(n){return console.error("Error deleting old messages:",n),0}}async runCleanup(e=7){let n=0;do n=await this.deleteOldMessages(e);while(n>0)}}const Ts=new IP,CP=Object.freeze(Object.defineProperty({__proto__:null,FAMILY_GROUPS:Os,MESSAGE_TEMPLATES:_A,familyMessagingService:Ts},Symbol.toStringTag,{value:"Module"})),DP=t=>{const[e,n]=M.useState("default"),[i,s]=M.useState(!1),[r,a]=M.useState([]),[l,c]=M.useState(0);M.useEffect(()=>{const w=za.isSupported();s(w),w&&n(za.getPermission())},[]),M.useEffect(()=>{if(!t){console.log("❌ useNotifications: No userId");return}console.log("✅ useNotifications: Subscribing with userId:",t);const w=Ts.subscribeToMessages(t,I=>{console.log("📨 useNotifications: Received messages:",I),a(I);const N=I.filter(y=>!y.readBy.includes(t)).length;c(N),I.forEach(y=>{!y.readBy.includes(t)&&y.senderId!==t&&za.showFamilyMessage(y.senderName,y.message,y.urgent)})});return()=>w()},[t]);const h=M.useCallback(async()=>{const w=await za.requestPermission();return w?(await za.registerServiceWorker(),n("granted")):n("denied"),w},[]),f=M.useCallback(async(w,I,N,y,_=!1)=>{if(!t)throw new Error("User not authenticated");const b=Ts.expandRecipients(I);return await Ts.sendMessage(t,w,b,N,y,_)},[t]),p=M.useCallback(async w=>{t&&await Ts.markAsRead(w,t)},[t]),m=M.useCallback(async w=>{try{await Ts.deleteMessage(w)}catch(I){throw console.error("Error deleting message:",I),I}},[]),v=M.useCallback(async()=>{if(!t)return 0;try{return await Ts.deleteReadMessages(t)}catch(w){throw console.error("Error deleting read messages:",w),w}},[t]);return{permission:e,isSupported:i,messages:r,unreadCount:l,requestPermission:h,sendMessage:f,markAsRead:p,deleteMessage:m,deleteReadMessages:v}},EA=M.createContext(null),Ig=()=>{const t=M.useContext(EA);if(!t)throw new Error("useNotificationContext must be used within NotificationProvider");return t},xP=({children:t,userId:e})=>{const n=DP(e);return u.jsx(EA.Provider,{value:n,children:t})},kP="dad",jP=()=>{const{messages:t,markAsRead:e,unreadCount:n,deleteMessage:i,deleteReadMessages:s}=Ig(),[r,a]=Lu.useState(null),l=p=>{const m=new Date(p),w=new Date().getTime()-m.getTime(),I=Math.floor(w/6e4);if(I<1)return"Právě teď";if(I<60)return`Před ${I} min`;const N=Math.floor(I/60);return N<24?`Před ${N} h`:`Před ${Math.floor(N/24)} d`},c=async p=>{await e(p)},h=async(p,m)=>{m.stopPropagation(),a(p);try{await i(p)}catch{alert("Nepodařilo se smazat zprávu")}finally{a(null)}},f=async()=>{if(confirm("Opravdu chcete smazat všechny přečtené zprávy?"))try{const p=await s();p>0?alert(`Smazáno ${p} zpráv`):alert("Žádné přečtené zprávy ke smazání")}catch{alert("Nepodařilo se smazat zprávy")}};return u.jsxs("div",{className:"message-history-widget",children:[u.jsxs("div",{className:"widget-header-msg",children:[u.jsxs("div",{className:"header-left",children:[u.jsx("h3",{children:"💬 Rodinné zprávy"}),n>0&&u.jsx("span",{className:"unread-count-badge",children:n})]}),t.length>0&&u.jsx("button",{className:"delete-all-btn",onClick:f,title:"Smazat přečtené",children:"🗑️"})]}),u.jsx("div",{className:"messages-list",children:t.length===0?u.jsxs("div",{className:"no-messages",children:[u.jsx("div",{className:"no-messages-icon",children:"📭"}),u.jsx("p",{children:"Zatím žádné zprávy"})]}):t.map(p=>{const m=!p.readBy.includes(kP);return u.jsxs("div",{className:`message-item ${m?"unread":""} ${p.urgent?"urgent":""}`,onClick:()=>c(p.id),children:[p.urgent&&u.jsx("div",{className:"urgent-indicator",children:"🚨"}),u.jsxs("div",{className:"message-header-item",children:[u.jsx("span",{className:"sender-name",children:p.senderName}),u.jsx("span",{className:"message-time",children:l(p.timestamp)})]}),u.jsx("div",{className:"message-text",children:p.message}),m&&u.jsx("div",{className:"unread-dot"}),u.jsx("button",{className:"delete-message-btn",onClick:v=>h(p.id,v),disabled:r===p.id,title:"Smazat zprávu",children:r===p.id?"⏳":"✕"})]},p.id)})})]})},MP=({selectedMember:t,onClearFilter:e,familyMembers:n})=>u.jsxs("div",{className:"family-dashboard",children:[u.jsxs("div",{className:"widgets-grid",children:[u.jsx("div",{className:"widget-container weather-container",children:u.jsx(cP,{isVisible:!0})}),u.jsx("div",{className:"widget-container upcoming-events-container",children:u.jsx(RP,{familyMembers:n})}),u.jsx("div",{className:"widget-container stickynotes-container",children:u.jsx(uP,{selectedMember:t})}),u.jsx("div",{className:"widget-container schedule-container",children:u.jsx(mP,{})}),u.jsx("div",{className:"widget-card",children:u.jsx(gP,{})}),u.jsx("div",{className:"widget-container messages-container",children:u.jsx(jP,{})}),u.jsx("div",{className:"widget-container add-widget-container",children:u.jsxs("div",{className:"add-widget-placeholder",children:[u.jsx("div",{className:"add-widget-icon",children:"➕"}),u.jsx("div",{className:"add-widget-text",children:"Přidat widget"}),u.jsx("p",{className:"add-widget-hint",children:"Brzy dostupné..."})]})})]}),t&&u.jsxs("div",{className:"member-info-panel",children:[u.jsxs("p",{className:"member-info-text",children:["📊 Zobrazuji aktivitu pro: ",u.jsx("strong",{children:t})]}),u.jsx("button",{className:"clear-filter-btn",onClick:e,children:"✕ Zobrazit vše"})]})]}),OP=()=>u.jsxs("div",{className:"tech-dashboard",children:[u.jsxs("div",{className:"tech-dashboard-header",children:[u.jsx("h2",{className:"tech-title",children:"🔧 Technický Dashboard"}),u.jsx("p",{className:"tech-subtitle",children:"Správa zařízení a systémů"})]}),u.jsxs("div",{className:"tech-widgets-grid",children:[u.jsxs("div",{className:"tech-widget tuya-widget",children:[u.jsxs("div",{className:"tech-widget-header",children:[u.jsxs("div",{className:"tech-widget-title",children:[u.jsx("span",{className:"tech-widget-icon",children:"🔌"}),u.jsx("span",{children:"Tuya Zařízení"})]}),u.jsx("span",{className:"tech-widget-count",children:"0"})]}),u.jsx("div",{className:"tech-widget-content",children:u.jsx("p",{className:"tech-placeholder-text",children:"Připojení k Tuya zařízením bude dostupné brzy..."})})]}),u.jsxs("div",{className:"tech-widget cameras-widget",children:[u.jsxs("div",{className:"tech-widget-header",children:[u.jsxs("div",{className:"tech-widget-title",children:[u.jsx("span",{className:"tech-widget-icon",children:"📹"}),u.jsx("span",{children:"Bezpečnostní kamery"})]}),u.jsx("span",{className:"tech-widget-count",children:"0"})]}),u.jsx("div",{className:"tech-widget-content",children:u.jsx("p",{className:"tech-placeholder-text",children:"Připojení ke kamerám bude dostupné brzy..."})})]}),u.jsxs("div",{className:"tech-widget energy-widget",children:[u.jsx("div",{className:"tech-widget-header",children:u.jsxs("div",{className:"tech-widget-title",children:[u.jsx("span",{className:"tech-widget-icon",children:"⚡"}),u.jsx("span",{children:"Spotřeba energie"})]})}),u.jsx("div",{className:"tech-widget-content",children:u.jsx("p",{className:"tech-placeholder-text",children:"Monitoring energie bude dostupný brzy..."})})]}),u.jsxs("div",{className:"tech-widget system-widget",children:[u.jsx("div",{className:"tech-widget-header",children:u.jsxs("div",{className:"tech-widget-title",children:[u.jsx("span",{className:"tech-widget-icon",children:"🖥️"}),u.jsx("span",{children:"Systémový stav"})]})}),u.jsx("div",{className:"tech-widget-content",children:u.jsx("p",{className:"tech-placeholder-text",children:"Systémové informace budou dostupné brzy..."})})]})]}),u.jsxs("div",{className:"tech-coming-soon",children:[u.jsx("div",{className:"coming-soon-icon",children:"🚧"}),u.jsx("h3",{children:"Technický dashboard v přípravě"}),u.jsx("p",{children:"Brzy zde najdete kompletní správu všech technických zařízení."})]})]}),PP=t=>{const{formatDate:e,getNamedayByDate:n,isSameDay:i}=hs(),[s,r]=M.useState(0),a=new Date,l=new Date(a);l.setDate(l.getDate()+1);const c=n(a),h=n(l),p=(()=>{const b=vP(),x=new Date;x.setHours(0,0,0,0);const P=[];for(const V of b){const S=new Date(V);S.setHours(0,0,0,0);const T=n(S);if(!T)continue;const R=S.getTime()-x.getTime(),C=Math.ceil(R/(1e3*60*60*24));P.push({names:T.names.join(", "),daysUntil:C,isToday:C===0})}return P.sort((V,S)=>V.daysUntil-S.daysUntil)})(),m=p.find(b=>b.isToday),v=p.filter(b=>b.daysUntil>0).slice(0,3),w=t.filter(b=>b.birthday&&i(new Date(b.birthday),a)),I=[c?`Dnes má svátek ${c.names.join(", ")}`:null,h?`Zítra má svátek ${h.names.join(", ")}`:null,v.length>0&&v[0].daysUntil<=14?`Za ${v[0].daysUntil} ${v[0].daysUntil===1?"den":"dny"}: ${v[0].names}`:null].filter(b=>b!==null);M.useEffect(()=>{if(I.length<=1)return;const b=setInterval(()=>{r(x=>(x+1)%I.length)},1e4);return()=>clearInterval(b)},[I.length]);const N=a.toLocaleDateString("cs-CZ",{weekday:"long"}),_={pondělí:"Začínáme nový týden! 💪",úterý:"Úterní energie! ⚡",středa:"Půlka týdne za námi! 🎉",čtvrtek:"Blíží se páteček! 🌟",pátek:"Hurá, je tady pátek! 🎊",sobota:"Víkendová pohoda! 🏖️",neděle:"Odpočinkový den! 😴"}[N]||"✨";return{today:a,formatDate:e,dayComment:_,birthdaysToday:w,namedayInfos:I,currentInfoIndex:s,markedToday:m,upcomingMarked:v}},VP=({familyMembers:t})=>{const{today:e,formatDate:n,dayComment:i,birthdaysToday:s,namedayInfos:r,currentInfoIndex:a,markedToday:l,upcomingMarked:c}=PP(t);return u.jsxs("div",{className:"header-info",children:[u.jsxs("div",{className:"welcome-section",children:[u.jsx("h2",{className:"welcome-title",children:"🏠 Ahoj rodino!"}),u.jsxs("p",{className:"date-info",children:["Dnes je ",u.jsx("strong",{children:n(e,"WEEKDAY")})," ",n(e,"DD.MM.YYYY")]}),u.jsx("p",{className:"day-comment",children:i})]}),u.jsxs("div",{className:"nameday-row",children:[r.length>0&&u.jsxs("div",{className:"nameday-text animated",children:["💐 ",r[a]]},a),l&&u.jsx("div",{className:"nameday-alert",children:"⚠️ Bacha, jednoho známe!"})]}),s.length>0&&u.jsx("div",{className:"birthday-section",children:u.jsxs("div",{className:"birthday-alert",children:["🎈 Dnes má narozeniny:"," ",u.jsx("strong",{children:s.map(h=>h.name).join(", ")}),"! 🎂"]})}),c.length>1&&u.jsxs("div",{className:"upcoming-tip",children:["💡 Tip: Blíží se svátky ",c.slice(1).map(h=>h.names).join(", ")]})]})},UP=({selectedRecipients:t,onChange:e,familyMembers:n})=>{const i=a=>{t.includes(a)?e(t.filter(l=>l!==a)):e([...t,a])},s=a=>{const l=Os.find(c=>c.id===a);return l?l.members.every(c=>t.includes(c)):!1},r=a=>{const l=Os.find(h=>h.id===a);if(!l)return;if(s(a))e(t.filter(h=>!l.members.includes(h)));else{const h=new Set([...t,...l.members]);e(Array.from(h))}};return u.jsxs("div",{className:"recipient-selector",children:[u.jsxs("div",{className:"recipient-section",children:[u.jsx("div",{className:"section-label",children:"Skupiny:"}),u.jsx("div",{className:"recipient-chips",children:Os.map(a=>u.jsxs("button",{className:`recipient-chip group ${s(a.id)?"selected":""}`,onClick:()=>r(a.id),children:[u.jsx("span",{className:"chip-icon",children:a.icon}),u.jsx("span",{className:"chip-name",children:a.name})]},a.id))})]}),u.jsxs("div",{className:"recipient-section",children:[u.jsx("div",{className:"section-label",children:"Jednotlivci:"}),u.jsx("div",{className:"recipient-chips",children:n.map(a=>u.jsxs("button",{className:`recipient-chip individual ${t.includes(a.id)?"selected":""}`,onClick:()=>i(a.id),children:[u.jsx("span",{className:"chip-icon",children:a.emoji}),u.jsx("span",{className:"chip-name",children:a.name})]},a.id))})]})]})},LP=({senderName:t,onClose:e,familyMembers:n})=>{const{sendMessage:i,permission:s,requestPermission:r}=Ig(),[a,l]=M.useState([]),[c,h]=M.useState(""),[f,p]=M.useState("custom"),[m,v]=M.useState(!1),[w,I]=M.useState(!1),N=_=>{p(_),h(_!=="custom"?_A[_]:"")},y=async()=>{if(a.length===0){alert("Vyber alespoň jednoho příjemce");return}if(!c.trim()){alert("Napiš zprávu");return}if(s!=="granted"&&!await r()){alert("Notifikace nejsou povolené. Povol je v nastavení prohlížeče.");return}I(!0);try{await i(t,a,c,f!=="custom"?f:void 0,m),l([]),h(""),p("custom"),v(!1),e()}catch(_){console.error("Error sending message:",_),alert("Nepodařilo se poslat zprávu")}finally{I(!1)}};return u.jsxs("div",{className:"send-message-panel",children:[u.jsxs("div",{className:"panel-header",children:[u.jsx("h3",{children:"Poslat zprávu rodině"}),u.jsx("button",{className:"close-btn",onClick:e,children:"✕"})]}),u.jsxs("div",{className:"panel-content",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("label",{children:"Komu:"}),u.jsx(UP,{selectedRecipients:a,onChange:l,familyMembers:n})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("label",{children:"Šablona zprávy:"}),u.jsxs("div",{className:"template-buttons",children:[u.jsx("button",{className:`template-btn ${f==="shopping"?"active":""}`,onClick:()=>N("shopping"),children:"🛒 Do obchodu"}),u.jsx("button",{className:`template-btn ${f==="call_down"?"active":""}`,onClick:()=>N("call_down"),children:"📢 Dolů"}),u.jsx("button",{className:`template-btn ${f==="dinner_ready"?"active":""}`,onClick:()=>N("dinner_ready"),children:"🍽️ Jídlo hotové"}),u.jsx("button",{className:`template-btn ${f==="leaving_soon"?"active":""}`,onClick:()=>N("leaving_soon"),children:"🚗 Odjíždím"}),u.jsx("button",{className:`template-btn ${f==="custom"?"active":""}`,onClick:()=>N("custom"),children:"✏️ Vlastní"})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("label",{children:"Zpráva:"}),u.jsx("textarea",{className:"message-input",value:c,onChange:_=>h(_.target.value),placeholder:"Napiš zprávu...",rows:4})]}),u.jsx("div",{className:"form-section",children:u.jsxs("label",{className:"checkbox-label",children:[u.jsx("input",{type:"checkbox",checked:m,onChange:_=>v(_.target.checked)}),u.jsx("span",{className:"checkbox-text",children:"🚨 Urgentní (opakované notifikace)"})]})}),u.jsxs("div",{className:"panel-actions",children:[u.jsx("button",{className:"btn-cancel",onClick:e,children:"Zrušit"}),u.jsx("button",{className:"btn-send",onClick:y,disabled:w||a.length===0||!c.trim(),children:w?"Odesílám...":"📨 Poslat"})]})]})]})},zP=({onNavigateToSettings:t})=>{const{logout:e}=Nl(),{familyMembers:n}=dA();console.log("KROK 2: Data členů dostupná v DashboardLayout:",n);const[i,s]=M.useState("family"),[r,a]=M.useState(null),[l,c]=M.useState(!1),[h,f]=M.useState(!1),{unreadCount:p}=Ig(),m=()=>n[0],v=N=>{a(r===N?null:N)},w=()=>{a(null)},I=N=>{s(N)};return u.jsxs("div",{className:"dashboard-layout",children:[u.jsx("div",{className:"dashboard-layout-header",children:u.jsxs("div",{className:"header-content",children:[u.jsxs("div",{className:"family-grid-wrapper",children:[u.jsx("div",{className:"family-grid-left",children:n.filter(N=>N.headerPosition==="left").map(N=>u.jsxs("div",{className:`family-member-circle ${r===N.id?"selected":""}`,onClick:()=>v(N.id),title:N.name,children:[u.jsxs("div",{className:"member-icon-bg",children:[N.headerIcon," "]}),u.jsx("div",{className:"member-emoji",children:N.emoji}),u.jsx("div",{className:"member-name",children:N.name})]},N.id))}),u.jsx(VP,{familyMembers:n}),u.jsx("div",{className:"family-grid-right",children:n.filter(N=>N.headerPosition==="right").map(N=>u.jsxs("div",{className:`family-member-circle ${r===N.id?"selected":""}`,onClick:()=>v(N.id),title:N.name,children:[u.jsxs("div",{className:"member-icon-bg",children:[N.headerIcon," "]}),u.jsx("div",{className:"member-emoji",children:N.emoji}),u.jsx("div",{className:"member-name",children:N.name})]},N.id))})]}),u.jsxs("div",{className:"header-controls",children:[t&&u.jsx("button",{className:"settings-icon-only",onClick:t,title:"Nastavení",children:"⚙️"}),u.jsxs("button",{className:"message-icon-btn",onClick:()=>f(!0),title:"Poslat zprávu rodině",children:["💬",p>0&&u.jsx("span",{className:"unread-badge-desktop",children:p})]}),u.jsxs("div",{className:"mode-switcher",children:[u.jsxs("button",{className:`mode-btn ${i==="family"?"active":""}`,onClick:()=>I("family"),children:[u.jsx("span",{className:"mode-icon",children:"👨‍👩‍👧‍👦"}),u.jsx("span",{className:"mode-label",children:"Rodinný"})]}),u.jsxs("button",{className:`mode-btn ${i==="tech"?"active":""}`,onClick:()=>I("tech"),children:[u.jsx("span",{className:"mode-icon",children:"🔧"}),u.jsx("span",{className:"mode-label",children:"Technický"})]}),u.jsx("button",{className:"btn-icon-only",onClick:e,title:"Odhlásit se",children:"🚪"})]})]})]})}),u.jsxs("div",{className:`fab-container ${l?"open":""}`,children:[u.jsxs("div",{className:"fab-menu",children:[u.jsxs("button",{className:`fab-menu-item ${i==="family"?"active":""}`,onClick:()=>{I("family"),c(!1)},title:"Rodinný režim",children:[u.jsx("span",{className:"fab-menu-icon",children:"👨‍👩‍👧‍👦"}),u.jsx("span",{className:"fab-menu-label",children:"Rodinný"})]}),u.jsxs("button",{className:`fab-menu-item ${i==="tech"?"active":""}`,onClick:()=>{I("tech"),c(!1)},title:"Technický režim",children:[u.jsx("span",{className:"fab-menu-icon",children:"🔧"}),u.jsx("span",{className:"fab-menu-label",children:"Technický"})]}),t&&u.jsxs("button",{className:"fab-menu-item",onClick:()=>{t(),c(!1)},title:"Nastavení",children:[u.jsx("span",{className:"fab-menu-icon",children:"⚙️"}),u.jsx("span",{className:"fab-menu-label",children:"Nastavení"})]}),u.jsxs("button",{className:"fab-menu-item fab-message-btn",onClick:()=>{f(!0),c(!1)},title:"Poslat zprávu",children:[u.jsx("span",{className:"fab-menu-icon",children:"💬"}),u.jsx("span",{className:"fab-menu-label",children:"Poslat zprávu"}),p>0&&u.jsx("span",{className:"unread-badge",children:p})]})]}),u.jsx("button",{className:"fab-button",onClick:()=>c(!l),title:"Menu",children:u.jsx("span",{className:`fab-icon ${l?"open":""}`,children:l?"✕":"☰"})})]}),u.jsx("div",{className:"dashboard-content",children:i==="family"?u.jsx(MP,{selectedMember:r,onClearFilter:w,familyMembers:n}):u.jsx(OP,{})}),h&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"notification-overlay",onClick:()=>f(!1)}),u.jsx(LP,{senderName:m().name,onClose:()=>f(!1),familyMembers:n})]})]})},BP=[{id:"dad",name:"Táta",emoji:"👨",role:"parent"},{id:"mom",name:"Máma",emoji:"👩",role:"parent"},{id:"jarecek",name:"Jareček",emoji:"👦",role:"child"},{id:"johanka",name:"Johanka",emoji:"👧",role:"child"}],qP=({userId:t,currentMemberId:e,onSelect:n})=>{const[i,s]=M.useState(!1),r=async a=>{s(!0);try{await bs.updateUserSettings(t,{familyMemberId:a}),n(a)}catch(l){console.error("Error saving family member:",l),alert("Nepodařilo se uložit")}finally{s(!1)}};return e?null:u.jsx("div",{className:"family-member-selector-overlay",children:u.jsxs("div",{className:"family-member-selector-modal",children:[u.jsx("h2",{children:"Kdo se přihlašuje?"}),u.jsx("p",{children:"Vyber svůj profil"}),u.jsx("div",{className:"member-options",children:BP.map(a=>u.jsxs("button",{className:"member-option",onClick:()=>r(a.id),disabled:i,children:[u.jsx("span",{className:"member-emoji",children:a.emoji}),u.jsx("span",{className:"member-name",children:a.name})]},a.id))})]})})};function HP(){const{currentUser:t}=Nl(),{devices:e,loading:n,error:i,syncDevices:s}=dA(),[r,a]=M.useState(null),[l,c]=M.useState(null),[h,f]=M.useState(!1),[p,m]=M.useState(void 0);if(M.useEffect(()=>{(async()=>{try{const{remoteConfigService:N}=await Cc(async()=>{const{remoteConfigService:_}=await import("./remoteConfigService-Dg1SIl38.js");return{remoteConfigService:_}},[]);await N.initialize(),console.log("✅ Remote Config inicializován");const y=N.getAllValues();console.log("📦 Načtené konfigurace:",y)}catch(N){console.error("❌ Chyba při inicializaci Remote Config:",N)}})()},[]),M.useEffect(()=>{localStorage.getItem("theme")==="dark"&&document.documentElement.classList.add("dark-theme")},[]),M.useEffect(()=>{(async()=>{console.log("🔍 Testování Bakaláři API...");try{const{bakalariAPI:N}=await Cc(async()=>{const{bakalariAPI:_}=await Promise.resolve().then(()=>fP);return{bakalariAPI:_}},void 0),y=await N.getTimetable();console.log("✅ Rozvrh:",y)}catch(N){console.error("❌ Bakaláři API Chyba:",N)}})()},[]),M.useEffect(()=>{if(!t)return;const I=async()=>{try{const{familyMessagingService:y}=await Cc(async()=>{const{familyMessagingService:b}=await Promise.resolve().then(()=>CP);return{familyMessagingService:b}},void 0);await y.runCleanup(7)}catch(y){console.error("Cleanup error:",y)}};I();const N=setInterval(I,24*60*60*1e3);return()=>clearInterval(N)},[t]),M.useEffect(()=>{if(!t){m(void 0);return}(async()=>{const N=await bs.getUserSettings(t.uid);N!=null&&N.familyMemberId&&m(N.familyMemberId)})(),e&&e.length>0},[t,e,n]),!t)return u.jsx(mO,{});const v=async()=>new Promise(I=>{setTimeout(()=>{const N=[{id:"bf631b96e11e658088nljp",name:"Chytrá zásuvka - Obývák",local_key:"mock_key_1",category:"switch",product_id:"mock_product_1",product_name:"Smart Socket",sub:!1,uuid:"mock_uuid_1",owner_id:"mock_owner_1",online:!0,status:[{code:"switch_1",value:Math.random()>.5},{code:"cur_power",value:Math.round(Math.random()*100)}],lastUpdated:Date.now(),isVisible:!0,customName:"Zásuvka u TV",customColor:"#007bff"},{id:"bf631b96e11e658088nljq",name:"LED pásek - Kuchyň",local_key:"mock_key_2",category:"light",product_id:"mock_product_2",product_name:"LED Strip",sub:!1,uuid:"mock_uuid_2",owner_id:"mock_owner_2",online:Math.random()>.2,status:[{code:"switch_led",value:Math.random()>.3},{code:"bright_value",value:Math.round(Math.random()*100)},{code:"colour_data",value:"#ff6600"}],lastUpdated:Date.now(),isVisible:!0},{id:"bf631b96e11e658088nljr",name:"Teplotní senzor - Ložnice",local_key:"mock_key_3",category:"sensor",product_id:"mock_product_3",product_name:"Temperature Sensor",sub:!1,uuid:"mock_uuid_3",owner_id:"mock_owner_3",online:!0,status:[{code:"temp_current",value:Math.round(Math.random()*10+20)},{code:"humidity_value",value:Math.round(Math.random()*40+40)}],lastUpdated:Date.now(),isVisible:!0,customName:"Senzor u postele"},{id:"bf631b96e11e658088nljs",name:"Chytrý vypínač - Zahrada",local_key:"mock_key_4",category:"garden",product_id:"mock_product_4",product_name:"Garden Switch",sub:!1,uuid:"mock_uuid_4",owner_id:"mock_owner_4",online:Math.random()>.1,status:[{code:"switch_1",value:Math.random()>.6},{code:"timer_1",value:"08:00"}],lastUpdated:Date.now(),isVisible:!0,notes:"Ovládá zahradní osvětlení"}];I(N)},1e3)}),w=async()=>{if(t)try{a(null),c("Synchronizuji zařízení..."),f(!0),console.log("Synchronizing with Tuya API...");const I=await v();console.log("Saving to Firebase..."),await s(I),c("✓ Synchronizace dokončena"),setTimeout(()=>{f(!1),setTimeout(()=>c(null),300)},3e3)}catch(I){console.error("Sync error:",I),a(I.message||"Nepodařilo se synchronizovat data"),c("✗ Chyba při synchronizaci"),setTimeout(()=>f(!1),5e3)}};return r||i?u.jsx("div",{className:"app-layout",children:u.jsxs("div",{className:"modern-error-state",children:[u.jsxs("div",{className:"error-animation",children:[u.jsx("div",{className:"error-icon",children:"⚠️"}),u.jsx("div",{className:"error-pulse"})]}),u.jsx("h2",{className:"error-title",children:"Něco se pokazilo"}),u.jsxs("p",{className:"error-description",children:["Nepodařilo se načíst data: ",r||i]}),u.jsxs("div",{className:"error-actions",children:[u.jsxs("button",{onClick:w,className:"btn btn-modern btn-primary error-retry-btn",children:[u.jsx("span",{className:"btn-icon",children:"🔄"}),"Zkusit znovu"]}),u.jsxs("button",{onClick:()=>window.location.reload(),className:"btn btn-modern btn-outline-secondary",children:[u.jsx("span",{className:"btn-icon",children:"↻"}),"Obnovit stránku"]})]})]})}):u.jsxs("div",{className:"app-layout",children:[u.jsx(tP,{children:u.jsxs(xP,{userId:p||null,children:[!p&&t&&u.jsx(qP,{userId:t.uid,currentMemberId:p,onSelect:m}),u.jsx(zP,{onNavigateToSettings:()=>{console.log("Navigate to settings...")}})]})}),u.jsx("div",{id:"modal-root"}),l&&u.jsxs("div",{className:`modern-notification ${h?"show":""}`,children:[u.jsxs("div",{className:"notification-content",children:[u.jsx("span",{className:"notification-icon",children:"✓"}),u.jsx("span",{className:"notification-text",children:l})]}),u.jsx("div",{className:"notification-progress"})]})]})}WI.createRoot(document.getElementById("root")).render(u.jsx(M.StrictMode,{children:u.jsx(dO,{children:u.jsx(HP,{})})}));export{yn as C,Xs as E,En as F,rh as L,ha as S,Zs as _,xe as a,On as b,le as c,n_ as d,wg as e,Ep as g,Pb as i,on as r};
